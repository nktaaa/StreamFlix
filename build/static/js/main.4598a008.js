/*! For license information please see main.4598a008.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ie(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Oe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ee)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,St,It=!1,Tt=[],Ct=null,At=null,Nt=null,Ot=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Ot.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(On),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Wn(t,Hn,e,we(e)),Oe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Ar=Sr("transitionend"),Nr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Or.length;Pr++){var Dr=Or[Pr];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Oe((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Ir:case Tr:case Cr:s=yn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Re(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ii(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ai=Ei(!1),Ni=Ti;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ai),Si(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ii(Ci,e),Ii(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Ci),Ii(Ci,e)):Si(Ai),Ii(Ai,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ni:Ci.current,i.context=Oi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case x:return(t=jc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ds,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ds,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ds,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ds,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Oi(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Oi(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Oi(t,s=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ou(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Pu,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ai),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Pu(e,t),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ai),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Yu;var c=Ju;if(Yu=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ns=null,Os=null,Rs=0,Ps=0,Ds=Ei(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,Vs=null,Bs=null,zs=0,qs=1/0,Ks=null,Ws=!1,Gs=null,Hs=null,Qs=!1,$s=null,Ys=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=Je()+500,ji&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Rs===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Is.current=o,As=i,null!==Os?t=0:(Ns=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Bs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bs,Ks),t);break}xc(e,Bs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bs,Ks),r);break}xc(e,Bs,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bs,Ks),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=Je()+500,ji&&zi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&As)&&_c();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function hc(){Ps=Ds.current,Si(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ai),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Os=e=Dc(e.current,null),Rs=Ps=t,Ls=0,Ms=null,js=Us=Fs=0,Bs=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=Os;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Os=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Rs)}function yc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Is.current=r,null!==Os)throw Error(a(261));return Ns=null,Rs=0,Ls}function gc(){for(;null!==Os;)bc(Os)}function kc(){for(;null!==Os&&!$e();)bc(Os)}function bc(e){var t=Es(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):Os=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(Os=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Os=n);if(null===e)return Ls=6,void(Os=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Os=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Gs,Gs=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==$s){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Sc(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Je()-zs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return He(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Oc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case O:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Oi(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ou(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ou(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Wa(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(qs=Je()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,I=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(E=!1,S=null)}}else E=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=N,_=function(){R.postMessage(null)}}else _=function(){y(N,0)};function P(e){S=e,E||(E=!0,_())}function D(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".dd4dded0.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix-build-youtube:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_build_youtube=self.webpackChunknetflix_build_youtube||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return xa},SDK_VERSION:function(){return Oo},_DEFAULT_ENTRY_NAME:function(){return go},_addComponent:function(){return xo},_addOrOverwriteComponent:function(){return _o},_apps:function(){return bo},_clearComponents:function(){return To},_components:function(){return wo},_getProvider:function(){return So},_registerComponent:function(){return Eo},_removeServiceInstance:function(){return Io},deleteApp:function(){return Lo},getApp:function(){return Po},getApps:function(){return Do},initializeApp:function(){return Ro},onLog:function(){return Uo},registerVersion:function(){return Fo},setLogLevel:function(){return jo}});var t=n(791),r=n.t(t,2),i=n(250),a=n(248),o=n(327),u=n(164);var s=function(e){e()},c=function(){return s},l=(0,t.createContext)(null);function f(){return(0,t.useContext)(l)}var h=function(){throw new Error("uSES not initialized!")},d=h,p=function(e,t){return e===t};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=e===l?f:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=d(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var m=v();n(110),n(900);var y={notify:function(){},get:function(){return[]}};function g(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=c(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var b=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=g(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);k((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||l;return t.createElement(s.Provider,{value:o},i)};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=e===l?f:function(){return(0,t.useContext)(e)};return function(){return n().store}}var x=w();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=e===l?x:w(e);return function(){return t().dispatch}}var E,S=_();function I(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function T(e){return!!e&&!!e[me]}function C(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ye}(e)||Array.isArray(e)||!!e[ve]||!!(null===(t=e.constructor)||void 0===t?void 0:t[ve])||L(e)||M(e))}function A(e,t,n){void 0===n&&(n=!1),0===N(e)?(n?Object.keys:ge)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function N(e){var t=e[me];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:L(e)?2:M(e)?3:0}function O(e,t){return 2===N(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function R(e,t){return 2===N(e)?e.get(t):e[t]}function P(e,t,n){var r=N(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function D(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function L(e){return fe&&e instanceof Map}function M(e){return he&&e instanceof Set}function F(e){return e.o||e.t}function U(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ke(e);delete t[me];for(var n=ge(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function j(e,t){return void 0===t&&(t=!1),B(e)||T(e)||!C(e)||(N(e)>1&&(e.set=e.add=e.clear=e.delete=V),Object.freeze(e),t&&A(e,(function(e,t){return j(t,!0)}),!0)),e}function V(){I(2)}function B(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function z(e){var t=be[e];return t||I(18,e),t}function q(e,t){be[e]||(be[e]=t)}function K(){return ce}function W(e,t){t&&(z("Patches"),e.u=[],e.s=[],e.v=t)}function G(e){H(e),e.p.forEach($),e.p=null}function H(e){e===ce&&(ce=e.l)}function Q(e){return ce={p:[],l:ce,h:e,m:!0,_:0}}function $(e){var t=e[me];0===t.i||1===t.i?t.j():t.O=!0}function Y(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||z("ES5").S(t,e,r),r?(n[me].P&&(G(t),I(4)),C(e)&&(e=J(t,e),t.l||Z(t,e)),t.u&&z("Patches").M(n[me].t,e,t.u,t.s)):e=J(t,n,[]),G(t),t.u&&t.v(t.u,t.s),e!==pe?e:void 0}function J(e,t,n){if(B(t))return t;var r=t[me];if(!r)return A(t,(function(i,a){return X(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Z(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=U(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),A(a,(function(t,a){return X(e,r,i,t,a,n,o)})),Z(e,i,!1),n&&e.u&&z("Patches").N(r,n,e.u,e.s)}return r.o}function X(e,t,n,r,i,a,o){if(T(i)){var u=J(e,i,a&&t&&3!==t.i&&!O(t.R,r)?a.concat(r):void 0);if(P(n,r,u),!T(u))return;e.m=!1}else o&&n.add(i);if(C(i)&&!B(i)){if(!e.h.D&&e._<1)return;J(e,i),t&&t.A.l||Z(e,i)}}function Z(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&j(t,n)}function ee(e,t){var n=e[me];return(n?F(n):e)[t]}function te(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ne(e){e.P||(e.P=!0,e.l&&ne(e.l))}function re(e){e.o||(e.o=U(e.t))}function ie(e,t,n){var r=L(t)?z("MapSet").F(t,n):M(t)?z("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:K(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=we;n&&(i=[r],a=xe);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):z("ES5").J(t,n);return(n?n.A:K()).p.push(r),r}function ae(e){return T(e)||I(22,e),function e(t){if(!C(t))return t;var n,r=t[me],i=N(t);if(r){if(!r.P&&(r.i<4||!z("ES5").K(r)))return r.t;r.I=!0,n=oe(t,i),r.I=!1}else n=oe(t,i);return A(n,(function(t,i){r&&R(r.t,t)===i||P(n,t,e(i))})),3===i?new Set(n):n}(e)}function oe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return U(e)}function ue(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[me];return we.get(t,e)},set:function(t){var n=this[me];we.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][me];if(!i.P)switch(i.i){case 5:r(i)&&ne(i);break;case 4:n(i)&&ne(i)}}}function n(e){for(var t=e.t,n=e.k,r=ge(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==me){var o=t[a];if(void 0===o&&!O(t,a))return!0;var u=n[a],s=u&&u[me];if(s?s.t!==o:!D(u,o))return!0}}var c=!!t[me];return r.length!==ge(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};q("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=ke(n);delete a[me];for(var o=ge(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:K(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,me,{value:a,writable:!0}),i},S:function(e,n,i){i?T(n)&&n[me].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[me];if(n){var i=n.t,a=n.k,o=n.R,u=n.i;if(4===u)A(a,(function(t){t!==me&&(void 0!==i[t]||O(i,t)?o[t]||e(a[t]):(o[t]=!0,ne(n)))})),A(i,(function(e){void 0!==a[e]||O(a,e)||(o[e]=!1,ne(n))}));else if(5===u){if(r(n)&&(ne(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){d=e}(o.useSyncExternalStoreWithSelector),function(e){e}(a.useSyncExternalStore),E=u.unstable_batchedUpdates,s=E;var se,ce,le="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),fe="undefined"!=typeof Map,he="undefined"!=typeof Set,de="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,pe=le?Symbol.for("immer-nothing"):((se={})["immer-nothing"]=!0,se),ve=le?Symbol.for("immer-draftable"):"__$immer_draftable",me=le?Symbol.for("immer-state"):"__$immer_state",ye=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ge="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ke=Object.getOwnPropertyDescriptors||function(e){var t={};return ge(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},be={},we={get:function(e,t){if(t===me)return e;var n=F(e);if(!O(n,t))return function(e,t,n){var r,i=te(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!C(r)?r:r===ee(e.t,t)?(re(e),e.o[t]=ie(e.A.h,r,e)):r},has:function(e,t){return t in F(e)},ownKeys:function(e){return Reflect.ownKeys(F(e))},set:function(e,t,n){var r=te(F(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ee(F(e),t),a=null==i?void 0:i[me];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(D(n,i)&&(void 0!==n||O(e.t,t)))return!0;re(e),ne(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ee(e.t,t)||t in e.t?(e.R[t]=!1,re(e),ne(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=F(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){I(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){I(12)}},xe={};A(we,(function(e,t){xe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),xe.deleteProperty=function(e,t){return xe.set.call(this,e,t,void 0)},xe.set=function(e,t,n){return we.set.call(this,e[0],t,n,e[0])};var _e=function(){function e(e){var t=this;this.g=de,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&I(6),void 0!==r&&"function"!=typeof r&&I(7),C(e)){var u=Q(t),s=ie(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?G(u):H(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return W(u,r),Y(e,u)}),(function(e){throw G(u),e})):(W(u,r),Y(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===pe&&(o=void 0),t.D&&j(o,!0),r){var l=[],f=[];z("Patches").M(e,o,l,f),r(l,f)}return o}I(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){C(e)||I(8),T(e)&&(e=ae(e));var t=Q(this),n=ie(this,e,void 0);return n[me].C=!0,H(t),n},t.finishDraft=function(e,t){var n=(e&&e[me]).A;return W(n,t),Y(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!de&&I(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=z("Patches").$;return T(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ee=new _e,Se=Ee.produce,Ie=(Ee.produceWithPatches.bind(Ee),Ee.setAutoFreeze.bind(Ee),Ee.setUseProxies.bind(Ee),Ee.applyPatches.bind(Ee),Ee.createDraft.bind(Ee),Ee.finishDraft.bind(Ee),Se);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ce(e){var t=function(e,t){if("object"!==Te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Te(t)?t:String(t)}function Ae(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Pe="function"===typeof Symbol&&Symbol.observable||"@@observable",De=function(){return Math.random().toString(36).substring(7).split("").join(".")},Le={INIT:"@@redux/INIT"+De(),REPLACE:"@@redux/REPLACE"+De(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+De()}};function Me(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Fe(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Re(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Re(1));return n(Fe)(e,t)}if("function"!==typeof e)throw new Error(Re(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(Re(3));return a}function f(e){if("function"!==typeof e)throw new Error(Re(4));if(s)throw new Error(Re(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(Re(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Me(e))throw new Error(Re(7));if("undefined"===typeof e.type)throw new Error(Re(8));if(s)throw new Error(Re(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Le.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Re(10));i=e,h({type:Le.REPLACE})}})[Pe]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Re(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Pe]=function(){return this},e},r}function Ue(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Le.INIT}))throw new Error(Re(12));if("undefined"===typeof n(void 0,{type:Le.PROBE_UNKNOWN_ACTION()}))throw new Error(Re(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Re(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function je(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Re(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=je.apply(void 0,a)(n.dispatch),Oe(Oe({},n),{},{dispatch:r})}}}function Be(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var ze=Be();ze.withExtraArgument=Be;var qe=ze,Ke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),We=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ge=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},He=Object.defineProperty,Qe=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Ze=function(e,t,n){return t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},et=function(e,t){for(var n in t||(t={}))Je.call(t,n)&&Ze(e,n,t[n]);if(Ye)for(var r=0,i=Ye(t);r<i.length;r++){n=i[r];Xe.call(t,n)&&Ze(e,n,t[n])}return e},tt=function(e,t){return Qe(e,$e(t))},nt=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},rt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?je:je.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function it(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var at=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ke(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Ge([void 0],e[0].concat(this)))):new(t.bind.apply(t,Ge([void 0],e.concat(this))))},t}(Array);function ot(e){return C(e)?Ie(e,(function(){})):e}function ut(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new at);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(qe.withExtraArgument(n.extraArgument)):r.push(qe));0;return r}(e)}}function st(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return et(et({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ct(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var lt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ft=["name","message","stack","code"],ht=function(e,t){this.payload=e,this.meta=t},dt=function(e,t){this.payload=e,this.meta=t},pt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=ft;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},vt=function(){function e(e,t,n){var r=st(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:tt(et({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=st(e+"/pending",(function(e,t,n){return{payload:void 0,meta:tt(et({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=st(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||pt)(e||"Rejected"),meta:tt(et({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):lt(),h=new o;function d(e){l=e,h.abort()}var p=function(){return nt(this,null,(function(){var o,p,v,m,y,g;return We(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(b=m)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,m];case 1:m=k.sent(),k.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),u(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new ht(e,t)},fulfillWithValue:function(e,t){return new dt(e,t)}})).then((function(t){if(t instanceof ht)throw t;return t instanceof dt?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof ht?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(mt)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function mt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var yt="listenerMiddleware";st(yt+"/add"),st(yt+"/removeAll"),st(yt+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var gt,kt=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:kt(10);function bt(){bt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Te(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function wt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function xt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){wt(a,r,i,o,u,"next",e)}function u(e){wt(a,r,i,o,u,"throw",e)}o(void 0)}))}}function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}ue();var Et=vt("counter/fetchCount",function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),St=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ot(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?ct(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=et(et({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?ct(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return ot(e())};else{var c=ot(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=Ge([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(T(e))return void 0===(r=n(e,t))?e:r;if(C(e))return Ie(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?st(c,r):st(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}},extraReducers:function(e){e.addCase(Et.pending,(function(e){e.status="loading"})).addCase(Et.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),It=St.actions,Tt=It.login,Ct=It.logout,At=St.actions,Nt=(At.increment,At.decrement,At.incrementByAmount,function(e){return e.user.user}),Ot=function(e){var t,n=ut(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!it(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Ue(a)}var p=u;"function"===typeof p&&(p=p(n));var v=Ve.apply(void 0,p),m=je;c&&(m=rt(et({trace:!1},"object"===typeof c&&c)));var y=[v];return Array.isArray(d)?y=Ge([v],d):"function"===typeof d&&(y=d(y)),Fe(t,f,m.apply(void 0,y))}({reducer:{user:St.reducer}}),Rt=n(184);function Pt(e){if(Array.isArray(e))return e}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){if(e){if("string"===typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}function Mt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ft(e,t){return Pt(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||Lt(e,t)||Mt()}function Ut(e,t){return function(){return e.apply(t,arguments)}}var jt,Vt=Object.prototype.toString,Bt=Object.getPrototypeOf,zt=(jt=Object.create(null),function(e){var t=Vt.call(e);return jt[t]||(jt[t]=t.slice(8,-1).toLowerCase())}),qt=function(e){return e=e.toLowerCase(),function(t){return zt(t)===e}},Kt=function(e){return function(t){return typeof t===e}},Wt=Array.isArray,Gt=Kt("undefined");var Ht=qt("ArrayBuffer");var Qt=Kt("string"),$t=Kt("function"),Yt=Kt("number"),Jt=function(e){return null!==e&&"object"===typeof e},Xt=function(e){if("object"!==zt(e))return!1;var t=Bt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Zt=qt("Date"),en=qt("File"),tn=qt("Blob"),nn=qt("FileList"),rn=qt("URLSearchParams");function an(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Wt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function on(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var un="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,sn=function(e){return!Gt(e)&&e!==un};var cn,ln=(cn="undefined"!==typeof Uint8Array&&Bt(Uint8Array),function(e){return cn&&e instanceof cn}),fn=qt("HTMLFormElement"),hn=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),dn=qt("RegExp"),pn=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};an(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},vn="abcdefghijklmnopqrstuvwxyz",mn="0123456789",yn={DIGIT:mn,ALPHA:vn,ALPHA_DIGIT:vn+vn.toUpperCase()+mn};var gn={isArray:Wt,isArrayBuffer:Ht,isBuffer:function(e){return null!==e&&!Gt(e)&&null!==e.constructor&&!Gt(e.constructor)&&$t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||Vt.call(e)===t||$t(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ht(e.buffer)},isString:Qt,isNumber:Yt,isBoolean:function(e){return!0===e||!1===e},isObject:Jt,isPlainObject:Xt,isUndefined:Gt,isDate:Zt,isFile:en,isBlob:tn,isRegExp:dn,isFunction:$t,isStream:function(e){return Jt(e)&&$t(e.pipe)},isURLSearchParams:rn,isTypedArray:ln,isFileList:nn,forEach:an,merge:function e(){for(var t=(sn(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&on(n,i)||i;Xt(n[a])&&Xt(r)?n[a]=e(n[a],r):Xt(r)?n[a]=e({},r):Wt(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&an(arguments[i],r);return n},extend:function(e,t,n){return an(t,(function(t,r){n&&$t(t)?e[r]=Ut(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&Bt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:zt,kindOfTest:qt,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(Wt(e))return e;var t=e.length;if(!Yt(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:fn,hasOwnProperty:hn,hasOwnProp:hn,reduceDescriptors:pn,freezeMethods:function(e){pn(e,(function(t,n){if($t(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];$t(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return Wt(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:on,global:un,isContextDefined:sn,ALPHABET:yn,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&$t(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Jt(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=Wt(n)?[]:{};return an(n,(function(t,n){var a=e(t,r+1);!Gt(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)}};function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}function wn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xn(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}gn.inherits(xn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:gn.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var _n=xn.prototype,En={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){En[e]={value:e}})),Object.defineProperties(xn,En),Object.defineProperty(_n,"isAxiosError",{value:!0}),xn.from=function(e,t,n,r,i,a){var o=Object.create(_n);return gn.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),xn.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Sn=xn,In=null;function Tn(e){return gn.isPlainObject(e)||gn.isArray(e)}function Cn(e){return gn.endsWith(e,"[]")?e.slice(0,-2):e}function An(e,t,n){return e?e.concat(t).map((function(e,t){return e=Cn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Nn=gn.toFlatObject(gn,{},null,(function(e){return/^is[A-Z]/.test(e)}));var On=function(e,t,n){if(!gn.isObject(e))throw new TypeError("target must be an object");t=t||new(In||FormData);var r=(n=gn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!gn.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&gn.isSpecCompliantForm(t);if(!gn.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(gn.isDate(e))return e.toISOString();if(!u&&gn.isBlob(e))throw new Sn("Blob is not supported. Use a Buffer instead.");return gn.isArrayBuffer(e)||gn.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(gn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(gn.isArray(e)&&function(e){return gn.isArray(e)&&!e.some(Tn)}(e)||(gn.isFileList(e)||gn.endsWith(n,"[]"))&&(u=gn.toArray(e)))return n=Cn(n),u.forEach((function(e,r){!gn.isUndefined(e)&&null!==e&&t.append(!0===o?An([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!Tn(e)||(t.append(An(i,n,a),s(e)),!1)}var l=[],f=Object.assign(Nn,{defaultVisitor:c,convertValue:s,isVisitable:Tn});if(!gn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!gn.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),gn.forEach(n,(function(n,a){!0===(!(gn.isUndefined(n)||null===n)&&i.call(t,n,gn.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function Rn(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Pn(e,t){this._pairs=[],e&&On(e,this,t)}var Dn=Pn.prototype;Dn.append=function(e,t){this._pairs.push([e,t])},Dn.toString=function(e){var t=e?function(t){return e.call(this,t,Rn)}:Rn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Ln=Pn;function Mn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fn(e,t,n){if(!t)return e;var r,i=n&&n.encode||Mn,a=n&&n.serialize;if(r=a?a(t,n):gn.isURLSearchParams(t)?t.toString():new Ln(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Un=function(){function e(){kn(this,e),this.handlers=[]}return wn(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){gn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),jn=Un,Vn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ln,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var zn=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&gn.isArray(r)?r.length:a,u?(gn.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&gn.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&gn.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(gn.isFormData(e)&&gn.isFunction(e.entries)){var n={};return gn.forEachEntry(e,(function(e,r){t(function(e){return gn.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},qn={"Content-Type":void 0};var Kn={transitional:Vn,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=gn.isObject(e);if(a&&gn.isHTMLForm(e)&&(e=new FormData(e)),gn.isFormData(e))return i&&i?JSON.stringify(zn(e)):e;if(gn.isArrayBuffer(e)||gn.isBuffer(e)||gn.isStream(e)||gn.isFile(e)||gn.isBlob(e))return e;if(gn.isArrayBufferView(e))return e.buffer;if(gn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return On(e,new Bn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Bn.isNode&&gn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=gn.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return On(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(gn.isString(e))try{return(t||JSON.parse)(e),gn.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Kn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&gn.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Sn.from(a,Sn.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bn.classes.FormData,Blob:Bn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};gn.forEach(["delete","get","head"],(function(e){Kn.headers[e]={}})),gn.forEach(["post","put","patch"],(function(e){Kn.headers[e]=gn.merge(qn)}));var Wn=Kn,Gn=gn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hn=Symbol("internals");function Qn(e){return e&&String(e).trim().toLowerCase()}function $n(e){return!1===e||null==e?e:gn.isArray(e)?e.map($n):String(e)}function Yn(e,t,n,r,i){return gn.isFunction(r)?r.call(this,t,n):(i&&(t=n),gn.isString(t)?gn.isString(r)?-1!==t.indexOf(r):gn.isRegExp(r)?r.test(t):void 0:void 0)}var Jn=function(e,t){function n(e){kn(this,n),e&&this.set(e)}return wn(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=Qn(t);if(!i)throw new Error("header name must be a non-empty string");var a=gn.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=$n(e))}var a=function(e,t){return gn.forEach(e,(function(e,n){return i(e,n,t)}))};return gn.isPlainObject(e)||e instanceof this.constructor?a(e,t):gn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Gn[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=Qn(e)){var n=gn.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(gn.isFunction(t))return t.call(this,r,n);if(gn.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Qn(e)){var n=gn.findKey(this,e);return!(!n||void 0===this[n]||t&&!Yn(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=Qn(e)){var i=gn.findKey(n,e);!i||t&&!Yn(0,n[i],i,t)||(delete n[i],r=!0)}}return gn.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!Yn(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return gn.forEach(this,(function(r,i){var a=gn.findKey(n,i);if(a)return t[a]=$n(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=$n(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return gn.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&gn.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=Ft(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Hn]=this[Hn]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Qn(e);t[r]||(!function(e,t){var n=gn.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return gn.isArray(e)?e.forEach(r):r(e),this}}]),n}();Jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),gn.freezeMethods(Jn.prototype),gn.freezeMethods(Jn);var Xn=Jn;function Zn(e,t){var n=this||Wn,r=t||n,i=Xn.from(r.headers),a=r.data;return gn.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function er(e){return!(!e||!e.__CANCEL__)}function tr(e,t,n){Sn.call(this,null==e?"canceled":e,Sn.ERR_CANCELED,t,n),this.name="CanceledError"}gn.inherits(tr,Sn,{__CANCEL__:!0});var nr=tr;var rr=Bn.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),gn.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),gn.isString(r)&&o.push("path="+r),gn.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ir(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var ar=Bn.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=gn.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var or=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function ur(e,t){var n=0,r=or(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var sr="undefined"!==typeof XMLHttpRequest,cr={http:In,xhr:sr&&function(e){return new Promise((function(t,n){var r,i=e.data,a=Xn.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}gn.isFormData(i)&&(Bn.isStandardBrowserEnv||Bn.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=ir(e.baseURL,e.url);function h(){if(s){var r=Xn.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Sn("Request failed with status code "+n.status,[Sn.ERR_BAD_REQUEST,Sn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),Fn(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new Sn("Request aborted",Sn.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new Sn("Network Error",Sn.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Vn;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Sn(t,r.clarifyTimeoutError?Sn.ETIMEDOUT:Sn.ECONNABORTED,e,s)),s=null},Bn.isStandardBrowserEnv){var d=(e.withCredentials||ar(f))&&e.xsrfCookieName&&rr.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&gn.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),gn.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",ur(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",ur(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new nr(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===Bn.protocols.indexOf(p)?n(new Sn("Unsupported protocol "+p+":",Sn.ERR_BAD_REQUEST,e)):s.send(i||null)}))}};gn.forEach(cr,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var lr=function(e){for(var t,n,r=(e=gn.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=gn.isString(t)?cr[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new Sn("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(gn.hasOwnProp(cr,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!gn.isFunction(n))throw new TypeError("adapter is not a function");return n};function fr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nr(null,e)}function hr(e){return fr(e),e.headers=Xn.from(e.headers),e.data=Zn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),lr(e.adapter||Wn.adapter)(e).then((function(t){return fr(e),t.data=Zn.call(e,e.transformResponse,t),t.headers=Xn.from(t.headers),t}),(function(t){return er(t)||(fr(e),t&&t.response&&(t.response.data=Zn.call(e,e.transformResponse,t.response),t.response.headers=Xn.from(t.response.headers))),Promise.reject(t)}))}var dr=function(e){return e instanceof Xn?e.toJSON():e};function pr(e,t){t=t||{};var n={};function r(e,t,n){return gn.isPlainObject(e)&&gn.isPlainObject(t)?gn.merge.call({caseless:n},e,t):gn.isPlainObject(t)?gn.merge({},t):gn.isArray(t)?t.slice():t}function i(e,t,n){return gn.isUndefined(t)?gn.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!gn.isUndefined(t))return r(void 0,t)}function o(e,t){return gn.isUndefined(t)?gn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(dr(e),dr(t),!0)}};return gn.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);gn.isUndefined(o)&&a!==u||(n[r]=o)})),n}var vr="1.3.5",mr={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){mr[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var yr={};mr.transitional=function(e,t,n){function r(e,t){return"[Axios v1.3.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Sn(r(i," has been removed"+(t?" in "+t:"")),Sn.ERR_DEPRECATED);return t&&!yr[i]&&(yr[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var gr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Sn("options must be an object",Sn.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new Sn("option "+a+" must be "+s,Sn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Sn("Unknown option "+a,Sn.ERR_BAD_OPTION)}},validators:mr},kr=gr.validators,br=function(){function e(t){kn(this,e),this.defaults=t,this.interceptors={request:new jn,response:new jn}}return wn(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=pr(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&gr.assertOptions(i,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),null!=a&&(gn.isFunction(a)?t.paramsSerializer={serialize:a}:gr.assertOptions(a,{encode:kr.function,serialize:kr.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&gn.merge(o.common,o[t.method]))&&gn.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Xn.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[hr.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],m=u[h++];try{p=v(p)}catch(y){m.call(this,y);break}}try{c=hr.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return Fn(ir((e=pr(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();gn.forEach(["delete","get","head","options"],(function(e){br.prototype[e]=function(t,n){return this.request(pr(n||{},{method:e,url:t,data:(n||{}).data}))}})),gn.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(pr(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}br.prototype[e]=t(),br.prototype[e+"Form"]=t(!0)}));var wr=br,xr=function(){function e(t){if(kn(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new nr(e,t,i),n(r.reason))}))}return wn(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),_r=xr;var Er={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Er).forEach((function(e){var t=Ft(e,2),n=t[0],r=t[1];Er[r]=n}));var Sr=Er;var Ir=function e(t){var n=new wr(t),r=Ut(wr.prototype.request,n);return gn.extend(r,wr.prototype,n,{allOwnKeys:!0}),gn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(pr(t,n))},r}(Wn);Ir.Axios=wr,Ir.CanceledError=nr,Ir.CancelToken=_r,Ir.isCancel=er,Ir.VERSION=vr,Ir.toFormData=On,Ir.AxiosError=Sn,Ir.Cancel=Ir.CanceledError,Ir.all=function(e){return Promise.all(e)},Ir.spread=function(e){return function(t){return e.apply(null,t)}},Ir.isAxiosError=function(e){return gn.isObject(e)&&!0===e.isAxiosError},Ir.mergeConfig=pr,Ir.AxiosHeaders=Xn,Ir.formToJSON=function(e){return zn(gn.isHTMLForm(e)?new FormData(e):e)},Ir.HttpStatusCode=Sr,Ir.default=Ir;var Tr=Ir.create({baseURL:"https://api.themoviedb.org/3"}),Cr="8ce9a49ea69b7eeb4b6833a335557d10",Ar={fetchTrending:"/trending/all/week?api_key=".concat(Cr,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(Cr,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(Cr,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(Cr,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(Cr,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(Cr,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(Cr,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(Cr,"&with_genres=99")};var Nr,Or=function(){var e=Ft((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return(e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.get(Ar.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),(0,Rt.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===n||void 0===n?void 0:n.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,Rt.jsxs)("div",{className:"banner__contents",children:[(0,Rt.jsx)("h1",{className:"banner__title",children:(null===n||void 0===n?void 0:n.title)||n.name||(null===n||void 0===n?void 0:n.original_name)}),(0,Rt.jsxs)("div",{className:"banner__buttons",children:[(0,Rt.jsx)("button",{className:"banner__button",children:"Play"}),(0,Rt.jsx)("button",{className:"banner__button",children:"My List"})]}),(0,Rt.jsx)("h2",{className:"banner__description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}(null===n||void 0===n?void 0:n.overview,150)})]}),(0,Rt.jsx)("div",{className:"banner--fadeBottom"})]})};function Rr(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Pr(e){return function(e){if(Array.isArray(e))return Dt(e)}(e)||Rr(e)||Lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function Lr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}function Fr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jr(e){var t=Fr();return function(){var n,r=Mr(e);if(t){var i=Mr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Te(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ur(e)}(this,n)}}function Vr(e,t,n){return Vr=Fr()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Dr(i,n.prototype),i},Vr.apply(null,arguments)}function Br(e){var t="function"===typeof Map?new Map:void 0;return Br=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Vr(e,arguments,Mr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Dr(n,e)},Br(e)}function zr(e){return Pt(e)||Rr(e)||Lt(e)||Mt()}function qr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Lt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kr.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Nr||(Nr={}));var Wr,Gr="popstate";function Hr(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Qr(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function $r(e,t){return{usr:e.state,key:e.key,idx:t}}function Yr(e,t,n,r){return void 0===n&&(n=null),Kr({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Xr(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Jr(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Xr(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Zr(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=Nr.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=Nr.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:Jr(e);return Hr(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(Kr({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Gr,p),f=e,function(){o.removeEventListener(Gr,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=Nr.Push;var r=Yr(m.location,e,t);n&&n(r,e);var i=$r(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=Nr.Replace;var r=Yr(m.location,e,t);n&&n(r,e);var i=$r(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Wr||(Wr={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ei(e,t,n){void 0===n&&(n="/");var r=pi(("string"===typeof t?Xr(t):t).pathname||"/",n);if(null==r)return null;var i=ti(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=fi(i[o],di(r));return a}function ti(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Hr(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=gi([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(Hr(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),ti(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:li(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=qr(ni(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function ni(e){var t=e.split("/");if(0===t.length)return[];var n=zr(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=ni(i.join("/")),s=[];return s.push.apply(s,Pr(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,Pr(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var ri=/^:\w+$/,ii=3,ai=2,oi=1,ui=10,si=-2,ci=function(e){return"*"===e};function li(e,t){var n=e.split("/"),r=n.length;return n.some(ci)&&(r+=si),t&&(r+=ai),n.filter((function(e){return!ci(e)})).reduce((function(e,t){return e+(ri.test(t)?ii:""===t?oi:ui)}),r)}function fi(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=hi({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:gi([i,l.pathname]),pathnameBase:ki(gi([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=gi([i,l.pathnameBase]))}return a}function hi(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Qr("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=Ft(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Qr(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function di(e){try{return decodeURI(e)}catch(t){return Qr(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function pi(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function vi(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function mi(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function yi(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=Xr(e):(Hr(!(i=Kr({},e)).pathname||!i.pathname.includes("?"),vi("?","pathname","search",i)),Hr(!i.pathname||!i.pathname.includes("#"),vi("#","pathname","hash",i)),Hr(!i.search||!i.search.includes("#"),vi("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Xr(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:bi(a),hash:wi(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var gi=function(e){return e.join("/").replace(/\/\/+/g,"/")},ki=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},bi=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},wi=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},xi=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n)}(Br(Error));function _i(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Ei=["post","put","patch","delete"],Si=(new Set(Ei),["get"].concat(Ei));new Set(Si),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var Ii="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Ti=t.useState,Ci=t.useEffect,Ai=t.useLayoutEffect,Ni=t.useDebugValue;function Oi(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Ii(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var Ri=t.createContext(null);var Pi=t.createContext(null);var Di=t.createContext(null);var Li=t.createContext(null);var Mi=t.createContext(null);var Fi=t.createContext({outlet:null,matches:[]});var Ui=t.createContext(null);function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}function Vi(){return null!=t.useContext(Mi)}function Bi(){return Vi()||Hr(!1),t.useContext(Mi).location}function zi(){Vi()||Hr(!1);var e=t.useContext(Li),n=e.basename,r=e.navigator,i=t.useContext(Fi).matches,a=Bi().pathname,o=JSON.stringify(mi(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);t.useEffect((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=yi(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:gi([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function qi(){var e=function(){var e,n=t.useContext(Ui),r=$i(Wi.UseRouteError),i=Yi(Wi.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=_i(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var Ki,Wi,Gi=function(e){Lr(r,e);var n=jr(r);function r(e){var t;return kn(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return wn(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Fi.Provider,{value:this.props.routeContext},t.createElement(Ui.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function Hi(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(Ri);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Fi.Provider,{value:n},i)}function Qi(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||Hr(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;r&&(c=o.route.ErrorBoundary?t.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:t.createElement(qi,null));var l=n.concat(i.slice(0,u+1)),f=function(){var n=e;return s?n=c:o.route.Component?n=t.createElement(o.route.Component,null):o.route.element&&(n=o.route.element),t.createElement(Hi,{match:o,routeContext:{outlet:e,matches:l},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===u)?t.createElement(Gi,{location:r.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function $i(e){var n=t.useContext(Pi);return n||Hr(!1),n}function Yi(e){var n=function(e){var n=t.useContext(Fi);return n||Hr(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Hr(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Ki||(Ki={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Wi||(Wi={}));var Ji;function Xi(e){Hr(!1)}function Zi(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?Nr.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;Vi()&&Hr(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Xr(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,E=void 0===_?"default":_,S=t.useMemo((function(){var e=pi(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:x,key:E},navigationType:s}}),[h,m,g,b,x,E,s]);return null==S?null:t.createElement(Li.Provider,{value:d},t.createElement(Mi.Provider,{children:a,value:S}))}function ea(e){var n=e.children,r=e.location,i=t.useContext(Ri);return function(e,n){Vi()||Hr(!1);var r,i=t.useContext(Li).navigator,a=t.useContext(Pi),o=t.useContext(Fi).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,Bi());if(n){var f,h="string"===typeof n?Xr(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||Hr(!1),r=h}else r=l;var d=r.pathname||"/",p=ei(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=Qi(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:gi([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:gi([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?t.createElement(Mi.Provider,{value:{location:ji({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:Nr.Pop}},v):v}(i&&!n?i.router.routes:na(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ji||(Ji={}));var ta=new Promise((function(){}));t.Component;function na(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(Pr(n),[i]);if(e.type!==t.Fragment){e.type!==Xi&&Hr(!1),e.props.index&&e.props.children&&Hr(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=na(e.props.children,a)),r.push(o)}else r.push.apply(r,na(e.props.children,a))}})),r}var ra=function(){var e=Ft((0,t.useState)(!1),2),n=e[0],r=e[1],i=zi(),a=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,Rt.jsx)("div",{className:"nav ".concat(n&&"nav__black"),children:(0,Rt.jsxs)("div",{className:"nav__contents",children:[(0,Rt.jsx)("img",{onClick:function(){return i("/")},className:"nav__logo",src:"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png",alt:""}),(0,Rt.jsx)("img",{onClick:function(){return i("/profile")},className:"nav__avatar",src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:""})]})})};var ia=function(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=Ft((0,t.useState)([]),2),u=o[0],s=o[1];return(0,t.useEffect)((function(){function e(){return(e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),console.log(u),(0,Rt.jsxs)("div",{className:"row",children:[(0,Rt.jsx)("h2",{children:n}),(0,Rt.jsx)("div",{className:"row__posters",children:u.map((function(e){return(a&&e.poster_path||!a&&e.backdrop_path)&&(0,Rt.jsx)("img",{className:"row__poster ".concat(a&&"row__posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))})]})};var aa=function(){return(0,Rt.jsxs)("div",{className:"homeScreen",children:[(0,Rt.jsx)(ra,{}),(0,Rt.jsx)(Or,{}),(0,Rt.jsx)(ia,{title:"NETFLIX ORIGINALS",fetchUrl:Ar.fetchNetflixOriginals,isLargeRow:!0}),(0,Rt.jsx)(ia,{title:"Trending Now",fetchUrl:Ar.fetchTrending}),(0,Rt.jsx)(ia,{title:"Top Rated",fetchUrl:Ar.fetchTopRated}),(0,Rt.jsx)(ia,{title:"Action Movies",fetchUrl:Ar.fetchActionMovies}),(0,Rt.jsx)(ia,{title:"Comedy Movies",fetchUrl:Ar.fetchComedyMovies}),(0,Rt.jsx)(ia,{title:"Horror Movies",fetchUrl:Ar.fetchHorrorMovies}),(0,Rt.jsx)(ia,{title:"Romance Movies",fetchUrl:Ar.fetchRomanceMovies}),(0,Rt.jsx)(ia,{title:"Documentaries",fetchUrl:Ar.fetchDocumentaries})]})},oa=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ua={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(oa(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new sa;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},sa=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return wn(n)}(Br(Error)),ca=function(e){return function(e){var t=oa(e);return ua.encodeByteArray(t,!0)}(e).replace(/\./g,"")},la=function(e){try{return ua.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fa(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=fa(e[n],t[n]));return e}var ha=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},da=function(){try{return ha()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&la(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},pa=function(){var e;return null===(e=da())||void 0===e?void 0:e.config},va=function(){function e(){var t=this;kn(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return wn(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ma(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ya(){var e,t=null===(e=da())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ga(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ka(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ba(){var e=ma();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wa(){try{return"object"===typeof indexedDB}catch(e){return!1}}var xa=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Ur(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ur(a),_a.prototype.create),a}return wn(n)}(Br(Error)),_a=function(){function e(t,n,r){kn(this,e),this.service=t,this.serviceName=n,this.errors=r}return wn(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ea,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new xa(n,a,t)}}]),e}();var Ea=/\{\$([^}]+)}/g;function Sa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ia(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ta(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ca(u)&&Ca(s)){if(!Ta(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ca(e){return null!==e&&"object"===typeof e}function Aa(e){for(var t=[],n=function(){var e=Ft(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Na(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Ft(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Oa(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ra(e,t){var n=new Pa(e,t);return n.subscribe.bind(n)}var Pa=function(){function e(t,n){var r=this;kn(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return wn(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=qr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Da),void 0===r.error&&(r.error=Da),void 0===r.complete&&(r.complete=Da);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Da(){}function La(e){return e&&e._delegate?e._delegate:e}var Ma=function(){function e(t,n,r){kn(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return wn(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Fa="[DEFAULT]",Ua=function(){function e(t,n){kn(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return wn(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new va;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch(s){}var t,n=qr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Ft(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Pr(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Pr(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=qr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Ft(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=qr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(ZC){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Fa?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(ZC){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa;return this.component?this.component.multipleInstances?e:Fa:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ja,Va,Ba=function(){function e(t){kn(this,e),this.name=t,this.providers=new Map}return wn(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ua(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),za=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Va||(Va={}));var qa={debug:Va.DEBUG,verbose:Va.VERBOSE,info:Va.INFO,warn:Va.WARN,error:Va.ERROR,silent:Va.SILENT},Ka=Va.INFO,Wa=(Ae(ja={},Va.DEBUG,"log"),Ae(ja,Va.VERBOSE,"log"),Ae(ja,Va.INFO,"info"),Ae(ja,Va.WARN,"warn"),Ae(ja,Va.ERROR,"error"),ja),Ga=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Wa[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ha=function(){function e(t){kn(this,e),this.name=t,this._logLevel=Ka,this._logHandler=Ga,this._userLogHandler=null,za.push(this)}return wn(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Va))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?qa[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Va.DEBUG].concat(t)),this._logHandler.apply(this,[this,Va.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Va.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Va.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Va.INFO].concat(t)),this._logHandler.apply(this,[this,Va.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Va.WARN].concat(t)),this._logHandler.apply(this,[this,Va.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Va.ERROR].concat(t)),this._logHandler.apply(this,[this,Va.ERROR].concat(t))}}]),e}();var Qa,$a,Ya=function(e,t){return t.some((function(t){return e instanceof t}))};var Ja=new WeakMap,Xa=new WeakMap,Za=new WeakMap,eo=new WeakMap,to=new WeakMap;var no={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xa.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Za.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ao(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ro(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($a||($a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(oo(this),n),ao(Ja.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ao(e.apply(oo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[oo(this),t].concat(r));return Za.set(a,t.sort?t.sort():[t]),ao(a)}}function io(e){return"function"===typeof e?ro(e):(e instanceof IDBTransaction&&function(e){if(!Xa.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Xa.set(e,t)}}(e),Ya(e,Qa||(Qa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,no):e)}function ao(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ao(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ja.set(t,e)})).catch((function(){})),to.set(t,e),t}(e);if(eo.has(e))return eo.get(e);var t=io(e);return t!==e&&(eo.set(e,t),to.set(t,e)),t}var oo=function(e){return to.get(e)};var uo,so,co=["get","getKey","getAll","getAllKeys","count"],lo=["put","add","delete","clear"],fo=new Map;function ho(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(fo.get(t))return fo.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=lo.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||co.includes(n))){var a=function(){var e=xt(bt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return fo.set(t,a),a}}}no=function(e){return Oe(Oe({},e),{},{get:function(t,n,r){return ho(t,n)||e.get(t,n,r)},has:function(t,n){return!!ho(t,n)||e.has(t,n)}})}(no);var po=function(){function e(t){kn(this,e),this.container=t}return wn(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var vo="@firebase/app",mo="0.9.8",yo=new Ha("@firebase/app"),go="[DEFAULT]",ko=(Ae(uo={},vo,"fire-core"),Ae(uo,"@firebase/app-compat","fire-core-compat"),Ae(uo,"@firebase/analytics","fire-analytics"),Ae(uo,"@firebase/analytics-compat","fire-analytics-compat"),Ae(uo,"@firebase/app-check","fire-app-check"),Ae(uo,"@firebase/app-check-compat","fire-app-check-compat"),Ae(uo,"@firebase/auth","fire-auth"),Ae(uo,"@firebase/auth-compat","fire-auth-compat"),Ae(uo,"@firebase/database","fire-rtdb"),Ae(uo,"@firebase/database-compat","fire-rtdb-compat"),Ae(uo,"@firebase/functions","fire-fn"),Ae(uo,"@firebase/functions-compat","fire-fn-compat"),Ae(uo,"@firebase/installations","fire-iid"),Ae(uo,"@firebase/installations-compat","fire-iid-compat"),Ae(uo,"@firebase/messaging","fire-fcm"),Ae(uo,"@firebase/messaging-compat","fire-fcm-compat"),Ae(uo,"@firebase/performance","fire-perf"),Ae(uo,"@firebase/performance-compat","fire-perf-compat"),Ae(uo,"@firebase/remote-config","fire-rc"),Ae(uo,"@firebase/remote-config-compat","fire-rc-compat"),Ae(uo,"@firebase/storage","fire-gcs"),Ae(uo,"@firebase/storage-compat","fire-gcs-compat"),Ae(uo,"@firebase/firestore","fire-fst"),Ae(uo,"@firebase/firestore-compat","fire-fst-compat"),Ae(uo,"fire-js","fire-js"),Ae(uo,"firebase","fire-js-all"),uo),bo=new Map,wo=new Map;function xo(e,t){try{e.container.addComponent(t)}catch(n){yo.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _o(e,t){e.container.addOrOverwriteComponent(t)}function Eo(e){var t=e.name;if(wo.has(t))return yo.debug("There were multiple attempts to register component ".concat(t,".")),!1;wo.set(t,e);var n,r=qr(bo.values());try{for(r.s();!(n=r.n()).done;){xo(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function So(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:go;So(e,t).clearInstance(n)}function To(){wo.clear()}var Co=(Ae(so={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ae(so,"bad-app-name","Illegal App name: '{$appName}"),Ae(so,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ae(so,"app-deleted","Firebase App named '{$appName}' already deleted"),Ae(so,"no-options","Need to provide options, when not being deployed to hosting via source."),Ae(so,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ae(so,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ae(so,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ae(so,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ae(so,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ae(so,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),so),Ao=new _a("app","Firebase",Co),No=function(){function e(t,n,r){var i=this;kn(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ma("app",(function(){return i}),"PUBLIC"))}return wn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}]),e}(),Oo="9.20.0";function Ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:go,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ao.create("bad-app-name",{appName:String(i)});if(n||(n=pa()),!n)throw Ao.create("no-options");var a=bo.get(i);if(a){if(Ta(n,a.options)&&Ta(r,a.config))return a;throw Ao.create("duplicate-app",{appName:i})}var o,u=new Ba(i),s=qr(wo.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new No(n,r,u);return bo.set(i,l),l}function Po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:go,t=bo.get(e);if(!t&&e===go)return Ro();if(!t)throw Ao.create("no-app",{appName:e});return t}function Do(){return Array.from(bo.values())}function Lo(e){return Mo.apply(this,arguments)}function Mo(){return(Mo=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!bo.has(n)){e.next=6;break}return bo.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t,n){var r,i=null!==(r=ko[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void yo.warn(u.join(" "))}Eo(new Ma("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Uo(e,t){if(null!==e&&"function"!==typeof e)throw Ao.create("invalid-log-argument");!function(e,t){var n,r=qr(za);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=qa[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Va[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function jo(e){var t;t=e,za.forEach((function(e){e.setLogLevel(t)}))}var Vo="firebase-heartbeat-database",Bo=1,zo="firebase-heartbeat-store",qo=null;function Ko(){return qo||(qo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ao(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ao(u.result),e.oldVersion,e.newVersion,ao(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(Vo,Bo,{upgrade:function(e,t){if(0===t)e.createObjectStore(zo)}}).catch((function(e){throw Ao.create("idb-open",{originalErrorMessage:e.message})}))),qo}function Wo(e){return Go.apply(this,arguments)}function Go(){return Go=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ko();case 3:return n=e.sent,e.abrupt("return",n.transaction(zo).objectStore(zo).get($o(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof xa?yo.warn(e.t0.message):(r=Ao.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yo.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Go.apply(this,arguments)}function Ho(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ko();case 3:return r=e.sent,i=r.transaction(zo,"readwrite"),a=i.objectStore(zo),e.next=8,a.put(n,$o(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof xa?yo.warn(e.t0.message):(o=Ao.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yo.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Qo.apply(this,arguments)}function $o(e){return"".concat(e.name,"!").concat(e.options.appId)}var Yo=function(){function e(t){var n=this;kn(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new tu(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return wn(e,[{key:"triggerHeartbeat",value:function(){var e=xt(bt().mark((function e(){var t,n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Jo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Jo(),n=Xo(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ca(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Jo(){return(new Date).toISOString().substring(0,10)}function Xo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=qr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),nu(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),nu(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Zo,eu,tu=function(){function e(t){kn(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return wn(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wa()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Wo(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ho(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ho(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Pr(r.heartbeats),Pr(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function nu(e){return ca(JSON.stringify({version:2,heartbeats:e})).length}Zo="",Eo(new Ma("platform-logger",(function(e){return new po(e)}),"PRIVATE")),Eo(new Ma("heartbeat",(function(e){return new Yo(e)}),"PRIVATE")),Fo(vo,mo,Zo),Fo(vo,mo,"esm2017"),Fo("fire-js","");var ru=function(){function e(t,n){var r=this;kn(this,e),this._delegate=t,this.firebase=n,xo(t,new Ma("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return wn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Lo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:go;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:go;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){xo(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){_o(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),iu=(Ae(eu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ae(eu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),eu),au=new _a("app-compat","Firebase",iu);var ou=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ro(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Sa(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Fo,setLogLevel:jo,onLog:Uo,apps:null,SDK_VERSION:Oo,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Eo(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw au.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&fa(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Sa(n,e=e||go))throw au.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ru);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){fa(n,e)},createSubscribe:Ra,ErrorFactory:_a,deepExtend:fa}),n}(),uu=new Ha("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){uu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var su=self.firebase.SDK_VERSION;su&&su.indexOf("LITE")>=0&&uu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var cu=ou;!function(e){Fo("@firebase/app-compat","0.2.8",e)}();function lu(){return lu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mr(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},lu.apply(this,arguments)}cu.registerVersion("firebase","9.20.0","app-compat");function fu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var hu;Object.create;var du={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pu="EMAIL_SIGNIN",vu="PASSWORD_RESET",mu="RECOVER_EMAIL",yu="REVERT_SECOND_FACTOR_ADDITION",gu="VERIFY_AND_CHANGE_EMAIL",ku="VERIFY_EMAIL";function bu(){return Ae({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var wu=function(){var e;return Ae(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ae(e,"argument-error",""),Ae(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ae(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ae(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ae(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ae(e,"cordova-not-ready","Cordova framework is not ready."),Ae(e,"cors-unsupported","This browser is not supported."),Ae(e,"credential-already-in-use","This credential is already associated with a different user account."),Ae(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ae(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ae(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ae(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ae(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ae(e,"email-already-in-use","The email address is already in use by another account."),Ae(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ae(e,"expired-action-code","The action code has expired."),Ae(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ae(e,"internal-error","An internal AuthError has occurred."),Ae(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ae(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ae(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ae(e,"invalid-auth-event","An internal AuthError has occurred."),Ae(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ae(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ae(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ae(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ae(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ae(e,"invalid-email","The email address is badly formatted."),Ae(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ae(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ae(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ae(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ae(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ae(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ae(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ae(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ae(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ae(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ae(e,"wrong-password","The password is invalid or the user does not have a password."),Ae(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ae(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ae(e,"invalid-provider-id","The specified provider ID is invalid."),Ae(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ae(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ae(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ae(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ae(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ae(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ae(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ae(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ae(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ae(e,"missing-continue-uri","A continue URL must be provided in the request."),Ae(e,"missing-iframe-start","An internal AuthError has occurred."),Ae(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ae(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ae(e,"missing-password","A non-empty password must be provided"),Ae(e,"missing-multi-factor-info","No second factor identifier is provided."),Ae(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ae(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ae(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ae(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ae(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ae(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ae(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ae(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ae(e,"no-auth-event","An internal AuthError has occurred."),Ae(e,"no-such-provider","User was not linked to an account with the given provider."),Ae(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ae(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ae(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ae(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ae(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ae(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ae(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ae(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ae(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ae(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ae(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ae(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ae(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ae(e,"timeout","The operation has timed out."),Ae(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ae(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ae(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ae(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ae(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ae(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ae(e,"unverified-email","The operation requires a verified email."),Ae(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ae(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ae(e,"user-disabled","The user account has been disabled by an administrator."),Ae(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ae(e,"user-signed-out",""),Ae(e,"weak-password","The password must be 6 characters long or more."),Ae(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ae(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Ae(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Ae(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Ae(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Ae(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Ae(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Ae(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Ae(e,"invalid-req-type","Invalid request parameters."),Ae(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},xu=bu,_u=new _a("auth","Firebase",bu()),Eu=new Ha("@firebase/auth");function Su(e){if(Eu.logLevel<=Va.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Eu.warn.apply(Eu,["Auth (".concat(Oo,"): ").concat(e)].concat(n))}}function Iu(e){if(Eu.logLevel<=Va.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Eu.error.apply(Eu,["Auth (".concat(Oo,"): ").concat(e)].concat(n))}}function Tu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ou.apply(void 0,[e].concat(n))}function Cu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ou.apply(void 0,[e].concat(n))}function Au(e,t,n){var r=Object.assign(Object.assign({},xu()),Ae({},t,n));return new _a("auth","Firebase",r).create(t,{appName:e.name})}function Nu(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Tu(e,"argument-error"),Au(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ou(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Pr(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Pr(o)))}return _u.create.apply(_u,[e].concat(n))}function Ru(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ou.apply(void 0,[t].concat(r))}}function Pu(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Iu(t),new Error(t)}function Du(e,t){e||Pu(t)}function Lu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mu(){return"http:"===Fu()||"https:"===Fu()}function Fu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Uu=function(){function e(t,n){kn(this,e),this.shortDelay=t,this.longDelay=n,Du(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ma())||ka()}return wn(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Mu()||ga()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ju(e,t){Du(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Vu=function(){function e(){kn(this,e)}return wn(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Pu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Pu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Pu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Bu=(Ae(hu={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ae(hu,"MISSING_CUSTOM_TOKEN","internal-error"),Ae(hu,"INVALID_IDENTIFIER","invalid-email"),Ae(hu,"MISSING_CONTINUE_URI","internal-error"),Ae(hu,"INVALID_PASSWORD","wrong-password"),Ae(hu,"MISSING_PASSWORD","missing-password"),Ae(hu,"EMAIL_EXISTS","email-already-in-use"),Ae(hu,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ae(hu,"INVALID_IDP_RESPONSE","invalid-credential"),Ae(hu,"INVALID_PENDING_TOKEN","invalid-credential"),Ae(hu,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ae(hu,"MISSING_REQ_TYPE","internal-error"),Ae(hu,"EMAIL_NOT_FOUND","user-not-found"),Ae(hu,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ae(hu,"EXPIRED_OOB_CODE","expired-action-code"),Ae(hu,"INVALID_OOB_CODE","invalid-action-code"),Ae(hu,"MISSING_OOB_CODE","internal-error"),Ae(hu,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ae(hu,"INVALID_ID_TOKEN","invalid-user-token"),Ae(hu,"TOKEN_EXPIRED","user-token-expired"),Ae(hu,"USER_NOT_FOUND","user-token-expired"),Ae(hu,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ae(hu,"INVALID_CODE","invalid-verification-code"),Ae(hu,"INVALID_SESSION_INFO","invalid-verification-id"),Ae(hu,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ae(hu,"MISSING_SESSION_INFO","missing-verification-id"),Ae(hu,"SESSION_EXPIRED","code-expired"),Ae(hu,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ae(hu,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ae(hu,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ae(hu,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ae(hu,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ae(hu,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ae(hu,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ae(hu,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ae(hu,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ae(hu,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ae(hu,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ae(hu,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ae(hu,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ae(hu,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ae(hu,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ae(hu,"MISSING_CLIENT_TYPE","missing-client-type"),Ae(hu,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ae(hu,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ae(hu,"INVALID_REQ_TYPE","invalid-req-type"),hu),zu=new Uu(3e4,6e4);function qu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ku(e,t,n,r){return Wu.apply(this,arguments)}function Wu(){return Wu=xt(bt().mark((function e(t,n,r,i){var a,o=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Gu(t,a,xt(bt().mark((function e(){var a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Aa(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Vu.fetch()(Yu(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(e,t,n){return Hu.apply(this,arguments)}function Hu(){return Hu=xt(bt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Bu),n),e.prev=2,a=new Ju(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Xu(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Ft(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Xu(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Xu(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Xu(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Au(t,d,h);case 34:Tu(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof xa)){e.next=41;break}throw e.t0;case 41:Tu(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Hu.apply(this,arguments)}function Qu(e,t,n,r){return $u.apply(this,arguments)}function $u(){return $u=xt(bt().mark((function e(t,n,r,i){var a,o,u=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ku(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Tu(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Yu(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ju(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ju=function(){function e(t){var n=this;kn(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Cu(n.auth,"network-request-failed"))}),zu.get())}))}return wn(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Xu(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Cu(e,t,r);return i.customData._tokenResponse=n,i}function Zu(e,t){return es.apply(this,arguments)}function es(){return es=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return ns=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function os(){return os=xt(bt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=La(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ru((a=ss(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:as(us(a.auth_time)),issuedAtTime:as(us(a.iat)),expirationTime:as(us(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function us(e){return 1e3*Number(e)}function ss(e){var t=Ft(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{var a=la(r);return a?JSON.parse(a):(Iu("Failed to decode base64 JWT payload"),null)}catch(o){return Iu("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=xt(bt().mark((function e(t,n){var r=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof xa&&fs(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ls.apply(this,arguments)}function fs(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var hs=function(){function e(t){kn(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return wn(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ds=function(){function e(t,n){kn(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return wn(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=as(this.lastLoginAt),this.creationTime=as(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ps(e){return vs.apply(this,arguments)}function vs(){return vs=xt(bt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,cs(t,rs(r,{idToken:i}));case 6:Ru(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=fu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=ys(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ds(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}function ms(){return(ms=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=La(t),e.next=3,ps(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ys(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Pr(n),Pr(t))}function gs(e,t){return ks.apply(this,arguments)}function ks(){return ks=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gu(t,{},xt(bt().mark((function e(){var r,i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Aa({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Yu(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Vu.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}var bs=function(){function e(){kn(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return wn(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ru(e.idToken,"internal-error"),Ru("undefined"!==typeof e.idToken,"internal-error"),Ru("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ss(e);return Ru(t,"internal-error"),Ru("undefined"!==typeof t.exp,"internal-error"),Ru("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=xt(bt().mark((function e(t){var n,r=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ru(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gs(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Pu("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ru("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ru("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ru("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ws(e,t){Ru("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var xs=function(){function e(t){kn(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=fu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Pr(a.providerData):[],this.metadata=new ds(a.createdAt||void 0,a.lastLoginAt||void 0)}return wn(e,[{key:"getIdToken",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cs(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ru(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return os.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ms.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ru(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Ru(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=xt(bt().mark((function e(t){var n,r,i=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ps(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,cs(this,Zu(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Ru(k&&_,t,"internal-error");var E=bs.fromJSON(this.name,_);Ru("string"===typeof k,t,"internal-error"),ws(f,t.name),ws(h,t.name),Ru("boolean"===typeof b,t,"internal-error"),Ru("boolean"===typeof w,t,"internal-error"),ws(d,t.name),ws(p,t.name),ws(v,t.name),ws(m,t.name),ws(y,t.name),ws(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=xt(bt().mark((function t(n,r){var i,a,o,u=arguments;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new bs).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ps(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),_s=new Map;function Es(e){Du(e instanceof Function,"Expected a class definition");var t=_s.get(e);return t?(Du(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_s.set(e,t),t)}var Ss=function(){function e(){kn(this,e),this.type="NONE",this.storage={}}return wn(e,[{key:"_isAvailable",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ss.type="NONE";var Is=Ss;function Ts(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Cs=function(){function e(t,n,r){kn(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ts(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ts("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return wn(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?xs._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=xt(bt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Es(Is),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Es(Is),u=Ts(i,n.config.apiKey,n.name),s=null,c=qr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=xs._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function As(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ps(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ns(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ls(t))return"Blackberry";if(Ms(t))return"Webos";if(Os(t))return"Safari";if((t.includes("chrome/")||Rs(t))&&!t.includes("edge/"))return"Chrome";if(Ds(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/firefox\//i.test(e)}function Os(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/crios\//i.test(e)}function Ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/iemobile/i.test(e)}function Ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/android/i.test(e)}function Ls(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/blackberry/i.test(e)}function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/webos/i.test(e)}function Fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return Fs(e)||Ds(e)||Ms(e)||Ls(e)||/windows phone/i.test(e)||Ps(e)}function js(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=As(ma());break;case"Worker":t="".concat(As(ma()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Oo,"/").concat(r)}function Vs(e){return Bs.apply(this,arguments)}function Bs(){return Bs=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ku(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}function zs(e,t){return qs.apply(this,arguments)}function qs(){return qs=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"GET","/v2/recaptchaConfig",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}function Ks(e){return void 0!==e&&void 0!==e.getResponse}function Ws(e){return void 0!==e&&void 0!==e.enterprise}var Gs=wn((function e(t){if(kn(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Hs(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Cu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Qs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var $s=function(){function e(t){kn(this,e),this.type="recaptcha-enterprise",this.auth=ec(t)}return wn(e,[{key:"verify",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Ws(i)?i.enterprise.ready((function(){try{i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(e){r(e)}))}catch(a){r(a)}})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=xt(bt().mark((function e(n,r){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zs(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Gs(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Ws(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Hs("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ys(e,t,n){return Js.apply(this,arguments)}function Js(){return Js=xt(bt().mark((function e(t,n,r){var i,a,o,u,s=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new $s(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Js.apply(this,arguments)}var Xs=function(){function e(t){kn(this,e),this.auth=t,this.queue=[]}return wn(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=xt(bt().mark((function e(t){var n,r,i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=qr(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=qr(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(K){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zs=function(){function e(t,n,r,i){kn(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tc(this),this.idTokenSubscription=new tc(this),this.beforeStateQueue=new Xs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return wn(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(xt(bt().mark((function r(){var i,a;return bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Cs.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=xt(bt().mark((function e(t){var n,r,i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Ru(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ps(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?La(t):null)&&Ru(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=xt(bt().mark((function e(t){var n,r=this,i=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Ru(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(xt(bt().mark((function n(){return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Es(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=xt(bt().mark((function e(){var t,n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zs(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Gs(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new $s(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new _a("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ru(n=t&&Es(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Cs.create(this,[Es(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=xt(bt().mark((function e(t){var n=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ru(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ru(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=js(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ae({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=xt(bt().mark((function e(){var t,n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Su("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ec(e){return La(e)}var tc=function(){function e(t){var n=this;kn(this,e),this.auth=t,this.observer=null,this.addObserver=Ra((function(e){return n.observer=e}))}return wn(e,[{key:"next",get:function(){return Ru(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function nc(e,t,n){var r=ec(e);Ru(r._canInitEmulator,r,"emulator-config-failed"),Ru(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=rc(t),o=function(e){var t=rc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ic(r.substr(a.length+1))}}var o=Ft(r.split(":"),2);return{host:o[0],port:ic(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function rc(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ic(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ac=function(){function e(t,n){kn(this,e),this.providerId=t,this.signInMethod=n}return wn(e,[{key:"toJSON",value:function(){return Pu("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Pu("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Pu("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Pu("not implemented")}}]),e}();function oc(e,t){return uc.apply(this,arguments)}function uc(){return uc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:resetPassword",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(e,t){return cc.apply(this,arguments)}function cc(){return cc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}function lc(e,t){return fc.apply(this,arguments)}function fc(){return fc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:update",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}function hc(e,t){return dc.apply(this,arguments)}function dc(){return dc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithPassword",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e,t){return vc.apply(this,arguments)}function vc(){return vc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:sendOobCode",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function mc(e,t){return yc.apply(this,arguments)}function yc(){return yc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return kc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}function bc(e,t){return wc.apply(this,arguments)}function wc(){return wc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),wc.apply(this,arguments)}function xc(e,t){return _c.apply(this,arguments)}function _c(){return _c=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function Ec(e,t){return Sc.apply(this,arguments)}function Sc(){return Sc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithEmailLink",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Ic(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithEmailLink",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}var Cc=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return kn(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return wn(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Ys(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",hc(t,i));case 11:return e.abrupt("return",hc(t,r).catch(function(){var e=xt(bt().mark((function e(n){var i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ys(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",hc(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Ec(t,{email:this._email,oobCode:this._password}));case 13:Tu(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",sc(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ic(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Tu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ac);function Ac(e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithIdp",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}var Oc=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return wn(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ac(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ac(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ac(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Aa(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tu("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=fu(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ac);function Rc(e,t){return Pc.apply(this,arguments)}function Pc(){return Pc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:sendVerificationCode",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pc.apply(this,arguments)}function Dc(){return Dc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithPhoneNumber",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dc.apply(this,arguments)}function Lc(){return Lc=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qu(t,"POST","/v1/accounts:signInWithPhoneNumber",qu(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Xu(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}var Mc=Ae({},"USER_NOT_FOUND","user-not-found");function Fc(){return Fc=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithPhoneNumber",qu(t,r),Mc));case 2:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}var Uc=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this,"phone","phone")).params=e,r}return wn(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Dc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Lc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Fc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ac);var jc=function(){function e(t){var n,r,i,a,o,u;kn(this,e);var s=Na(Oa(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Ru(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return wn(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Na(Oa(e)).link,n=t?Na(Oa(t)).deep_link_id:null,r=Na(Oa(e)).deep_link_id;return(r?Na(Oa(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(ZC){return null}}}]),e}();var Vc=function(){function e(){kn(this,e),this.providerId=e.PROVIDER_ID}return wn(e,null,[{key:"credential",value:function(e,t){return Cc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=jc.parseLink(t);return Ru(n,"argument-error"),Cc._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Vc.PROVIDER_ID="password",Vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Bc=function(){function e(t){kn(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return wn(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),zc=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.apply(this,arguments)).scopes=[],e}return wn(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Pr(this.scopes)}}]),n}(Bc),qc=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ru(e.idToken||e.accessToken,"argument-error"),Oc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ru("providerId"in t&&"signInMethod"in t,"argument-error"),Oc._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(zc),Kc=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.call(this,"facebook.com")}return wn(n,null,[{key:"credential",value:function(e){return Oc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(ZC){return null}}}]),n}(zc);Kc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Kc.PROVIDER_ID="facebook.com";var Wc=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return wn(n,null,[{key:"credential",value:function(e,t){return Oc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(ZC){return null}}}]),n}(zc);Wc.GOOGLE_SIGN_IN_METHOD="google.com",Wc.PROVIDER_ID="google.com";var Gc=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.call(this,"github.com")}return wn(n,null,[{key:"credential",value:function(e){return Oc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(ZC){return null}}}]),n}(zc);Gc.GITHUB_SIGN_IN_METHOD="github.com",Gc.PROVIDER_ID="github.com";var Hc=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return wn(n,[{key:"_getIdTokenResponse",value:function(e){return Ac(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ac(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ac(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ac),Qc=function(e){Lr(n,e);var t=jr(n);function n(e){return kn(this,n),Ru(e.startsWith("saml."),"argument-error"),t.call(this,e)}return wn(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Hc.fromJSON(e);return Ru(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Hc._create(r,n)}catch(i){return null}}}]),n}(Bc),$c=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.call(this,"twitter.com")}return wn(n,null,[{key:"credential",value:function(e,t){return Oc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(ZC){return null}}}]),n}(zc);function Yc(e,t){return Jc.apply(this,arguments)}function Jc(){return Jc=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signUp",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}$c.TWITTER_SIGN_IN_METHOD="twitter.com",$c.PROVIDER_ID="twitter.com";var Xc=function(){function e(t){kn(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return wn(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=xt(bt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,xs._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Zc(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=xt(bt().mark((function t(n,r,i){var a;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Zc(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Zc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function el(){return el=xt(bt().mark((function e(t){var n,r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ec(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Xc({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Yc(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Xc._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),el.apply(this,arguments)}var tl=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a){var o,u;return kn(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Ur(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return wn(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(xa);function nl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw tl._fromErrorAndOperation(e,n,t,r);throw n}))}function rl(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function il(e,t){return al.apply(this,arguments)}function al(){return al=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=La(t),e.next=3,sl(!0,r,n);case 3:return e.t0=ts,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=rl(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),al.apply(this,arguments)}function ol(e,t){return ul.apply(this,arguments)}function ul(){return ul=xt(bt().mark((function e(t,n){var r,i,a=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=cs,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Xc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function sl(e,t,n){return cl.apply(this,arguments)}function cl(){return(cl=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ps(n);case 2:i=rl(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ru(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(e,t){return fl.apply(this,arguments)}function fl(){return fl=xt(bt().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,cs(t,nl(i,a,n,t),r);case 6:return Ru((o=e.sent).idToken,i,"internal-error"),Ru(u=ss(o.idToken),i,"internal-error"),s=u.sub,Ru(t.uid===s,i,"user-mismatch"),e.abrupt("return",Xc._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Tu(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),fl.apply(this,arguments)}function hl(e,t){return dl.apply(this,arguments)}function dl(){return dl=xt(bt().mark((function e(t,n){var r,i,a,o,u=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,nl(t,i,n);case 4:return a=e.sent,e.next=7,Xc._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}function pl(e,t){return vl.apply(this,arguments)}function vl(){return vl=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hl(ec(t),n));case 1:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function ml(e,t){return yl.apply(this,arguments)}function yl(){return(yl=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=La(t),e.next=3,sl(!1,r,n.providerId);case 3:return e.abrupt("return",ol(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gl(e,t){return kl.apply(this,arguments)}function kl(){return(kl=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ll(La(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bl(e,t){return wl.apply(this,arguments)}function wl(){return wl=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t,"POST","/v1/accounts:signInWithCustomToken",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),wl.apply(this,arguments)}function xl(){return xl=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ec(t),e.next=3,bl(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Xc._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),xl.apply(this,arguments)}var _l=function(){function e(t,n){kn(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return wn(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?El._fromServerResponse(e,t):"totpInfo"in t?Sl._fromServerResponse(e,t):Tu(e,"internal-error")}}]),e}(),El=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return wn(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_l),Sl=function(e){Lr(n,e);var t=jr(n);function n(e){return kn(this,n),t.call(this,"totp",e)}return wn(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_l);function Il(e,t,n){var r;Ru((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ru("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ru(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ru(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Tl(){return Tl=xt(bt().mark((function e(t,n,r){var i,a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ec(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Ys(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&Il(a,u,r),e.next=9,gc(a,u);case 9:e.next=14;break;case 11:return r&&Il(a,o,r),e.next=14,gc(a,o).catch(function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Ys(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Il(a,n,r),e.next=8,gc(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Tl.apply(this,arguments)}function Cl(){return Cl=xt(bt().mark((function e(t,n,r){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oc(La(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Al(){return Al=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc(La(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Nl(e,t){return Ol.apply(this,arguments)}function Ol(){return Ol=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=La(t),e.next=3,oc(r,{oobCode:n});case 3:i=e.sent,Ru(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ru(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ru(i.mfaInfo,r,"internal-error");case 13:Ru(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=_l._fromServerResponse(ec(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ol.apply(this,arguments)}function Rl(){return Rl=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nl(La(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Rl.apply(this,arguments)}function Pl(e,t,n){return Dl.apply(this,arguments)}function Dl(){return Dl=xt(bt().mark((function e(t,n,r){var i,a,o,u,s,c,l;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ec(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Ys(a,o,"signUpPassword");case 5:s=e.sent,u=Yc(a,s),e.next=10;break;case 9:u=Yc(a,o).catch(function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Ys(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Yc(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Xc._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Dl.apply(this,arguments)}function Ll(){return Ll=xt(bt().mark((function e(t,n,r){var i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Ru(t.handleCodeInApp,a,"argument-error"),t&&Il(a,e,t)},a=ec(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Ys(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,bc(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,bc(a,o).catch(function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ys(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,bc(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Ll.apply(this,arguments)}function Ml(){return Ml=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=La(t),Ru((a=Vc.credentialWithLink(n,r||Lu()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",pl(i,a));case 4:case"end":return e.stop()}}),e)}))),Ml.apply(this,arguments)}function Fl(e,t){return Ul.apply(this,arguments)}function Ul(){return Ul=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:createAuthUri",qu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}function jl(){return jl=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mu()?Lu():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Fl(La(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}function Vl(){return(Vl=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=La(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Il(r.auth,a,n),e.next=8,mc(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bl(){return(Bl=xt(bt().mark((function e(t,n,r){var i,a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=La(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Il(i.auth,o,r),e.next=8,xc(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zl(e,t){return ql.apply(this,arguments)}function ql(){return ql=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ku(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}function Kl(){return(Kl=xt(bt().mark((function e(t,n){var r,i,a,o,u,s,c;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=La(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,cs(a,zl(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wl(e,t,n){return Gl.apply(this,arguments)}function Gl(){return Gl=xt(bt().mark((function e(t,n,r){var i,a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,cs(t,sc(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}var Hl=wn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kn(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ql=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a){var o;return kn(this,n),(o=t.call(this,e,r,i)).username=a,o}return wn(n)}(Hl),$l=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"facebook.com",r)}return wn(n)}(Hl),Yl=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return wn(n)}(Ql),Jl=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"google.com",r)}return wn(n)}(Hl),Xl=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){return kn(this,n),t.call(this,e,"twitter.com",r,i)}return wn(n)}(Ql);function Zl(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ss(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Hl(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new $l(a,i);case"github.com":return new Yl(a,i);case"google.com":return new Jl(a,i);case"twitter.com":return new Xl(a,i,e.screenName||null);case"custom":case"anonymous":return new Hl(a,null);default:return new Hl(a,r,i)}}(n)}var ef=function(){function e(t,n,r){kn(this,e),this.type=t,this.credential=n,this.auth=r}return wn(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ae({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),tf=function(){function e(t,n,r){kn(this,e),this.session=t,this.hints=n,this.signInResolver=r}return wn(e,[{key:"resolveSignIn",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ec(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return _l._fromServerResponse(r,e)}));Ru(i.mfaPendingCredential,r,"internal-error");var o=ef._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=xt(bt().mark((function e(t){var a,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Xc._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Ru(n.user,r,"internal-error"),e.abrupt("return",Xc._forOperation(n.user,n.operationType,u));case 17:Tu(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function nf(e,t){return Ku(e,"POST","/v2/accounts/mfaEnrollment:start",qu(e,t))}function rf(e,t){return Ku(e,"POST","/v2/accounts/mfaEnrollment:start",qu(e,t))}function af(e,t){return Ku(e,"POST","/v2/accounts/mfaEnrollment:finalize",qu(e,t))}function of(e,t){return Ku(e,"POST","/v2/accounts/mfaEnrollment:withdraw",qu(e,t))}var uf=function(){function e(t){var n=this;kn(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return _l._fromServerResponse(t.auth,e)})))}))}return wn(e,[{key:"getSession",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ef,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,cs(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,cs(this.user,of(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),sf=new WeakMap;var cf="__sak",lf=function(){function e(t,n){kn(this,e),this.storageRetriever=t,this.type=n}return wn(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch(ZC){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ff=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ma();return Os(e)||Fs(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Us(),e._shouldAllowMigration=!0,e}return wn(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ba()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=xt(bt().mark((function e(t,r){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(Mr(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=xt(bt().mark((function e(t){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(Mr(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(Mr(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(lf);ff.type="LOCAL";var hf=ff,df=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return wn(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(lf);df.type="SESSION";var pf=df;function vf(e){return Promise.all(e.map(function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var mf=function(){function e(t){kn(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return wn(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=xt(bt().mark((function e(t){var n,r,i,a,o,u,s,c;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,vf(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function yf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}mf.receivers=[];var gf=function(){function e(t){kn(this,e),this.target=t,this.handlers=new Set}return wn(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=xt(bt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=yf("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function kf(){return window}function bf(e){kf().location.href=e}function wf(){return"undefined"!==typeof kf().WorkerGlobalScope&&"function"===typeof kf().importScripts}function xf(){return _f.apply(this,arguments)}function _f(){return(_f=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ef(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Sf="firebaseLocalStorageDb",If="firebaseLocalStorage",Tf="fbase_key",Cf=function(){function e(t){kn(this,e),this.request=t}return wn(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Af(e,t){return e.transaction([If],t?"readwrite":"readonly").objectStore(If)}function Nf(){var e=indexedDB.deleteDatabase(Sf);return new Cf(e).toPromise()}function Of(){var e=indexedDB.open(Sf,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(If,{keyPath:Tf})}catch(r){n(r)}})),e.addEventListener("success",xt(bt().mark((function n(){var r;return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(If)){n.next=12;break}return r.close(),n.next=5,Nf();case 5:return n.t0=t,n.next=8,Of();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Rf(e,t,n){return Pf.apply(this,arguments)}function Pf(){return Pf=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Af(t,!0).put((Ae(i={},Tf,n),Ae(i,"value",r),i)),e.abrupt("return",new Cf(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Pf.apply(this,arguments)}function Df(e,t){return Lf.apply(this,arguments)}function Lf(){return Lf=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Af(t,!1).get(n),e.next=3,new Cf(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Lf.apply(this,arguments)}function Mf(e,t){var n=Af(e,!0).delete(t);return new Cf(n).toPromise()}var Ff=function(){function e(){kn(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return wn(e,[{key:"_openDb",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Of();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wf()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=xt(bt().mark((function e(){var t=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=mf._getInstance(wf()?self:null),this.receiver._subscribe("keyChanged",function(){var e=xt(bt().mark((function e(n,r){var i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=xt(bt().mark((function e(){var t,n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xf();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new gf(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ef()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Of();case 5:return t=e.sent,e.next=8,Rf(t,cf,"1");case 8:return e.next=10,Mf(t,cf);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=xt(bt().mark((function e(t,n){var r=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Rf(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Df(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=xt(bt().mark((function e(t){var n=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Mf(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Af(e,!1).getAll();return new Cf(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=qr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ff.type="LOCAL";var Uf=Ff;function jf(e,t){return Ku(e,"POST","/v2/accounts/mfaSignIn:start",qu(e,t))}function Vf(e,t){return Ku(e,"POST","/v2/accounts/mfaSignIn:finalize",qu(e,t))}var Bf=1e12,zf=function(){function e(t){kn(this,e),this.auth=t,this.counter=Bf,this._widgets=new Map}return wn(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new qf(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Bf;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Bf;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Bf,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qf=function(){function e(t,n,r){var i=this;kn(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ru(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return wn(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Kf=Qs("rcb"),Wf=new Uu(3e4,6e4),Gf=function(){function e(){var t;kn(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=kf().grecaptcha)||void 0===t?void 0:t.render)}return wn(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ru(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Ks(kf().grecaptcha)?Promise.resolve(kf().grecaptcha):new Promise((function(r,i){var a=kf().setTimeout((function(){i(Cu(e,"network-request-failed"))}),Wf.get());kf()[Kf]=function(){kf().clearTimeout(a),delete kf()[Kf];var o=kf().grecaptcha;if(o&&Ks(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Cu(e,"internal-error"))},Hs("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Aa({onload:Kf,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Cu(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=kf().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Hf=function(){function e(){kn(this,e)}return wn(e,[{key:"load",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new zf(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Qf="recaptcha",$f={theme:"light",type:"image"},Yf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},$f),r=arguments.length>2?arguments[2]:void 0;kn(this,e),this.parameters=n,this.type=Qf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ec(r),this.isInvisible="invisible"===this.parameters.size,Ru("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ru(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hf:new Gf,this.validateStartingState()}return wn(e,[{key:"verify",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ru(!this.parameters.sitekey,this.auth,"argument-error"),Ru(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ru("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=kf()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ru(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=xt(bt().mark((function e(){var t,n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ru(Mu()&&!wf(),this.auth,"internal-error"),e.next=3,Jf();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Vs(this.auth);case 8:Ru(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ru(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Jf(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Xf=function(){function e(t,n){kn(this,e),this.verificationId=t,this.onConfirmation=n}return wn(e,[{key:"confirm",value:function(e){var t=Uc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Zf(){return Zf=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),e.next=3,rh(i,n,La(r));case 3:return a=e.sent,e.abrupt("return",new Xf(a,(function(e){return pl(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Zf.apply(this,arguments)}function eh(e,t,n){return th.apply(this,arguments)}function th(){return(th=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=La(t),e.next=3,sl(!1,i,"phone");case 3:return e.next=5,rh(i.auth,n,La(r));case 5:return a=e.sent,e.abrupt("return",new Xf(a,(function(e){return ml(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nh(){return(nh=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=La(t),e.next=3,rh(i.auth,n,La(r));case 3:return a=e.sent,e.abrupt("return",new Xf(a,(function(e){return gl(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rh(e,t,n){return ih.apply(this,arguments)}function ih(){return ih=xt(bt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ru("string"===typeof a,t,"argument-error"),Ru(r.type===Qf,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Ru("enroll"===u.type,t,"internal-error"),e.next=13,nf(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Ru("signin"===u.type,t,"internal-error"),Ru(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,jf(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Rc(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ih.apply(this,arguments)}function ah(){return(ah=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(La(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oh=function(){function e(t){kn(this,e),this.providerId=e.PROVIDER_ID,this.auth=ec(t)}return wn(e,[{key:"verifyPhoneNumber",value:function(e,t){return rh(this.auth,e,La(t))}}],[{key:"credential",value:function(e,t){return Uc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Uc._fromTokenResponse(n,r):null}}]),e}();function uh(e,t){return t?Es(t):(Ru(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}oh.PROVIDER_ID="phone",oh.PHONE_SIGN_IN_METHOD="phone";var sh=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this,"custom","custom")).params=e,r}return wn(n,[{key:"_getIdTokenResponse",value:function(e){return Ac(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ac(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ac(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ac);function ch(e){return hl(e.auth,new sh(e),e.bypassAuthState)}function lh(e){var t=e.auth,n=e.user;return Ru(n,t,"internal-error"),ll(n,new sh(e),e.bypassAuthState)}function fh(e){return hh.apply(this,arguments)}function hh(){return hh=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ru(r=t.user,n,"internal-error"),e.abrupt("return",ol(r,new sh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),hh.apply(this,arguments)}var dh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];kn(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return wn(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=xt(bt().mark((function t(n,r){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=xt(bt().mark((function e(t){var n,r,i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ch;case"linkViaPopup":case"linkViaRedirect":return fh;case"reauthViaPopup":case"reauthViaRedirect":return lh;default:Tu(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Du(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Du(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ph=new Uu(2e3,1e4);function vh(e,t,n){return mh.apply(this,arguments)}function mh(){return mh=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),Nu(t,n,Bc),a=uh(i,r),o=new bh(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function yh(){return(yh=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nu((i=La(t)).auth,n,Bc),a=uh(i.auth,r),o=new bh(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gh(e,t,n){return kh.apply(this,arguments)}function kh(){return(kh=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nu((i=La(t)).auth,n,Bc),a=uh(i.auth,r),o=new bh(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bh=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a,o){var u;return kn(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Ur(u),u}return wn(n,[{key:"executeNotNull",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ru(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=xt(bt().mark((function e(){var t,n=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Du(1===this.filter.length,"Popup operations only handle one event"),t=yf(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Cu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Cu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Cu(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ph.get())}()}}]),n}(dh);bh.currentPopupAction=null;var wh="pendingRedirect",xh=new Map,_h=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return kn(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return wn(n,[{key:"execute",value:function(){var e=xt(bt().mark((function e(){var t,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xh.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Eh(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,lu(Mr(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:xh.set(this.auth._key(),t);case 21:return this.bypassAuthState||xh.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=xt(bt().mark((function e(t){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",lu(Mr(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",lu(Mr(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(dh);function Eh(e,t){return Sh.apply(this,arguments)}function Sh(){return Sh=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nh(n),i=Ah(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Ih(e,t){return Th.apply(this,arguments)}function Th(){return Th=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ah(t)._set(Nh(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}function Ch(e,t){xh.set(e._key(),t)}function Ah(e){return Es(e._redirectPersistence)}function Nh(e){return Ts(wh,e.config.apiKey,e.name)}function Oh(e,t,n){return function(e,t,n){return Rh.apply(this,arguments)}(e,t,n)}function Rh(){return Rh=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),Nu(t,n,Bc),e.next=4,i._initializationPromise;case 4:return a=uh(i,r),e.next=7,Ih(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}function Ph(e,t,n){return function(e,t,n){return Dh.apply(this,arguments)}(e,t,n)}function Dh(){return(Dh=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nu((i=La(t)).auth,n,Bc),e.next=4,i.auth._initializationPromise;case 4:return a=uh(i.auth,r),e.next=7,Ih(a,i.auth);case 7:return e.next=9,Bh(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lh(e,t,n){return function(e,t,n){return Mh.apply(this,arguments)}(e,t,n)}function Mh(){return(Mh=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nu((i=La(t)).auth,n,Bc),e.next=4,i.auth._initializationPromise;case 4:return a=uh(i.auth,r),e.next=7,sl(!1,i,n.providerId);case 7:return e.next=9,Ih(a,i.auth);case 9:return e.next=11,Bh(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fh(e,t){return Uh.apply(this,arguments)}function Uh(){return Uh=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(t)._initializationPromise;case 2:return e.abrupt("return",jh(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Uh.apply(this,arguments)}function jh(e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=xt(bt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ec(t),a=uh(i,n),o=new _h(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Vh.apply(this,arguments)}function Bh(e){return zh.apply(this,arguments)}function zh(){return(zh=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yf("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qh=function(){function e(t){kn(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return wn(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Wh(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Cu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kh(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Kh(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Kh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Wh(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Gh(e){return Hh.apply(this,arguments)}function Hh(){return Hh=xt(bt().mark((function e(t){var n,r=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ku(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Hh.apply(this,arguments)}var Qh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$h=/^https?/;function Yh(){return Yh=xt(bt().mark((function e(t){var n,r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Gh(t);case 4:n=e.sent,r=n.authorizedDomains,i=qr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Jh(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Tu(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Yh.apply(this,arguments)}function Jh(e){var t=Lu(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!$h.test(r))return!1;if(Qh.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Xh=new Uu(3e4,6e4);function Zh(){var e=kf().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Pr(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ed=null;function td(e){return ed=ed||function(e){return new Promise((function(t,n){var r,i,a;function o(){Zh(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Zh(),n(Cu(e,"network-request-failed"))},timeout:Xh.get()})}if(null===(i=null===(r=kf().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=kf().gapi)||void 0===a?void 0:a.load)){var u=Qs("iframefcb");return kf()[u]=function(){gapi.load?o():n(Cu(e,"network-request-failed"))},Hs("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ed=null,e}))}(e),ed}var nd=new Uu(5e3,15e3),rd="__/auth/iframe",id="emulator/auth/iframe",ad={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},od=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ud(e){var t=e.config;Ru(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ju(t,id):"https://".concat(e.config.authDomain,"/").concat(rd),r={apiKey:t.apiKey,appName:e.name,v:Oo},i=od.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Aa(r).slice(1))}function sd(e){return cd.apply(this,arguments)}function cd(){return cd=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,td(t);case 2:return n=e.sent,Ru(r=kf().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ud(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ad,dontclear:!0},(function(e){return new Promise(function(){var n=xt(bt().mark((function n(r,i){var a,o,u;return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){kf().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Cu(t,"network-request-failed"),o=kf().setTimeout((function(){i(a)}),nd.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),cd.apply(this,arguments)}var ld={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fd=function(){function e(t){kn(this,e),this.window=t,this.associatedEvent=null}return wn(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function hd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ld),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ma().toLowerCase();n&&(u=Rs(c)?"_blank":n),Ns(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Ft(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Fs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new fd(null);var f=window.open(t||"",u,l);Ru(f,e,"popup-blocked");try{f.focus()}catch(h){}return new fd(f)}var dd="__/auth/handler",pd="emulator/auth/handler",vd=encodeURIComponent("fac");function md(e,t,n,r,i,a){return yd.apply(this,arguments)}function yd(){return yd=xt(bt().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,k;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ru(t.config.authDomain,t,"auth-domain-config-required"),Ru(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Oo,eventId:a},n instanceof Bc)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Ia(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=Ft(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof zc&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(vd,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(gd(t),"?").concat(Aa(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),yd.apply(this,arguments)}function gd(e){var t=e.config;return t.emulator?ju(t,pd):"https://".concat(t.authDomain,"/").concat(dd)}var kd="webStorageSupport",bd=function(){function e(){kn(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pf,this._completeRedirectFn=jh,this._overrideRedirectResult=Ch}return wn(e,[{key:"_openPopup",value:function(){var e=xt(bt().mark((function e(t,n,r,i){var a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Du(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,md(t,n,r,Lu(),i);case 3:return o=e.sent,e.abrupt("return",hd(t,o,yf()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=xt(bt().mark((function e(t,n,r,i){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,md(t,n,r,Lu(),i);case 4:return bf(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Du(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sd(t);case 2:return n=e.sent,r=new qh(t),n.register("authEvent",(function(e){return Ru(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(kd,{type:kd},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[kd];void 0!==i&&t(!!i),Tu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Yh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Us()||Os()||Fs()}}]),e}(),wd=bd,xd=function(){function e(t){kn(this,e),this.factorId=t}return wn(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Pu("unexpected MultiFactorSessionType")}}}]),e}(),_d=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this,"phone")).credential=e,r}return wn(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ku(e,"POST","/v2/accounts/mfaEnrollment:finalize",qu(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ku(e,"POST","/v2/accounts/mfaSignIn:finalize",qu(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(xd),Ed=function(){function e(){kn(this,e)}return wn(e,null,[{key:"assertion",value:function(e){return _d._fromCredential(e)}}]),e}();Ed.FACTOR_ID="phone";var Sd=function(){function e(){kn(this,e)}return wn(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Id._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Id._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ru("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,rf(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Td._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Sd.FACTOR_ID="totp";var Id=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return wn(n,[{key:"_finalizeEnroll",value:function(){var e=xt(bt().mark((function e(t,n,r){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ru("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",af(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ru(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Vf(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(xd),Td=function(){function e(t,n,r,i,a,o,u){kn(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return wn(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Cd(e)||Cd(t))&&(r=!0),r&&(Cd(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Cd(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Cd(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Ad="@firebase/auth",Nd="0.23.0",Od=function(){function e(t){kn(this,e),this.auth=t,this.internalListeners=new Map}return wn(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ru(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Rd;!function(e){var t;null===(t=da())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Pd(){return window}Rd="Browser",Eo(new Ma("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Ru(u&&!u.includes(":"),"invalid-api-key",{appName:r.name}),Ru(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Rd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:js(Rd)},l=new Zs(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Es);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Eo(new Ma("auth-internal",(function(e){return function(e){return new Od(e)}(ec(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Fo(Ad,Nd,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Rd)),Fo(Ad,Nd,"esm2017");var Dd=2e3;function Ld(e,t,n){return Md.apply(this,arguments)}function Md(){return Md=xt(bt().mark((function e(t,n,r){var i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pd(),o=a.BuildInfo,Du(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,zd(n.sessionId);case 4:return u=e.sent,s={},Fs()?s.ibi=o.packageName:Ds()?s.apn=o.packageName:Tu(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",md(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}function Fd(){return Fd=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pd(),r=n.BuildInfo,i={},Fs()?i.iosBundleId=r.packageName:Ds()?i.androidPackageName=r.packageName:Tu(t,"operation-not-supported-in-this-environment"),e.next=5,Gh(t,i);case 5:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}function Ud(e){var t=Pd().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function jd(e,t,n){return Vd.apply(this,arguments)}function Vd(){return Vd=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pd(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Cu(t,"redirect-cancelled-by-user"))}),Dd))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ds()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Vd.apply(this,arguments)}function Bd(e){var t,n,r,i,a,o,u,s,c,l,f=Pd();Ru("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ru("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ru("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ru("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ru("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function zd(e){return qd.apply(this,arguments)}function qd(){return(qd=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kd(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kd(e){if(Du(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Wd=20,Gd=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return wn(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),lu(Mr(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qh);function Hd(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Xd(),postBody:null,tenantId:e.tenantId,error:Cu(e,"no-auth-event")}}function Qd(e,t){return Zd()._set(ep(e),t)}function $d(e){return Yd.apply(this,arguments)}function Yd(){return Yd=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zd()._get(ep(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Zd()._remove(ep(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Yd.apply(this,arguments)}function Jd(e,t){var n,r,i=function(e){var t=tp(e),n=t.link?decodeURIComponent(t.link):void 0,r=tp(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return tp(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=tp(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Cu(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Xd(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Wd;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Zd(){return Es(hf)}function ep(e){return Ts("authEvent",e.config.apiKey,e.name)}function tp(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=zr(e.split("?"));t[0];return Na(t.slice(1).join("?"))}var np=function(){function e(){kn(this,e),this._redirectPersistence=pf,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jh,this._overrideRedirectResult=Ch}return wn(e,[{key:"_initialize",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Gd(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Tu(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=xt(bt().mark((function e(t,n,r,i){var a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bd(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),xh.clear(),e.next=10,this._originValidation(t);case 10:return o=Hd(t,r,i),e.next=13,Qd(t,o);case 13:return e.next=15,Ld(t,o,n);case 15:return u=e.sent,e.next=18,Ud(u);case 18:return s=e.sent,e.abrupt("return",jd(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Fd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Pd(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(xt(bt().mark((function n(){return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$d(e);case 2:t.onEvent(ip());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=xt(bt().mark((function n(r){var i,a;return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,$d(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Jd(i,r.url)),t.onEvent(a||ip());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Pd().handleOpenURL=function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),rp=np;function ip(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Cu("no-auth-event")}}var ap=1e3;function op(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function up(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return!("file:"!==op()&&"ionic:"!==op()&&"capacitor:"!==op()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return ba()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma();return/Edge\/\d+/.test(e)}(e)}function cp(){try{var e=self.localStorage,t=yf();if(e)return e.setItem(t,"1"),e.removeItem(t),!sp()||wa()}catch(n){return lp()&&wa()}return!1}function lp(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function fp(){return("http:"===op()||"https:"===op()||ga()||up())&&!(ka()||ya())&&cp()&&!lp()}function hp(){return up()&&"undefined"!==typeof document}function dp(){return pp.apply(this,arguments)}function pp(){return(pp=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hp()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),ap);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vp={LOCAL:"local",NONE:"none",SESSION:"session"},mp=Ru,yp="persistence";function gp(e,t){mp(Object.values(vp).includes(t),e,"invalid-persistence-type"),ka()?mp(t!==vp.SESSION,e,"unsupported-persistence-type"):ya()?mp(t===vp.NONE,e,"unsupported-persistence-type"):lp()?mp(t===vp.NONE||t===vp.LOCAL&&wa(),e,"unsupported-persistence-type"):mp(t===vp.NONE||cp(),e,"unsupported-persistence-type")}function kp(e){return bp.apply(this,arguments)}function bp(){return bp=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=wp(),r=Ts(yp,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}function wp(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var xp=Ru,_p=function(){function e(){kn(this,e),this.browserResolver=Es(wd),this.cordovaResolver=Es(rp),this.underlyingResolver=null,this._redirectPersistence=pf,this._completeRedirectFn=jh,this._overrideRedirectResult=Ch}return wn(e,[{key:"_initialize",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=xt(bt().mark((function e(t,n,r,i){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=xt(bt().mark((function e(t,n,r,i){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return hp()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return xp(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dp();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ep(e){return e.unwrap()}function Sp(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Np(e,function(e,t){var n,r=La(e),i=t;return Ru(t.customData.operationType,r,"argument-error"),Ru(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),tf._fromError(r,i)}(e,t));else if(r){var i=Ip(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ip(e){var t=(e instanceof xa?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof xa)&&"temporaryProof"in t&&"phoneNumber"in t)return oh.credentialFromResult(e);var n,r=t.providerId;if(!r||r===du.PASSWORD)return null;switch(r){case du.GOOGLE:n=Wc;break;case du.FACEBOOK:n=Kc;break;case du.GITHUB:n=Gc;break;case du.TWITTER:n=$c;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Hc._create(r,u):Oc._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new qc(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof xa?n.credentialFromError(e):n.credentialFromResult(e)}function Tp(e,t){return t.catch((function(t){throw t instanceof xa&&Sp(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ip(t)),additionalUserInfo:Zl(e),user:Op.getOrCreate(r)}}))}function Cp(e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Tp(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Ap.apply(this,arguments)}var Np=function(){function e(t,n){kn(this,e),this.resolver=n,this.auth=t.wrapped()}return wn(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Tp(Ep(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Op=function(){function e(t){kn(this,e),this._delegate=t,this.multiFactor=function(e){var t=La(e);return sf.has(t)||sf.set(t,uf._fromUser(t)),sf.get(t)}(t)}return wn(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tp(this.auth,ml(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cp(this.auth,eh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tp(this.auth,gh(this._delegate,t,_p)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kp(ec(this.auth));case 2:return e.abrupt("return",Lh(this._delegate,t,_p));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tp(this.auth,gl(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Cp(this.auth,function(e,t,n){return nh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Tp(this.auth,function(e,t,n){return yh.apply(this,arguments)}(this._delegate,e,_p))}},{key:"reauthenticateWithRedirect",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kp(ec(this.auth));case 2:return e.abrupt("return",Ph(this._delegate,t,_p));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Vl.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Wl(La(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Wl(La(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ah.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Kl.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Bl.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Op.USER_MAP=new WeakMap;var Rp=Ru,Pp=function(){function e(t,n){if(kn(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Rp(r,"invalid-api-key",{appName:t.name}),Rp(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?_p:void 0;this._delegate=n.initialize({options:{persistence:Lp(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(wu),this.linkUnderlyingAuth()}return wn(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Op.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){nc(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Al.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Nl(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Cl.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tp(this._delegate,Pl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return jl.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=jc.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rp(fp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Fh(this._delegate,_p);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Tp(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ec(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Dp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Dp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ll.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Tl.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gp(this._delegate,t),e.t0=t,e.next=e.t0===vp.SESSION?4:e.t0===vp.LOCAL?6:e.t0===vp.NONE?11:13;break;case 4:return n=pf,e.abrupt("break",14);case 6:return e.next=8,Es(Uf)._isAvailable();case 8:return r=e.sent,n=r?Uf:hf,e.abrupt("break",14);case 11:return n=Is,e.abrupt("break",14);case 13:return e.abrupt("return",Tu("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Tp(this._delegate,function(e){return el.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Tp(this._delegate,pl(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Tp(this._delegate,function(e,t){return xl.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Tp(this._delegate,function(e,t,n){return pl(La(e),Vc.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Tp(this._delegate,function(e,t,n){return Ml.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Cp(this._delegate,function(e,t,n){return Zf.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rp(fp(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Tp(this._delegate,vh(this._delegate,t,_p)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rp(fp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,kp(this._delegate);case 3:return e.abrupt("return",Oh(this._delegate,t,_p));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Rl.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Dp(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Op.getOrCreate(e))},error:t,complete:n}}function Lp(e,t){var n=function(e,t){var n=wp();if(!n)return[];var r=Ts(yp,e,t);switch(n.getItem(r)){case vp.NONE:return[Is];case vp.LOCAL:return[Uf,pf];case vp.SESSION:return[pf];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Uf)||n.push(Uf),"undefined"!==typeof window)for(var r=0,i=[hf,pf];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Is)||n.push(Is),n}Pp.Persistence=vp;var Mp=function(){function e(){kn(this,e),this.providerId="phone",this._delegate=new oh(Ep(cu.auth()))}return wn(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return oh.credential(e,t)}}]),e}();Mp.PHONE_SIGN_IN_METHOD=oh.PHONE_SIGN_IN_METHOD,Mp.PROVIDER_ID=oh.PROVIDER_ID;var Fp=Ru,Up=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cu.app();kn(this,e),Fp(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Yf(t,n,i.auth()),this.type=this._delegate.type}return wn(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Ma("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Pp(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pu,PASSWORD_RESET:vu,RECOVER_EMAIL:mu,REVERT_SECOND_FACTOR_ADDITION:yu,VERIFY_AND_CHANGE_EMAIL:gu,VERIFY_EMAIL:ku}},EmailAuthProvider:Vc,FacebookAuthProvider:Kc,GithubAuthProvider:Gc,GoogleAuthProvider:Wc,OAuthProvider:qc,SAMLAuthProvider:Qc,PhoneAuthProvider:Mp,PhoneMultiFactorGenerator:Ed,RecaptchaVerifier:Up,TwitterAuthProvider:$c,Auth:Pp,AuthCredential:ac,Error:xa}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.0")}(cu);var jp,Vp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Bp={},zp=zp||{},qp=Vp||self;function Kp(){}function Wp(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gp(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hp="closure_uid_"+(1e9*Math.random()>>>0),Qp=0;function $p(e,t,n){return e.call.apply(e.bind,arguments)}function Yp(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jp(e,t,n){return(Jp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$p:Yp).apply(null,arguments)}function Xp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Zp(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ev(){this.s=this.s,this.o=this.o}ev.prototype.s=!1,ev.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Hp)&&e[Hp]||(e[Hp]=++Qp)}(this)},ev.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function nv(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function rv(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Wp(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function iv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}iv.prototype.h=function(){this.defaultPrevented=!0};var av=function(){if(!qp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qp.addEventListener("test",Kp,t),qp.removeEventListener("test",Kp,t)}catch(D){}return e}();function ov(e){return/^[\s\xa0]*$/.test(e)}var uv=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function sv(e,t){return e<t?-1:e>t?1:0}function cv(){var e=qp.navigator;return e&&(e=e.userAgent)?e:""}function lv(e){return-1!=cv().indexOf(e)}function fv(e){return fv[" "](e),e}fv[" "]=Kp;var hv,dv=lv("Opera"),pv=lv("Trident")||lv("MSIE"),vv=lv("Edge"),mv=vv||pv,yv=lv("Gecko")&&!(-1!=cv().toLowerCase().indexOf("webkit")&&!lv("Edge"))&&!(lv("Trident")||lv("MSIE"))&&!lv("Edge"),gv=-1!=cv().toLowerCase().indexOf("webkit")&&!lv("Edge");function kv(){var e=qp.document;return e?e.documentMode:void 0}e:{var bv="",wv=function(){var e=cv();return yv?/rv:([^\);]+)(\)|;)/.exec(e):vv?/Edge\/([\d\.]+)/.exec(e):pv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):gv?/WebKit\/(\S+)/.exec(e):dv?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(wv&&(bv=wv?wv[1]:""),pv){var xv=kv();if(null!=xv&&xv>parseFloat(bv)){hv=String(xv);break e}}hv=bv}var _v,Ev={};function Sv(){return function(e){var t=Ev;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=uv(String(hv)).split("."),n=uv("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=sv(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||sv(0==a[2].length,0==o[2].length)||sv(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qp.document&&pv){var Iv=kv();_v=Iv||(parseInt(hv,10)||void 0)}else _v=void 0;var Tv=_v;function Cv(e,t){if(iv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yv){e:{try{fv(t.nodeName);var i=!0;break e}catch(P){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Av[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Cv.X.h.call(this)}}Zp(Cv,iv);var Av={2:"touch",3:"pen",4:"mouse"};Cv.prototype.h=function(){Cv.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Nv="closure_listenable_"+(1e6*Math.random()|0),Ov=0;function Rv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Ov,this.ba=this.ea=!1}function Pv(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Dv(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Lv(e){var t={};for(var n in e)t[n]=e[n];return t}var Mv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fv(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Mv.length;a++)n=Mv[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Uv(e){this.src=e,this.g={},this.h=0}function jv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=tv(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Pv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Vv(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Uv.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Vv(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Rv(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Bv="closure_lm_"+(1e6*Math.random()|0),zv={};function qv(e,t,n,r,i){if(r&&r.once)return Wv(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qv(e,t[a],n,r,i);return null}return n=Xv(n),e&&e[Nv]?e.N(t,n,Gp(r)?!!r.capture:!!r,i):Kv(e,t,n,!1,r,i)}function Kv(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gp(i)?!!i.capture:!!i,u=Yv(e);if(u||(e[Bv]=u=new Uv(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=$v;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)av||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wv(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wv(e,t[a],n,r,i);return null}return n=Xv(n),e&&e[Nv]?e.O(t,n,Gp(r)?!!r.capture:!!r,i):Kv(e,t,n,!0,r,i)}function Gv(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Gv(e,t[a],n,r,i);else r=Gp(r)?!!r.capture:!!r,n=Xv(n),e&&e[Nv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Vv(a=e.g[t],n,r,i))&&(Pv(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Vv(t,n,r,i)),(n=-1<e?t[e]:null)&&Hv(n))}function Hv(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Nv])jv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yv(t))?(jv(n,e),0==n.h&&(n.src=null,t[Bv]=null)):Pv(e)}}}function Qv(e){return e in zv?zv[e]:zv[e]="on"+e}function $v(e,t){if(e.ba)e=!0;else{t=new Cv(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Hv(e),e=n.call(r,t)}return e}function Yv(e){return(e=e[Bv])instanceof Uv?e:null}var Jv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xv(e){return"function"===typeof e?e:(e[Jv]||(e[Jv]=function(t){return e.handleEvent(t)}),e[Jv])}function Zv(){ev.call(this),this.i=new Uv(this),this.P=this,this.I=null}function em(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new iv(t,e);else if(t instanceof iv)t.target=t.target||e;else{var i=t;Fv(t=new iv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=tm(o,r,!0,t)&&i}if(i=tm(o=t.g=e,r,!0,t)&&i,i=tm(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=tm(o=t.g=n[a],r,!1,t)&&i}function tm(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&jv(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Zp(Zv,ev),Zv.prototype[Nv]=!0,Zv.prototype.removeEventListener=function(e,t,n,r){Gv(this,e,t,n,r)},Zv.prototype.M=function(){if(Zv.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pv(n[r]);delete t.g[e],t.h--}}this.I=null},Zv.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zv.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var nm=qp.JSON.stringify;function rm(){var e=fm,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var im,am=function(){function e(){kn(this,e),this.h=this.g=null}return wn(e,[{key:"add",value:function(e,t){var n=om.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),om=new(function(){function e(t,n){kn(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return wn(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new um}),(function(e){return e.reset()})),um=function(){function e(){kn(this,e),this.next=this.g=this.h=null}return wn(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function sm(e){qp.setTimeout((function(){throw e}),0)}function cm(e,t){im||function(){var e=qp.Promise.resolve(void 0);im=function(){e.then(hm)}}(),lm||(im(),lm=!0),fm.add(e,t)}var lm=!1,fm=new am;function hm(){for(var e;e=rm();){try{e.h.call(e.g)}catch(D){sm(D)}var t=om;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}lm=!1}function dm(e,t){Zv.call(this),this.h=e||1,this.g=t||qp,this.j=Jp(this.lb,this),this.l=Date.now()}function pm(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function vm(e,t,n){if("function"===typeof e)n&&(e=Jp(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jp(e.handleEvent,e)}return 2147483647<Number(t)?-1:qp.setTimeout(e,t||0)}function mm(e){e.g=vm((function(){e.g=null,e.i&&(e.i=!1,mm(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Zp(dm,Zv),(jp=dm.prototype).ca=!1,jp.R=null,jp.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),em(this,"tick"),this.ca&&(pm(this),this.start()))}},jp.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jp.M=function(){dm.X.M.call(this),pm(this),delete this.g};var ym=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return wn(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:mm(this)}},{key:"M",value:function(){lu(Mr(n.prototype),"M",this).call(this),this.g&&(qp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ev);function gm(e){ev.call(this),this.h=e,this.g={}}Zp(gm,ev);var km=[];function bm(e,t,n,r){Array.isArray(n)||(n&&(km[0]=n.toString()),n=km);for(var i=0;i<n.length;i++){var a=qv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wm(e){Dv(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hv(e)}),e),e.g={}}function xm(){this.g=!0}function _m(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return nm(n)}catch(I){return t}}(e,n)+(r?" "+r:"")}))}gm.prototype.M=function(){gm.X.M.call(this),wm(this)},gm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xm.prototype.Aa=function(){this.g=!1},xm.prototype.info=function(){};var Em={},Sm=null;function Im(){return Sm=Sm||new Zv}function Tm(e){iv.call(this,Em.Pa,e)}function Cm(e){var t=Im();em(t,new Tm(t))}function Am(e,t){iv.call(this,Em.STAT_EVENT,e),this.stat=t}function Nm(e){var t=Im();em(t,new Am(t,e))}function Om(e,t){iv.call(this,Em.Qa,e),this.size=t}function Rm(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qp.setTimeout((function(){e()}),t)}Em.Pa="serverreachability",Zp(Tm,iv),Em.STAT_EVENT="statevent",Zp(Am,iv),Em.Qa="timingevent",Zp(Om,iv);var Pm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dm={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Lm(){}function Mm(e){return e.h||(e.h=e.i())}function Fm(){}Lm.prototype.h=null;var Um,jm={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Vm(){iv.call(this,"d")}function Bm(){iv.call(this,"c")}function zm(){}function qm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new gm(this),this.O=Wm,e=mv?125:void 0,this.T=new dm(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Km}function Km(){this.i=null,this.g="",this.h=!1}Zp(Vm,iv),Zp(Bm,iv),Zp(zm,Lm),zm.prototype.g=function(){return new XMLHttpRequest},zm.prototype.i=function(){return{}},Um=new zm;var Wm=45e3,Gm={},Hm={};function Qm(e,t,n){e.K=1,e.v=dy(sy(t)),e.s=n,e.P=!0,$m(e,null)}function $m(e,t){e.F=Date.now(),Zm(e),e.A=sy(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Iy(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Km,e.g=Ig(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ym(Jp(e.La,e,e.g),e.N)),bm(e.S,e.g,"readystatechange",e.ib),t=e.H?Lv(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Cm(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Ym(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Jm(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xm(e,n))==Hm){4==t&&(e.o=4,Nm(14),i=!1),_m(e.j,e.m,null,"[Incomplete Response]");break}if(r==Gm){e.o=4,Nm(15),_m(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_m(e.j,e.m,r,null),iy(e,r)}Ym(e)&&r!=Hm&&r!=Gm&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Nm(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),gg(t),t.K=!0,Nm(11))):(_m(e.j,e.m,n,"[Invalid Chunked Response]"),ry(e),ny(e))}function Xm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Hm:(n=Number(t.substring(n,r)),isNaN(n)?Gm:(r+=1)+n>t.length?Hm:(t=t.substr(r,n),e.C=r+n,t))}function Zm(e){e.V=Date.now()+e.O,ey(e,e.O)}function ey(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rm(Jp(e.gb,e),t)}function ty(e){e.B&&(qp.clearTimeout(e.B),e.B=null)}function ny(e){0==e.l.G||e.I||wg(e.l,e)}function ry(e){ty(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,pm(e.T),wm(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function iy(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Py(n.h,e)))if(!e.J&&Py(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bg(n),lg(n)}yg(n),Nm(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Rm(Jp(n.cb,n),6e3));if(1>=Ry(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else _g(n,11)}else if((e.J||n.g==e)&&bg(n),!ov(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Dy(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,hy(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Sg(r,r.H?r.ka:null,r.V),d.J){Ly(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(ty(p),Zm(p)),r.g=d}else mg(r);0<n.i.length&&hg(n)}else"stop"!=a[0]&&"close"!=a[0]||_g(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?_g(n,7):cg(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Cm()}catch(a){}}function ay(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wp(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Wp(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Wp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(jp=qm.prototype).setTimeout=function(e){this.O=e},jp.ib=function(e){e=e.target;var t=this.L;t&&3==rg(e)?t.l():this.La(e)},jp.La=function(e){try{if(e==this.g)e:{var t=rg(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||mv||this.g&&(this.h.h||this.g.fa()||ig(this.g)))){this.I||4!=t||7==n||Cm(),ty(this);var r=this.g.aa();this.Y=r;t:if(Ym(this)){var i=ig(this.g);e="";var a=i.length,o=4==rg(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ry(this),ny(this);var u="";break t}this.h.i=new qp.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ov(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Nm(12),ry(this),ny(this);break e}_m(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iy(this,r)}this.P?(Jm(this,t,u),mv&&this.i&&3==t&&(bm(this.S,this.T,"tick",this.hb),this.T.start())):(_m(this.j,this.m,u,null),iy(this,u)),4==t&&ry(this),this.i&&!this.I&&(4==t?wg(this.l,this):(this.i=!1,Zm(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Nm(12)):(this.o=0,Nm(13)),ry(this),ny(this)}}}catch(t){}},jp.hb=function(){if(this.g){var e=rg(this.g),t=this.g.fa();this.C<t.length&&(ty(this),Jm(this,e,t),this.i&&4!=e&&Zm(this))}},jp.cancel=function(){this.I=!0,ry(this)},jp.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cm(),Nm(17)),ry(this),this.o=2,ny(this)):ey(this,this.V-e)};var oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uy(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof uy){this.h=void 0!==t?t:e.h,cy(this,e.j),this.s=e.s,this.g=e.g,ly(this,e.m),this.l=e.l,t=e.i;var n=new xy;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),fy(this,n),this.o=e.o}else e&&(n=String(e).match(oy))?(this.h=!!t,cy(this,n[1]||"",!0),this.s=py(n[2]||""),this.g=py(n[3]||"",!0),ly(this,n[4]),this.l=py(n[5]||"",!0),fy(this,n[6]||"",!0),this.o=py(n[7]||"")):(this.h=!!t,this.i=new xy(null,this.h))}function sy(e){return new uy(e)}function cy(e,t,n){e.j=n?py(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ly(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function fy(e,t,n){t instanceof xy?(e.i=t,function(e,t){t&&!e.j&&(_y(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ey(this,t),Iy(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vy(t,by)),e.i=new xy(t,e.h))}function hy(e,t,n){e.i.set(t,n)}function dy(e){return hy(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function py(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vy(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,my),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function my(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}uy.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vy(t,yy,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vy(t,yy,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vy(n,"/"==n.charAt(0)?ky:gy,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vy(n,wy)),e.join("")};var yy=/[#\/\?@]/g,gy=/[#\?:]/g,ky=/[#\?]/g,by=/[#\?@]/g,wy=/#/g;function xy(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _y(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ey(e,t){_y(e),t=Ty(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Sy(e,t){return _y(e),t=Ty(e,t),e.g.has(t)}function Iy(e,t,n){Ey(e,t),0<n.length&&(e.i=null,e.g.set(Ty(e,t),nv(n)),e.h+=n.length)}function Ty(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jp=xy.prototype).add=function(e,t){_y(this),this.i=null,e=Ty(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jp.forEach=function(e,t){_y(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},jp.oa=function(){_y(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},jp.W=function(e){_y(this);var t=[];if("string"===typeof e)Sy(this,e)&&(t=t.concat(this.g.get(Ty(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},jp.set=function(e,t){return _y(this),this.i=null,Sy(this,e=Ty(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jp.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},jp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Cy=wn((function e(t,n){kn(this,e),this.h=t,this.g=n}));function Ay(e){this.l=e||Ny,qp.PerformanceNavigationTiming?e=0<(e=qp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qp.g&&qp.g.Ga&&qp.g.Ga()&&qp.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ny=10;function Oy(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ry(e){return e.h?1:e.g?e.g.size:0}function Py(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Dy(e,t){e.g?e.g.add(t):e.h=t}function Ly(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function My(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=qr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return nv(e.i)}function Fy(){}function Uy(){this.g=new Fy}function jy(e,t,n){var r=n||"";try{ay(e,(function(e,n){var i=e;Gp(e)&&(i=nm(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vy(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(P){}}function By(e){this.l=e.ac||null,this.j=e.jb||!1}function zy(e,t){Zv.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=qy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ay.prototype.cancel=function(){if(this.i=My(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=qr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Fy.prototype.stringify=function(e){return qp.JSON.stringify(e,void 0)},Fy.prototype.parse=function(e){return qp.JSON.parse(e,void 0)},Zp(By,Lm),By.prototype.g=function(){return new zy(this.l,this.j)},By.prototype.i=function(e){return function(){return e}}({}),Zp(zy,Zv);var qy=0;function Ky(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Wy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Gy(e)}function Gy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jp=zy.prototype).open=function(e,t){if(this.readyState!=qy)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Gy(this)},jp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qp).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},jp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wy(this)),this.readyState=qy},jp.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Gy(this)),this.g&&(this.readyState=3,Gy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof qp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ky(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},jp.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wy(this):Gy(this),3==this.readyState&&Ky(this)}},jp.Va=function(e){this.g&&(this.response=this.responseText=e,Wy(this))},jp.Ua=function(e){this.g&&(this.response=e,Wy(this))},jp.ga=function(){this.g&&Wy(this)},jp.setRequestHeader=function(e,t){this.v.append(e,t)},jp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Hy=qp.JSON.parse;function Qy(e){Zv.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$y,this.K=this.L=!1}Zp(Qy,Zv);var $y="",Yy=/^https?$/i,Jy=["POST","PUT"];function Xy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Zy(e),tg(e)}function Zy(e){e.D||(e.D=!0,em(e,"complete"),em(e,"error"))}function eg(e){if(e.h&&"undefined"!=typeof zp&&(!e.C[1]||4!=rg(e)||2!=e.aa()))if(e.v&&4==rg(e))vm(e.Ha,0,e);else if(em(e,"readystatechange"),4==rg(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(oy)[1]||null;if(!a&&qp.self&&qp.self.location){var o=qp.self.location.protocol;a=o.substr(0,o.length-1)}i=!Yy.test(a?a.toLowerCase():"")}t=i}if(t)em(e,"complete"),em(e,"success");else{e.m=6;try{var u=2<rg(e)?e.g.statusText:""}catch(O){u=""}e.j=u+" ["+e.aa()+"]",Zy(e)}}finally{tg(e)}}}function tg(e,t){if(e.g){ng(e);var n=e.g,r=e.C[0]?Kp:null;e.g=null,e.C=null,t||em(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ng(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qp.clearTimeout(e.A),e.A=null)}function rg(e){return e.g?e.g.readyState:0}function ig(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case $y:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(z){return null}}function ag(e){var t="";return Dv(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function og(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ag(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hy(e,t,n))}function ug(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sg(e){this.Ca=0,this.i=[],this.j=new xm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ug("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ug("baseRetryDelayMs",5e3,e),this.bb=ug("retryDelaySeedMs",1e4,e),this.$a=ug("forwardChannelMaxRetries",2,e),this.ta=ug("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Ay(e&&e.concurrentRequestLimit),this.Fa=new Uy,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function cg(e){if(fg(e),3==e.G){var t=e.U++,n=sy(e.F);hy(n,"SID",e.I),hy(n,"RID",t),hy(n,"TYPE","terminate"),pg(e,n),(t=new qm(e,e.j,t,void 0)).K=2,t.v=dy(sy(n)),n=!1,qp.navigator&&qp.navigator.sendBeacon&&(n=qp.navigator.sendBeacon(t.v.toString(),"")),!n&&qp.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ig(t.l,null),t.g.da(t.v)),t.F=Date.now(),Zm(t)}Eg(e)}function lg(e){e.g&&(gg(e),e.g.cancel(),e.g=null)}function fg(e){lg(e),e.u&&(qp.clearTimeout(e.u),e.u=null),bg(e),e.h.cancel(),e.m&&("number"===typeof e.m&&qp.clearTimeout(e.m),e.m=null)}function hg(e){Oy(e.h)||e.m||(e.m=!0,cm(e.Ja,e),e.C=0)}function dg(e,t){var n;n=t?t.m:e.U++;var r=sy(e.F);hy(r,"SID",e.I),hy(r,"RID",n),hy(r,"AID",e.T),pg(e,r),e.o&&e.s&&og(r,e.o,e.s),n=new qm(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=vg(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Dy(e.h,n),Qm(n,r,t)}function pg(e,t){e.ia&&Dv(e.ia,(function(e,n){hy(t,n,e)})),e.l&&ay({},(function(e,n){hy(t,n,e)}))}function vg(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Jp(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{jy(l,o,"req"+c+"_")}catch(ue){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function mg(e){e.g||e.u||(e.Z=1,cm(e.Ia,e),e.A=0)}function yg(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Rm(Jp(e.Ia,e),xg(e,e.A)),e.A++,!0)}function gg(e){null!=e.B&&(qp.clearTimeout(e.B),e.B=null)}function kg(e){e.g=new qm(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=sy(e.sa);hy(t,"RID","rpc"),hy(t,"SID",e.I),hy(t,"CI",e.L?"0":"1"),hy(t,"AID",e.T),hy(t,"TYPE","xmlhttp"),pg(e,t),e.o&&e.s&&og(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=dy(sy(t)),n.s=null,n.P=!0,$m(n,e)}function bg(e){null!=e.v&&(qp.clearTimeout(e.v),e.v=null)}function wg(e,t){var n=null;if(e.g==t){bg(e),gg(e),e.g=null;var r=2}else{if(!Py(e.h,t))return;n=t.D,Ly(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;em(r=Im(),new Om(r,n)),hg(e)}else mg(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Ry(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Rm(Jp(e.Ja,e,t),xg(e,e.C)),e.C++,!0))}(e,t)||2==r&&yg(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:_g(e,5);break;case 4:_g(e,10);break;case 3:_g(e,6);break;default:_g(e,2)}}function xg(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function _g(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Jp(e.kb,e);n||(n=new uy("//www.google.com/images/cleardot.gif"),qp.location&&"http"==qp.location.protocol||cy(n,"https"),dy(n)),function(e,t){var n=new xm;if(qp.Image){var r=new Image;r.onload=Xp(Vy,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xp(Vy,n,r,"TestLoadImage: error",!1,t),r.onabort=Xp(Vy,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xp(Vy,n,r,"TestLoadImage: timeout",!1,t),qp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Nm(2);e.G=0,e.l&&e.l.va(t),Eg(e),fg(e)}function Eg(e){if(e.G=0,e.la=[],e.l){var t=My(e.h);0==t.length&&0==e.i.length||(rv(e.la,t),rv(e.la,e.i),e.h.i.length=0,nv(e.i),e.i.length=0),e.l.ua()}}function Sg(e,t,n){var r=n instanceof uy?sy(n):new uy(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ly(r,r.m);else{var i=qp.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new uy(null,void 0);r&&cy(a,r),t&&(a.g=t),i&&ly(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&hy(r,n,t),hy(r,"VER",e.ma),pg(e,r),r}function Ig(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Qy(new By({jb:!0})):new Qy(e.ra)).Ka(e.H),t}function Tg(){}function Cg(){if(pv&&!(10<=Number(Tv)))throw Error("Environmental error: no available transport.")}function Ag(e,t){Zv.call(this),this.g=new sg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!ov(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ov(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Rg(this)}function Ng(e){Vm.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Og(){Bm.call(this),this.status=1}function Rg(e){this.g=e}(jp=Qy.prototype).Ka=function(e){this.L=e},jp.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Um.g(),this.C=this.u?Mm(this.u):Mm(Um),this.g.onreadystatechange=Jp(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Xy(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=qr(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qp.FormData&&e instanceof qp.FormData,!(0<=tv(Jy,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=qr(n);try{for(c.s();!(s=c.n()).done;){var l=Ft(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ng(this),0<this.B&&((this.K=function(e){return pv&&Sv()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jp(this.qa,this)):this.A=vm(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Xy(this,u)}},jp.qa=function(){"undefined"!=typeof zp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,em(this,"timeout"),this.abort(8))},jp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,em(this,"complete"),em(this,"abort"),tg(this))},jp.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tg(this,!0)),Qy.X.M.call(this)},jp.Ha=function(){this.s||(this.F||this.v||this.l?eg(this):this.fb())},jp.fb=function(){eg(this)},jp.aa=function(){try{return 2<rg(this)?this.g.status:-1}catch(R){return-1}},jp.fa=function(){try{return this.g?this.g.responseText:""}catch(R){return""}},jp.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Hy(t)}},jp.Ea=function(){return this.m},jp.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(jp=sg.prototype).ma=8,jp.G=1,jp.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new qm(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Fv(n=Lv(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=vg(this,t,r),hy(i=sy(this.F),"RID",e),hy(i,"CVER",22),this.D&&hy(i,"X-HTTP-Session-Id",this.D),pg(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(ag(n)))+"&"+r:this.o&&og(i,this.o,n)),Dy(this.h,t),this.Ya&&hy(i,"TYPE","init"),this.O?(hy(i,"$req",r),hy(i,"SID","null"),t.Z=!0,Qm(t,i,null)):Qm(t,i,r),this.G=2}}else 3==this.G&&(e?dg(this,e):0==this.i.length||Oy(this.h)||dg(this))},jp.Ia=function(){if(this.u=null,kg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Rm(Jp(this.eb,this),e)}},jp.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Nm(10),lg(this),kg(this))},jp.cb=function(){null!=this.v&&(this.v=null,lg(this),yg(this),Nm(19))},jp.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Nm(2)):(this.j.info("Failed to ping google.com"),Nm(1))},(jp=Tg.prototype).xa=function(){},jp.wa=function(){},jp.va=function(){},jp.ua=function(){},jp.Ra=function(){},Cg.prototype.g=function(e,t){return new Ag(e,t)},Zp(Ag,Zv),Ag.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Nm(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Sg(e,null,e.V),hg(e)},Ag.prototype.close=function(){cg(this.g)},Ag.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=nm(e),e=n);t.i.push(new Cy(t.ab++,e)),3==t.G&&hg(t)},Ag.prototype.M=function(){this.g.l=null,delete this.j,cg(this.g),delete this.g,Ag.X.M.call(this)},Zp(Ng,Vm),Zp(Og,Bm),Zp(Rg,Tg),Rg.prototype.xa=function(){em(this.g,"a")},Rg.prototype.wa=function(e){em(this.g,new Ng(e))},Rg.prototype.va=function(e){em(this.g,new Og)},Rg.prototype.ua=function(){em(this.g,"b")},Cg.prototype.createWebChannel=Cg.prototype.g,Ag.prototype.send=Ag.prototype.u,Ag.prototype.open=Ag.prototype.m,Ag.prototype.close=Ag.prototype.close,Pm.NO_ERROR=0,Pm.TIMEOUT=8,Pm.HTTP_ERROR=6,Dm.COMPLETE="complete",Fm.EventType=jm,jm.OPEN="a",jm.CLOSE="b",jm.ERROR="c",jm.MESSAGE="d",Zv.prototype.listen=Zv.prototype.N,Qy.prototype.listenOnce=Qy.prototype.O,Qy.prototype.getLastError=Qy.prototype.Oa,Qy.prototype.getLastErrorCode=Qy.prototype.Ea,Qy.prototype.getStatus=Qy.prototype.aa,Qy.prototype.getResponseJson=Qy.prototype.Sa,Qy.prototype.getResponseText=Qy.prototype.fa,Qy.prototype.send=Qy.prototype.da,Qy.prototype.setWithCredentials=Qy.prototype.Ka;var Pg=Bp.createWebChannelTransport=function(){return new Cg},Dg=Bp.getStatEventTarget=function(){return Im()},Lg=Bp.ErrorCode=Pm,Mg=Bp.EventType=Dm,Fg=Bp.Event=Em,Ug=Bp.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},jg=Bp.FetchXmlHttpFactory=By,Vg=Bp.WebChannel=Fm,Bg=Bp.XhrIo=Qy,zg="@firebase/firestore",qg=function(){function e(t){kn(this,e),this.uid=t}return wn(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();qg.UNAUTHENTICATED=new qg(null),qg.GOOGLE_CREDENTIALS=new qg("google-credentials-uid"),qg.FIRST_PARTY=new qg("first-party-uid"),qg.MOCK_USER=new qg("mock-user");var Kg="9.20.0",Wg=new Ha("@firebase/firestore");function Gg(){return Wg.logLevel}function Hg(e){if(Wg.logLevel<=Va.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yg);Wg.debug.apply(Wg,["Firestore (".concat(Kg,"): ").concat(e)].concat(Pr(i)))}}function Qg(e){if(Wg.logLevel<=Va.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yg);Wg.error.apply(Wg,["Firestore (".concat(Kg,"): ").concat(e)].concat(Pr(i)))}}function $g(e){if(Wg.logLevel<=Va.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yg);Wg.warn.apply(Wg,["Firestore (".concat(Kg,"): ").concat(e)].concat(Pr(i)))}}function Yg(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Jg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Kg,") INTERNAL ASSERTION FAILED: ")+e;throw Qg(t),new Error(t)}function Xg(e,t){e||Jg()}function Zg(e,t){return e}var ek={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},tk=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return wn(n)}(xa),nk=wn((function e(){var t=this;kn(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),rk=wn((function e(t,n){kn(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ik=function(){function e(){kn(this,e)}return wn(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(qg.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ak=function(){function e(t){kn(this,e),this.token=t,this.changeListener=null}return wn(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ok=function(){function e(t){kn(this,e),this.t=t,this.currentUser=qg.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return wn(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new nk;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new nk,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Hg("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Hg("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new nk)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Hg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Xg("string"==typeof n.accessToken),new rk(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Xg(null===e||"string"==typeof e),new qg(e)}}]),e}(),uk=function(){function e(t,n,r){kn(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=qg.FIRST_PARTY,this.g=new Map}return wn(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),sk=function(){function e(t,n,r){kn(this,e),this.h=t,this.l=n,this.m=r}return wn(e,[{key:"getToken",value:function(){return Promise.resolve(new uk(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(qg.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ck=wn((function e(t){kn(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),lk=function(){function e(t){kn(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return wn(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Hg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Hg("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Hg("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Hg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Xg("string"==typeof t.token),e.T=t.token,new ck(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function fk(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var hk=function(){function e(){kn(this,e)}return wn(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=fk(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function dk(e,t){return e<t?-1:e>t?1:0}function pk(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function vk(e){return e+"\0"}var mk=function(){function e(t,n){if(kn(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new tk(ek.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tk(ek.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new tk(ek.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new tk(ek.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return wn(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?dk(this.nanoseconds,e.nanoseconds):dk(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),yk=function(){function e(t){kn(this,e),this.timestamp=t}return wn(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new mk(0,0))}},{key:"max",value:function(){return new e(new mk(253402300799,999999999))}}]),e}(),gk=function(){function e(t,n,r){kn(this,e),void 0===n?n=0:n>t.length&&Jg(),void 0===r?r=t.length-n:r>t.length-n&&Jg(),this.segments=t,this.offset=n,this.len=r}return wn(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),kk=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new tk(ek.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Pr(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(gk),bk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wk=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return bk.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new tk(ek.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new tk(ek.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new tk(ek.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new tk(ek.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(gk),xk=function(){function e(t){kn(this,e),this.path=t}return wn(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===kk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(kk.fromString(t))}},{key:"fromName",value:function(t){return new e(kk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(kk.emptyPath())}},{key:"comparator",value:function(e,t){return kk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new kk(t.slice()))}}]),e}(),_k=wn((function e(t,n,r,i){kn(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ek(e){return e.fields.find((function(e){return 2===e.kind}))}function Sk(e){return e.fields.filter((function(e){return 2!==e.kind}))}_k.UNKNOWN_ID=-1;var Ik=wn((function e(t,n){kn(this,e),this.fieldPath=t,this.kind=n}));var Tk=function(){function e(t,n){kn(this,e),this.sequenceNumber=t,this.offset=n}return wn(e,null,[{key:"empty",value:function(){return new e(0,Nk.min())}}]),e}();function Ck(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yk.fromTimestamp(1e9===r?new mk(n+1,0):new mk(n,r));return new Nk(i,xk.empty(),t)}function Ak(e){return new Nk(e.readTime,e.key,-1)}var Nk=function(){function e(t,n,r){kn(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return wn(e,null,[{key:"min",value:function(){return new e(yk.min(),xk.empty(),-1)}},{key:"max",value:function(){return new e(yk.max(),xk.empty(),-1)}}]),e}();function Ok(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=xk.comparator(e.documentKey,t.documentKey))?n:dk(e.largestBatchId,t.largestBatchId)}var Rk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pk=function(){function e(){kn(this,e),this.onCommittedListeners=[]}return wn(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Dk(e){return Lk.apply(this,arguments)}function Lk(){return Lk=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ek.FAILED_PRECONDITION&&t.message===Rk){e.next=2;break}throw t;case 2:Hg("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}var Mk=function(){function e(t){var n=this;kn(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return wn(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Jg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=qr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Fk=function(){function e(t,n){var r=this;kn(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new nk,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Vk(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Wk(e.target.error);r.R.reject(new Vk(t,n))}}return wn(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Hg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new zk(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Vk(n,t)}}}]),e}(),Uk=function(){function e(t,n,r){kn(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(ma())&&Qg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return wn(e,[{key:"$",value:function(){var e=xt(bt().mark((function e(t){var n=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Hg("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Vk(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new tk(ek.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new tk(ek.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Vk(t,n))},i.onupgradeneeded=function(e){Hg("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){Hg("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=xt(bt().mark((function e(t,n,r,i){var a,o,u,s,c=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=bt().mark((function e(){var n,u,s,l;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Fk.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Mk.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Hg("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Hg("SimpleDb","Removing database:",e),qk(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!wa())return!1;if(e.C())return!0;var t=ma(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),jk=function(){function e(t){kn(this,e),this.L=t,this.q=!1,this.U=null}return wn(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return qk(this.L.delete())}}]),e}(),Vk=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,ek.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return wn(n)}(tk);function Bk(e){return"IndexedDbTransactionError"===e.name}var zk=function(){function e(t){kn(this,e),this.store=t}return wn(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Hg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Hg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qk(n)}},{key:"add",value:function(e){return Hg("SimpleDb","ADD",this.store.name,e,e),qk(this.store.add(e))}},{key:"get",value:function(e){var t=this;return qk(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Hg("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Hg("SimpleDb","DELETE",this.store.name,e),qk(this.store.delete(e))}},{key:"count",value:function(){return Hg("SimpleDb","COUNT",this.store.name),qk(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Mk((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Mk((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Hg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Mk((function(n,r){t.onerror=function(e){var t=Wk(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Mk((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new jk(i),o=t(i.primaryKey,i.value,a);if(o instanceof Mk){var u=o.catch((function(e){return a.done(),Mk.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Mk.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function qk(e){return new Mk((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Wk(e.target.error);n(t)}}))}var Kk=!1;function Wk(e){var t=Uk.S(ma());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new tk("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Kk||(Kk=!0,setTimeout((function(){throw r}),0)),r}}return e}var Gk=function(){function e(t,n){kn(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return wn(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Hg("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Hg,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Bk(e.t4)){e.next=17;break}Hg("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Dk(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Hk=function(){function e(t,n){kn(this,e),this.localStore=t,this.persistence=n}return wn(e,[{key:"nt",value:function(){var e=xt(bt().mark((function e(){var t,n=this,r=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Mk.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Hg("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Hg("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ak(t);Ok(r,n)>0&&(n=r)})),new Nk(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Qk=function(){function e(t,n){var r=this;kn(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return wn(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function $k(e){return null==e}function Yk(e){return 0===e&&1/e==-1/0}function Jk(e){return"number"==typeof e&&Number.isInteger(e)&&!Yk(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Xk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=eb(t)),t=Zk(e.get(n),t);return eb(t)}function Zk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function eb(e){return e+"\x01\x01"}function tb(e){var t=e.length;if(Xg(t>=2),2===t)return Xg("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),kk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Jg(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Jg()}a=o+2}return new kk(r)}Qk.ct=-1;var nb=["userId","batchId"];function rb(e,t){return[e,Xk(t)]}function ib(e,t,n){return[e,Xk(t),n]}var ab={},ob=["prefixPath","collectionGroup","readTime","documentId"],ub=["prefixPath","collectionGroup","documentId"],sb=["collectionGroup","readTime","prefixPath","documentId"],cb=["canonicalId","targetId"],lb=["targetId","path"],fb=["path","targetId"],hb=["collectionId","parent"],db=["indexId","uid"],pb=["uid","sequenceNumber"],vb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mb=["indexId","uid","orderedDocumentKey"],yb=["userId","collectionPath","documentId"],gb=["userId","collectionPath","largestBatchId"],kb=["userId","collectionGroup","largestBatchId"],bb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),wb=[].concat(Pr(bb),["documentOverlays"]),xb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_b=xb,Eb=[].concat(_b,["indexConfiguration","indexState","indexEntries"]),Sb=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return wn(n)}(Pk);function Ib(e,t){var n=Zg(e);return Uk.O(n.at,t)}function Tb(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ab(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Nb=function(){function e(t,n){kn(this,e),this.comparator=t,this.root=n||Rb.EMPTY}return wn(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Rb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ob(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ob(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ob(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ob(this.root,e,this.comparator,!0)}}]),e}(),Ob=function(){function e(t,n,r,i){kn(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return wn(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Rb=function(){function e(t,n,r,i,a){kn(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return wn(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Jg();if(this.right.isRed())throw Jg();var e=this.left.check();if(e!==this.right.check())throw Jg();return e+(this.isRed()?0:1)}}]),e}();Rb.EMPTY=null,Rb.RED=!0,Rb.BLACK=!1,Rb.EMPTY=new(function(){function e(){kn(this,e),this.size=0}return wn(e,[{key:"key",get:function(){throw Jg()}},{key:"value",get:function(){throw Jg()}},{key:"color",get:function(){throw Jg()}},{key:"left",get:function(){throw Jg()}},{key:"right",get:function(){throw Jg()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Rb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Pb=function(){function e(t){kn(this,e),this.comparator=t,this.data=new Nb(this.comparator)}return wn(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Db(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Db(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Db=function(){function e(t){kn(this,e),this.iter=t}return wn(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Lb(e){return e.hasNext()?e.getNext():void 0}var Mb=function(){function e(t){kn(this,e),this.fields=t,t.sort(wk.comparator)}return wn(e,[{key:"unionWith",value:function(t){var n,r=new Pb(wk.comparator),i=qr(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=qr(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=qr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return pk(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Fb=function(e){Lr(n,e);var t=jr(n);function n(){var e;return kn(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return wn(n)}(Br(Error));var Ub=function(e){function t(e){kn(this,t),this.binaryString=e}return wn(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return dk(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Fb("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ub.EMPTY_BYTE_STRING=new Ub("");var jb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vb(e){if(Xg(!!e),"string"==typeof e){var t=0,n=jb.exec(e);if(Xg(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bb(e.seconds),nanos:Bb(e.nanos)}}function Bb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zb(e){return"string"==typeof e?Ub.fromBase64String(e):Ub.fromUint8Array(e)}function qb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kb(e){var t=e.mapValue.fields.__previous_value__;return qb(t)?Kb(t):t}function Wb(e){var t=Vb(e.mapValue.fields.__local_write_time__.timestampValue);return new mk(t.seconds,t.nanos)}var Gb=wn((function e(t,n,r,i,a,o,u,s){kn(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Hb=function(){function e(t,n){kn(this,e),this.projectId=t,this.database=n||"(default)"}return wn(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Qb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$b={nullValue:"NULL_VALUE"};function Yb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qb(e)?4:lw(e)?9007199254740991:10:Jg()}function Jb(e,t){if(e===t)return!0;var n=Yb(e);if(n!==Yb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wb(e).isEqual(Wb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Vb(e.timestampValue),r=Vb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zb(e.bytesValue).isEqual(zb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bb(e.geoPointValue.latitude)===Bb(t.geoPointValue.latitude)&&Bb(e.geoPointValue.longitude)===Bb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bb(e.integerValue)===Bb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Bb(e.doubleValue),r=Bb(t.doubleValue);return n===r?Yk(n)===Yk(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return pk(e.arrayValue.values||[],t.arrayValue.values||[],Jb);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tb(n)!==Tb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jb(n[i],r[i])))return!1;return!0}(e,t);default:return Jg()}}function Xb(e,t){return void 0!==(e.values||[]).find((function(e){return Jb(e,t)}))}function Zb(e,t){if(e===t)return 0;var n=Yb(e),r=Yb(t);if(n!==r)return dk(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dk(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Bb(e.integerValue||e.doubleValue),r=Bb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ew(e.timestampValue,t.timestampValue);case 4:return ew(Wb(e),Wb(t));case 5:return dk(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zb(e),r=zb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=dk(n[i],r[i]);if(0!==a)return a}return dk(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=dk(Bb(e.latitude),Bb(t.latitude));return 0!==n?n:dk(Bb(e.longitude),Bb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Zb(n[i],r[i]);if(a)return a}return dk(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Qb.mapValue&&t===Qb.mapValue)return 0;if(e===Qb.mapValue)return 1;if(t===Qb.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=dk(r[o],a[o]);if(0!==u)return u;var s=Zb(n[r[o]],i[a[o]]);if(0!==s)return s}return dk(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Jg()}}function ew(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return dk(e,t);var n=Vb(e),r=Vb(t),i=dk(n.seconds,r.seconds);return 0!==i?i:dk(n.nanos,r.nanos)}function tw(e){return nw(e)}function nw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Vb(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,xk.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=qr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=nw(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=qr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(nw(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Jg();var t,n}function rw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function iw(e){return!!e&&"integerValue"in e}function aw(e){return!!e&&"arrayValue"in e}function ow(e){return!!e&&"nullValue"in e}function uw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function sw(e){return!!e&&"mapValue"in e}function cw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Cb(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=cw(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=cw(e.arrayValue.values[r]);return n}return Object.assign({},e)}function lw(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function fw(e){return"nullValue"in e?$b:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?rw(Hb.empty(),xk.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Jg()}function hw(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?rw(Hb.empty(),xk.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Qb:Jg()}function dw(e,t){var n=Zb(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function pw(e,t){var n=Zb(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var vw=function(){function e(t){kn(this,e),this.value=t}return wn(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!sw(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cw(t)}},{key:"setAll",value:function(e){var t=this,n=wk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=cw(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());sw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Jb(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];sw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Cb(t,(function(t,n){return e[t]=n}));var r,i=qr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(cw(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function mw(e){var t=[];return Cb(e.fields,(function(e,n){var r=new wk([e]);if(sw(n)){var i=mw(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=qr(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Mb(t)}var yw=function(){function e(t,n,r,i,a,o,u){kn(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return wn(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(yk.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=vw.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=vw.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=yk.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,yk.min(),yk.min(),yk.min(),vw.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,yk.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,yk.min(),yk.min(),vw.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,yk.min(),yk.min(),vw.empty(),2)}}]),e}(),gw=wn((function e(t,n){kn(this,e),this.position=t,this.inclusive=n}));function kw(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?xk.comparator(xk.fromName(o.referenceValue),n.key):Zb(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Jb(e.position[n],t.position[n]))return!1;return!0}var ww=wn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";kn(this,e),this.field=t,this.dir=n}));function xw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var _w=wn((function e(){kn(this,e)})),Ew=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return wn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zb(t,this.value)):null!==t&&Yb(this.value)===Yb(t)&&this.matchesComparison(Zb(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jg()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Dw(e,t,r):"array-contains"===t?new Uw(e,r):"in"===t?new jw(e,r):"not-in"===t?new Vw(e,r):"array-contains-any"===t?new Bw(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Lw(e,n):new Mw(e,n)}}]),n}(_w),Sw=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return wn(n,[{key:"matches",value:function(e){return Iw(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=qr(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(_w);function Iw(e){return"and"===e.op}function Tw(e){return"or"===e.op}function Cw(e){return Aw(e)&&Iw(e)}function Aw(e){var t,n=qr(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Sw)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Nw(e){if(e instanceof Ew)return e.field.canonicalString()+e.op.toString()+tw(e.value);if(Cw(e))return e.filters.map((function(e){return Nw(e)})).join(",");var t=e.filters.map((function(e){return Nw(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ow(e,t){return e instanceof Ew?function(e,t){return t instanceof Ew&&e.op===t.op&&e.field.isEqual(t.field)&&Jb(e.value,t.value)}(e,t):e instanceof Sw?function(e,t){return t instanceof Sw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ow(n,t.filters[r])}),!0)}(e,t):void Jg()}function Rw(e,t){var n=e.filters.concat(t);return Sw.create(n,e.op)}function Pw(e){return e instanceof Ew?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(tw(e.value))}(e):e instanceof Sw?function(e){return e.op.toString()+" {"+e.getFilters().map(Pw).join(" ,")+"}"}(e):"Filter"}var Dw=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this,e,r,i)).key=xk.fromName(i.referenceValue),a}return wn(n,[{key:"matches",value:function(e){var t=xk.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ew),Lw=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,"in",r)).keys=Fw("in",r),i}return wn(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ew),Mw=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,"not-in",r)).keys=Fw("not-in",r),i}return wn(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ew);function Fw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return xk.fromName(e.referenceValue)}))}var Uw=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"array-contains",r)}return wn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return aw(t)&&Xb(t.arrayValue,this.value)}}]),n}(Ew),jw=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"in",r)}return wn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Xb(this.value.arrayValue,t)}}]),n}(Ew),Vw=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"not-in",r)}return wn(n,[{key:"matches",value:function(e){if(Xb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Xb(this.value.arrayValue,t)}}]),n}(Ew),Bw=function(e){Lr(n,e);var t=jr(n);function n(e,r){return kn(this,n),t.call(this,e,"array-contains-any",r)}return wn(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!aw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Xb(t.value.arrayValue,e)}))}}]),n}(Ew),zw=wn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;kn(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function qw(e){return new zw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Kw(e){var t=Zg(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Nw(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),$k(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return tw(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return tw(e)})).join(",")),t.ft=n}return t.ft}function Ww(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!xw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ow(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bw(e.startAt,t.startAt)&&bw(e.endAt,t.endAt)}function Gw(e){return xk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hw(e,t){return e.filters.filter((function(e){return e instanceof Ew&&e.field.isEqual(t)}))}function Qw(e,t,n){var r,i=$b,a=!0,o=qr(Hw(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=$b,c=!0;switch(u.op){case"<":case"<=":s=fw(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=$b}dw({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];dw({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function $w(e,t,n){var r,i=Qb,a=!0,o=qr(Hw(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Qb,c=!0;switch(u.op){case">=":case">":s=hw(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Qb}pw({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];pw({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Yw=wn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;kn(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function Jw(e,t,n,r,i,a,o,u){return new Yw(e,t,n,r,i,a,o,u)}function Xw(e){return new Yw(e)}function Zw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ex(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function tx(e){var t,n=qr(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function nx(e){return null!==e.collectionGroup}function rx(e){var t=Zg(e);if(null===t.dt){t.dt=[];var n=tx(t),r=ex(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new ww(n)),t.dt.push(new ww(wk.keyField(),"asc"));else{var i,a=!1,o=qr(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new ww(wk.keyField(),s))}}}return t.dt}function ix(e){var t=Zg(e);if(!t.wt)if("F"===t.limitType)t.wt=qw(t.path,t.collectionGroup,rx(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=qr(rx(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ww(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new gw(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new gw(t.startAt.position,t.startAt.inclusive):null;t.wt=qw(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function ax(e,t){t.getFirstInequalityField(),tx(e);var n=e.filters.concat([t]);return new Yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ox(e,t,n){return new Yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ux(e,t){return Ww(ix(e),ix(t))&&e.limitType===t.limitType}function sx(e){return"".concat(Kw(ix(e)),"|lt:").concat(e.limitType)}function cx(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Pw(e)})).join(", "),"]")),$k(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return tw(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return tw(e)})).join(",")),"Target(".concat(t,")")}(ix(e)),"; limitType=").concat(e.limitType,")")}function lx(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):xk.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=qr(rx(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=qr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=kw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,rx(e),t))&&!(e.endAt&&!function(e,t,n){var r=kw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,rx(e),t))}(e,t)}function fx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hx(e){return function(t,n){var r,i=!1,a=qr(rx(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=dx(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function dx(e,t,n){var r=e.field.isKeyField()?xk.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zb(r,i):Jg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Jg()}}var px=function(){function e(t,n){kn(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return wn(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=qr(n);try{for(i.s();!(r=i.n()).done;){var a=Ft(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Cb(this.inner,(function(t,n){var r,i=qr(n);try{for(i.s();!(r=i.n()).done;){var a=Ft(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ab(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),vx=new Nb(xk.comparator);function mx(){return vx}var yx=new Nb(xk.comparator);function gx(){for(var e=yx,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function kx(e){var t=yx;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function bx(){return xx()}function wx(){return xx()}function xx(){return new px((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var _x=new Nb(xk.comparator),Ex=new Pb(xk.comparator);function Sx(){for(var e=Ex,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Ix=new Pb(dk);function Tx(){return Ix}function Cx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yk(t)?"-0":t}}function Ax(e){return{integerValue:""+e}}function Nx(e,t){return Jk(t)?Ax(t):Cx(e,t)}var Ox=wn((function e(){kn(this,e),this._=void 0}));function Rx(e,t,n){return e instanceof Lx?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mx?Fx(e,t):e instanceof Ux?jx(e,t):function(e,t){var n=Dx(e,t),r=Bx(n)+Bx(e._t);return iw(n)&&iw(e._t)?Ax(r):Cx(e.serializer,r)}(e,t)}function Px(e,t,n){return e instanceof Mx?Fx(e,t):e instanceof Ux?jx(e,t):n}function Dx(e,t){return e instanceof Vx?iw(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Lx=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n)}(Ox),Mx=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).elements=e,r}return wn(n)}(Ox);function Fx(e,t){var n,r=zx(t),i=qr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Jb(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ux=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).elements=e,r}return wn(n)}(Ox);function jx(e,t){var n,r=zx(t),i=qr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Jb(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vx=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return wn(n)}(Ox);function Bx(e){return Bb(e.integerValue||e.doubleValue)}function zx(e){return aw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var qx=wn((function e(t,n){kn(this,e),this.field=t,this.transform=n}));var Kx=wn((function e(t,n){kn(this,e),this.version=t,this.transformResults=n})),Wx=function(){function e(t,n){kn(this,e),this.updateTime=t,this.exists=n}return wn(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Gx(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Hx=wn((function e(){kn(this,e)}));function Qx(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new o_(e.key,Wx.none()):new Zx(e.key,e.data,Wx.none());var n,r=e.data,i=vw.empty(),a=new Pb(wk.comparator),o=qr(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new e_(e.key,i,new Mb(a.toArray()),Wx.none())}function $x(e,t,n){e instanceof Zx?function(e,t,n){var r=e.value.clone(),i=n_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof e_?function(e,t,n){if(Gx(e.precondition,t)){var r=n_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(t_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yx(e,t,n,r){return e instanceof Zx?function(e,t,n,r){if(!Gx(e.precondition,t))return n;var i=e.value.clone(),a=r_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof e_?function(e,t,n,r){if(!Gx(e.precondition,t))return n;var i=r_(e.fieldTransforms,r,t),a=t.data;return a.setAll(t_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Gx(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jx(e,t){var n,r=null,i=qr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Dx(a.transform,o||null);null!=u&&(null===r&&(r=vw.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Xx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&pk(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mx&&t instanceof Mx||e instanceof Ux&&t instanceof Ux?pk(e.elements,t.elements,Jb):e instanceof Vx&&t instanceof Vx?Jb(e._t,t._t):e instanceof Lx&&t instanceof Lx}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Zx=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return kn(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return wn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hx),e_=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return kn(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return wn(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Hx);function t_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function n_(e,t,n){var r=new Map;Xg(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Px(o,u,n[i]))}return r}function r_(e,t,n){var r,i=new Map,a=qr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Rx(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var i_,a_,o_=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return wn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hx),u_=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return wn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hx),s_=function(){function e(t,n,r,i){kn(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return wn(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&$x(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=qr(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Yx(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=qr(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Yx(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=wx();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Qx(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(yk.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Sx())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&pk(this.mutations,e.mutations,(function(e,t){return Xx(e,t)}))&&pk(this.baseMutations,e.baseMutations,(function(e,t){return Xx(e,t)}))}}]),e}(),c_=function(){function e(t,n,r,i){kn(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return wn(e,null,[{key:"from",value:function(t,n,r){Xg(t.mutations.length===r.length);for(var i=_x,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),l_=function(){function e(t,n){kn(this,e),this.largestBatchId=t,this.mutation=n}return wn(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),f_=wn((function e(t){kn(this,e),this.count=t}));function h_(e){switch(e){default:return Jg();case ek.CANCELLED:case ek.UNKNOWN:case ek.DEADLINE_EXCEEDED:case ek.RESOURCE_EXHAUSTED:case ek.INTERNAL:case ek.UNAVAILABLE:case ek.UNAUTHENTICATED:return!1;case ek.INVALID_ARGUMENT:case ek.NOT_FOUND:case ek.ALREADY_EXISTS:case ek.PERMISSION_DENIED:case ek.FAILED_PRECONDITION:case ek.ABORTED:case ek.OUT_OF_RANGE:case ek.UNIMPLEMENTED:case ek.DATA_LOSS:return!0}}function d_(e){if(void 0===e)return Qg("GRPC error has no .code"),ek.UNKNOWN;switch(e){case i_.OK:return ek.OK;case i_.CANCELLED:return ek.CANCELLED;case i_.UNKNOWN:return ek.UNKNOWN;case i_.DEADLINE_EXCEEDED:return ek.DEADLINE_EXCEEDED;case i_.RESOURCE_EXHAUSTED:return ek.RESOURCE_EXHAUSTED;case i_.INTERNAL:return ek.INTERNAL;case i_.UNAVAILABLE:return ek.UNAVAILABLE;case i_.UNAUTHENTICATED:return ek.UNAUTHENTICATED;case i_.INVALID_ARGUMENT:return ek.INVALID_ARGUMENT;case i_.NOT_FOUND:return ek.NOT_FOUND;case i_.ALREADY_EXISTS:return ek.ALREADY_EXISTS;case i_.PERMISSION_DENIED:return ek.PERMISSION_DENIED;case i_.FAILED_PRECONDITION:return ek.FAILED_PRECONDITION;case i_.ABORTED:return ek.ABORTED;case i_.OUT_OF_RANGE:return ek.OUT_OF_RANGE;case i_.UNIMPLEMENTED:return ek.UNIMPLEMENTED;case i_.DATA_LOSS:return ek.DATA_LOSS;default:return Jg()}}(a_=i_||(i_={}))[a_.OK=0]="OK",a_[a_.CANCELLED=1]="CANCELLED",a_[a_.UNKNOWN=2]="UNKNOWN",a_[a_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",a_[a_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",a_[a_.NOT_FOUND=5]="NOT_FOUND",a_[a_.ALREADY_EXISTS=6]="ALREADY_EXISTS",a_[a_.PERMISSION_DENIED=7]="PERMISSION_DENIED",a_[a_.UNAUTHENTICATED=16]="UNAUTHENTICATED",a_[a_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",a_[a_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",a_[a_.ABORTED=10]="ABORTED",a_[a_.OUT_OF_RANGE=11]="OUT_OF_RANGE",a_[a_.UNIMPLEMENTED=12]="UNIMPLEMENTED",a_[a_.INTERNAL=13]="INTERNAL",a_[a_.UNAVAILABLE=14]="UNAVAILABLE",a_[a_.DATA_LOSS=15]="DATA_LOSS";var p_=function(){function e(){kn(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return wn(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return v_}},{key:"getOrCreateInstance",value:function(){return null===v_&&(v_=new e),v_}}]),e}(),v_=null,m_=function(){function e(t,n,r,i,a){kn(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return wn(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,y_.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(yk.min(),i,Tx(),mx(),Sx())}}]),e}(),y_=function(){function e(t,n,r,i,a){kn(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return wn(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Sx(),Sx(),Sx())}}]),e}(),g_=wn((function e(t,n,r,i){kn(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),k_=wn((function e(t,n){kn(this,e),this.targetId=t,this.Et=n})),b_=wn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ub.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;kn(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),w_=function(){function e(){kn(this,e),this.At=0,this.Rt=E_(),this.vt=Ub.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return wn(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Sx(),t=Sx(),n=Sx();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Jg()}})),new y_(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=E_()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),x_=function(){function e(t){kn(this,e),this.Ft=t,this.Bt=new Map,this.Lt=mx(),this.qt=__(),this.Ut=new Pb(dk)}return wn(e,[{key:"Kt",value:function(e){var t,n=qr(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=qr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Jg()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Gw(a))if(0===r){var o=new xk(a.path);this.Qt(n,o,yw.newNoDocument(o,yk.min()))}else Xg(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=p_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Gw(a.target)){var o=new xk(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,yw.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Sx();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new m_(e,n,this.Ut,this.Lt,r);return this.Lt=mx(),this.qt=__(),this.Ut=new Pb(dk),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new w_,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Pb(dk),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Hg("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new w_),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function __(){return new Nb(xk.comparator)}function E_(){return new Nb(xk.comparator)}var S_={asc:"ASCENDING",desc:"DESCENDING"},I_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T_={and:"AND",or:"OR"},C_=wn((function e(t,n){kn(this,e),this.databaseId=t,this.useProto3Json=n}));function A_(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function N_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function O_(e,t){return A_(e,t.toTimestamp())}function R_(e){return Xg(!!e),yk.fromTimestamp(function(e){var t=Vb(e);return new mk(t.seconds,t.nanos)}(e))}function P_(e,t){return function(e){return new kk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function D_(e){var t=kk.fromString(e);return Xg(rE(t)),t}function L_(e,t){return P_(e.databaseId,t.path)}function M_(e,t){var n=D_(t);if(n.get(1)!==e.databaseId.projectId)throw new tk(ek.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new tk(ek.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xk(V_(n))}function F_(e,t){return P_(e.databaseId,t)}function U_(e){var t=D_(e);return 4===t.length?kk.emptyPath():V_(t)}function j_(e){return new kk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function V_(e){return Xg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function B_(e,t,n){return{name:L_(e,t),fields:n.value.mapValue.fields}}function z_(e,t,n){var r=M_(e,t.name),i=R_(t.updateTime),a=t.createTime?R_(t.createTime):yk.min(),o=new vw({mapValue:{fields:t.fields}}),u=yw.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function q_(e,t){return"found"in t?function(e,t){Xg(!!t.found),t.found.name,t.found.updateTime;var n=M_(e,t.found.name),r=R_(t.found.updateTime),i=t.found.createTime?R_(t.found.createTime):yk.min(),a=new vw({mapValue:{fields:t.found.fields}});return yw.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Xg(!!t.missing),Xg(!!t.readTime);var n=M_(e,t.missing),r=R_(t.readTime);return yw.newNoDocument(n,r)}(e,t):Jg()}function K_(e,t){var n;if(t instanceof Zx)n={update:B_(e,t.key,t.value)};else if(t instanceof o_)n={delete:L_(e,t.key)};else if(t instanceof e_)n={update:B_(e,t.key,t.data),updateMask:nE(t.fieldMask)};else{if(!(t instanceof u_))return Jg();n={verify:L_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Lx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mx)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ux)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vx)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Jg()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:O_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Jg()}(e,t.precondition)),n}function W_(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Wx.updateTime(R_(e.updateTime)):void 0!==e.exists?Wx.exists(e.exists):Wx.none()}(t.currentDocument):Wx.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Xg("REQUEST_TIME"===t.setToServerValue),n=new Lx;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Mx(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ux(i)}else"increment"in t?n=new Vx(e,t.increment):Jg();var a=wk.fromServerFormat(t.fieldPath);return new qx(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=M_(e,t.update.name),a=new vw({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Mb(t.map((function(e){return wk.fromServerFormat(e)})))}(t.updateMask);return new e_(i,a,o,n,r)}return new Zx(i,a,n,r)}if(t.delete){var u=M_(e,t.delete);return new o_(u,n)}if(t.verify){var s=M_(e,t.verify);return new u_(s,n)}return Jg()}function G_(e,t){return{documents:[F_(e,t.path)]}}function H_(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=F_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=F_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return tE(Sw.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Z_(e.field),direction:Y_(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||$k(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Q_(e){var t=U_(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Xg(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=$_(e);return t instanceof Sw&&Cw(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ww(eE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return $k(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new gw(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new gw(n,t)}(n.endAt)),Jw(t,i,u,o,s,"F",c,l)}function $_(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=eE(e.unaryFilter.field);return Ew.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=eE(e.unaryFilter.field);return Ew.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=eE(e.unaryFilter.field);return Ew.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=eE(e.unaryFilter.field);return Ew.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Jg()}}(e):void 0!==e.fieldFilter?function(e){return Ew.create(eE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jg()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Sw.create(e.compositeFilter.filters.map((function(e){return $_(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Jg()}}(e.compositeFilter.op))}(e):Jg()}function Y_(e){return S_[e]}function J_(e){return I_[e]}function X_(e){return T_[e]}function Z_(e){return{fieldPath:e.canonicalString()}}function eE(e){return wk.fromServerFormat(e.fieldPath)}function tE(e){return e instanceof Ew?function(e){if("=="===e.op){if(uw(e.value))return{unaryFilter:{field:Z_(e.field),op:"IS_NAN"}};if(ow(e.value))return{unaryFilter:{field:Z_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uw(e.value))return{unaryFilter:{field:Z_(e.field),op:"IS_NOT_NAN"}};if(ow(e.value))return{unaryFilter:{field:Z_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Z_(e.field),op:J_(e.op),value:e.value}}}(e):e instanceof Sw?function(e){var t=e.getFilters().map((function(e){return tE(e)}));return 1===t.length?t[0]:{compositeFilter:{op:X_(e.op),filters:t}}}(e):Jg()}function nE(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function rE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var iE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yk.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:yk.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ub.EMPTY_BYTE_STRING;kn(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return wn(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),aE=wn((function e(t){kn(this,e),this.se=t}));function oE(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:L_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:A_(e,t.version.toTimestamp()),createTime:A_(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sE(t.version)};else{if(!t.isUnknownDocument())return Jg();r.unknownDocument={path:n.path.toArray(),version:sE(t.version)}}return r}function uE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sE(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function cE(e){var t=new mk(e.seconds,e.nanoseconds);return yk.fromTimestamp(t)}function lE(e,t){for(var n=(t.baseMutations||[]).map((function(t){return W_(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return W_(e.se,t)})),u=mk.fromMillis(t.localWriteTimeMs);return new s_(t.batchId,u,n,o)}function fE(e){var t,n,r=cE(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?cE(e.lastLimboFreeSnapshotVersion):yk.min();return void 0!==e.query.documents?(Xg(1===(n=e.query).documents.length),t=ix(Xw(U_(n.documents[0])))):t=function(e){return ix(Q_(e))}(e.query),new iE(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ub.fromBase64String(e.resumeToken))}function hE(e,t){var n,r=sE(t.snapshotVersion),i=sE(t.lastLimboFreeSnapshotVersion);n=Gw(t.target)?G_(e.se,t.target):H_(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Kw(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function dE(e){var t=Q_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ox(t,t.limit,"L"):t}function pE(e,t){return new l_(t.largestBatchId,W_(e.se,t.overlayMutation))}function vE(e,t){var n=t.path.lastSegment();return[e,Xk(t.path.popLast()),n]}function mE(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:sE(r.readTime),documentKey:Xk(r.documentKey.path),largestBatchId:r.largestBatchId}}var yE=function(){function e(){kn(this,e)}return wn(e,[{key:"getBundleMetadata",value:function(e,t){return gE(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:cE(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return gE(e).put({bundleId:(n=t).id,createTime:sE(R_(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return kE(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:dE(t.bundledQuery),readTime:cE(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return kE(e).put(function(e){return{name:e.name,readTime:sE(R_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function gE(e){return Ib(e,"bundles")}function kE(e){return Ib(e,"namedQueries")}var bE=function(){function e(t,n){kn(this,e),this.serializer=t,this.userId=n}return wn(e,[{key:"getOverlay",value:function(e,t){var n=this;return wE(e).get(vE(this.userId,t)).next((function(e){return e?pE(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=bx();return Mk.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new l_(t,a);i.push(r.re(e,o))})),Mk.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Xk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(wE(e).J("collectionPathOverlayIndex",i))})),Mk.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=bx(),a=Xk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return wE(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=qr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=pE(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=bx(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wE(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=pE(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return wE(e).put(function(e,t,n){var r=Ft(vE(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:K_(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function wE(e){return Ib(e,"documentOverlays")}var xE=function(){function e(){kn(this,e)}return wn(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Bb(e.integerValue));else if("doubleValue"in e){var n=Bb(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Yk(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(zb(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?lw(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Jg()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=qr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),xk.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function _E(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function EE(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=_E(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}xE.pe=new xE;var SE=function(){function e(){kn(this,e),this.buffer=new Uint8Array(1024),this.position=0}return wn(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=qr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=qr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=EE(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=EE(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),IE=function(){function e(t){kn(this,e),this.Me=t}return wn(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),TE=function(){function e(t){kn(this,e),this.Me=t}return wn(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),CE=function(){function e(){kn(this,e),this.Me=new SE,this.Fe=new IE(this.Me),this.Be=new TE(this.Me)}return wn(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),AE=function(){function e(t,n,r,i){kn(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return wn(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function NE(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=OE(e.arrayValue,t.arrayValue))?n:0!==(n=OE(e.directionalValue,t.directionalValue))?n:xk.comparator(e.documentKey,t.documentKey)}function OE(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var RE=function(){function e(t){kn(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=qr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(a){r.e(a)}finally{r.f()}}return wn(e,[{key:"Qe",value:function(e){Xg(e.collectionGroup===this.collectionId);var t=Ek(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Sk(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=qr(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function PE(e){var t,n;if(Xg(e instanceof Ew||e instanceof Sw),e instanceof Ew){if(e instanceof jw){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ew.create(e.field,"==",t)})))||[];return Sw.create(r,"or")}return e}var i=e.filters.map((function(e){return PE(e)}));return Sw.create(i,e.op)}function DE(e){if(0===e.getFilters().length)return[];var t=UE(PE(e));return Xg(FE(t)),LE(t)||ME(t)?[t]:t.getFilters()}function LE(e){return e instanceof Ew}function ME(e){return e instanceof Sw&&Cw(e)}function FE(e){return LE(e)||ME(e)||function(e){if(e instanceof Sw&&Tw(e)){var t,n=qr(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!LE(r)&&!ME(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function UE(e){if(Xg(e instanceof Ew||e instanceof Sw),e instanceof Ew)return e;if(1===e.filters.length)return UE(e.filters[0]);var t=e.filters.map((function(e){return UE(e)})),n=Sw.create(t,e.op);return FE(n=BE(n))?n:(Xg(n instanceof Sw),Xg(Iw(n)),Xg(n.filters.length>1),n.filters.reduce((function(e,t){return jE(e,t)})))}function jE(e,t){var n;return Xg(e instanceof Ew||e instanceof Sw),Xg(t instanceof Ew||t instanceof Sw),n=e instanceof Ew?t instanceof Ew?function(e,t){return Sw.create([e,t],"and")}(e,t):VE(e,t):t instanceof Ew?VE(t,e):function(e,t){if(Xg(e.filters.length>0&&t.filters.length>0),Iw(e)&&Iw(t))return Rw(e,t.getFilters());var n=Tw(e)?e:t,r=Tw(e)?t:e,i=n.filters.map((function(e){return jE(e,r)}));return Sw.create(i,"or")}(e,t),BE(n)}function VE(e,t){if(Iw(t))return Rw(t,e.getFilters());var n=t.filters.map((function(t){return jE(e,t)}));return Sw.create(n,"or")}function BE(e){if(Xg(e instanceof Ew||e instanceof Sw),e instanceof Ew)return e;var t=e.getFilters();if(1===t.length)return BE(t[0]);if(Aw(e))return e;var n=t.map((function(e){return BE(e)})),r=[];return n.forEach((function(t){t instanceof Ew?r.push(t):t instanceof Sw&&(t.op===e.op?r.push.apply(r,Pr(t.filters)):r.push(t))})),1===r.length?r[0]:Sw.create(r,e.op)}var zE=function(){function e(){kn(this,e),this.He=new qE}return wn(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Mk.resolve()}},{key:"getCollectionParents",value:function(e,t){return Mk.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Mk.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Mk.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Mk.resolve(null)}},{key:"getIndexType",value:function(e,t){return Mk.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Mk.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Mk.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Mk.resolve(Nk.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Mk.resolve(Nk.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Mk.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Mk.resolve()}}]),e}(),qE=function(){function e(){kn(this,e),this.index={}}return wn(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pb(kk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Pb(kk.comparator)).toArray()}}]),e}(),KE=new Uint8Array(0),WE=function(){function e(t,n){kn(this,e),this.user=t,this.databaseId=n,this.Je=new qE,this.Ye=new px((function(e){return Kw(e)}),(function(e,t){return Ww(e,t)})),this.uid=t.uid||""}return wn(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:Xk(i)};return GE(e).put(a)}return Mk.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[vk(t),""],!1,!0);return GE(e).j(r).next((function(e){var r,i=qr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(tb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=QE(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=$E(e);return a.next((function(e){o.put(mE(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=QE(e),r=$E(e),i=HE(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=HE(e),i=!0,a=new Map;return Mk.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Sx(),o=[];return Mk.forEach(a,(function(i,a){var u;Hg("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Kw(t)));var s=function(e,t){var n=Ek(t);if(void 0===n)return null;var r,i=qr(Hw(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=qr(Sk(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=qr(Hw(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=qr(Sk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Qw(e,o.fieldPath,e.startAt):$w(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new gw(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=qr(Sk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?$w(e,o.fieldPath,e.endAt):Qw(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new gw(r,i)}(a,i),h=n.tn(i,a,l),d=n.tn(i,a,f),p=n.en(i,a,c),v=n.nn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Mk.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=xk.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Mk.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:DE(Sw.create(e.filters,"and")).map((function(t){return qw(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):KE,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),p=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,Pr(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new AE(e,xk.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new AE(e,xk.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new RE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=qr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Mk.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Pb(wk.comparator),r=!1,i=qr(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=qr(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=qr(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new CE,i=qr(Sk(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Le(a.kind);xE.pe.oe(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new CE;return xE.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new CE;return xE.pe.oe(rw(this.databaseId,t),n.Le(function(e){var t=Sk(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new CE);var i,a=0,o=qr(Sk(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=qr(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.an(t,s.fieldPath)&&aw(c))r=this.hn(r,s,c);else{var h=f.Le(s.kind);xE.pe.oe(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=Pr(e),a=[],o=qr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=qr(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new CE;f.seed(l.$e()),xE.pe.oe(s,f.Le(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ew&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=QE(e),i=$E(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Mk.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Tk(t.sequenceNumber,new Nk(cE(t.readTime),new xk(tb(t.documentKey)),t.largestBatchId)):Tk.empty(),r=e.fields.map((function(e){var t=Ft(e,2),n=t[0],r=t[1];return new Ik(wk.fromServerFormat(n),r)}));return new _k(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:dk(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=QE(e),a=$E(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Mk.forEach(t,(function(t){return a.put(mE(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Mk.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Mk.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Mk.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Mk.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return HE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return HE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=HE(e),i=new Pb(NE);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new AE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Pb(NE),r=this.un(t,e);if(null==r)return n;var i=Ek(t);if(null!=i){var a=e.data.field(i.fieldPath);if(aw(a)){var o,u=qr(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new AE(t.indexId,e.key,this.sn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new AE(t.indexId,e.key,KE,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Hg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Lb(a),s=Lb(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Lb(o)):l?(i(u),u=Lb(a)):(u=Lb(a),s=Lb(o))}}(r,i,NE,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),Mk.waitFor(o)}},{key:"fn",value:function(e){var t=1;return $E(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return NE(e,t)})).filter((function(e,t,n){return!t||0!==NE(e,n[t-1])}));var r=[];r.push(e);var i,a=qr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=NE(o,e),s=NE(o,t);if(0===u)r[0]=e.qe();else if(u>0&&s<0)r.push(o),r.push(o.qe());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,KE,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,KE,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"yn",value:function(e,t){return NE(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(YE)}},{key:"getMinOffset",value:function(e,t){var n=this;return Mk.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||Jg()}))})).next(YE)}}]),e}();function GE(e){return Ib(e,"collectionParents")}function HE(e){return Ib(e,"indexEntries")}function QE(e){return Ib(e,"indexConfiguration")}function $E(e){return Ib(e,"indexState")}function YE(e){Xg(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ok(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Nk(t.readTime,t.documentKey,n)}var JE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XE=function(){function e(t,n,r){kn(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return wn(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ZE(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Xg(1===u)})));var c,l=[],f=qr(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ib(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Mk.waitFor(a).next((function(){return l}))}function eS(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Jg();t=e.noDocument}return JSON.stringify(t).length}XE.DEFAULT_COLLECTION_PERCENTILE=10,XE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,XE.DEFAULT=new XE(41943040,XE.DEFAULT_COLLECTION_PERCENTILE,XE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),XE.DISABLED=new XE(-1,0,0);var tS=function(){function e(t,n,r,i){kn(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return wn(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rS(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=iS(e),o=rS(e);return o.add({}).next((function(u){Xg("number"==typeof u);var s,c=new s_(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return K_(e.se,t)})),i=n.mutations.map((function(t){return K_(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Pb((function(e,t){return dk(e.canonicalString(),t.canonicalString())})),d=qr(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ib(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ab))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[u]=c.keys()})),Mk.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return rS(e).get(t).next((function(e){return e?(Xg(e.userId===n.userId),lE(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?Mk.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return rS(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Xg(t.batchId>=r),a=lE(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rS(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rS(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return lE(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=rb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return iS(e).Z({range:i},(function(r,i,o){var u=Ft(r,3),s=u[0],c=u[1],l=u[2],f=tb(c);if(s===n.userId&&t.path.isEqual(f))return rS(e).get(l).next((function(e){if(!e)throw Jg();Xg(e.userId===n.userId),a.push(lE(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pb(dk),i=[];return t.forEach((function(t){var a=rb(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=iS(e).Z({range:o},(function(e,i,a){var o=Ft(e,3),u=o[0],s=o[1],c=o[2],l=tb(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Mk.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=rb(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Pb(dk);return iS(e).Z({range:o},(function(e,t,a){var o=Ft(e,3),s=o[0],c=o[1],l=o[2],f=tb(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(rS(e).get(t).next((function(e){if(null===e)throw Jg();Xg(e.userId===n.userId),r.push(lE(n.serializer,e))})))})),Mk.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ZE(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),Mk.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Mk.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return iS(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=tb(e[1]);i.push(a)}else r.done()})).next((function(){Xg(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return nS(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return aS(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return Xg(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function nS(e,t,n){var r=rb(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return iS(e).Z({range:a,Y:!0},(function(e,n,r){var a=Ft(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function rS(e){return Ib(e,"mutations")}function iS(e){return Ib(e,"documentMutations")}function aS(e){return Ib(e,"mutationQueues")}var oS=function(){function e(t){kn(this,e),this.Rn=t}return wn(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),uS=function(){function e(t,n){kn(this,e),this.referenceDelegate=t,this.serializer=n}return wn(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new oS(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return yk.fromTimestamp(new mk(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return sS(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return Xg(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return sS(e).Z((function(o,u){var s=fE(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Mk.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return sS(e).Z((function(e,n){var r=fE(n);t(r)}))}},{key:"Pn",value:function(e){return cS(e).get("targetGlobalKey").next((function(e){return Xg(null!==e),e}))}},{key:"Vn",value:function(e,t){return cS(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return sS(e).put(hE(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Kw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sS(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=fE(n);Ww(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=lS(e);return t.forEach((function(t){var o=Xk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Mk.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=lS(e);return Mk.forEach(t,(function(t){var a=Xk(t.path);return Mk.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=lS(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lS(e),i=Sx();return r.Z({range:n,Y:!0},(function(e,t,n){var r=tb(e[1]),a=new xk(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Xk(t.path),r=IDBKeyRange.bound([n],[vk(n)],!1,!0),i=0;return lS(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=Ft(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return sS(e).get(t).next((function(e){return e?fE(e):null}))}}]),e}();function sS(e){return Ib(e,"targets")}function cS(e){return Ib(e,"targetGlobal")}function lS(e){return Ib(e,"targetDocuments")}function fS(e,t){var n=Ft(e,2),r=n[0],i=n[1],a=Ft(t,2),o=a[0],u=a[1],s=dk(r,o);return 0===s?dk(i,u):s}var hS=function(){function e(t){kn(this,e),this.Cn=t,this.buffer=new Pb(fS),this.xn=0}return wn(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();fS(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),dS=function(){function e(t,n,r){kn(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return wn(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;Hg("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Bk(e.t0)){e.next=12;break}Hg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Dk(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),pS=function(){function e(t,n){kn(this,e),this.Mn=t,this.params=n}return wn(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Mk.resolve(Qk.ct);var r=new hS(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Hg("LruGarbageCollector","Garbage collection skipped; disabled"),Mk.resolve(JE)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Hg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),JE):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Hg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Gg()<=Va.DEBUG&&Hg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Mk.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),vS=function(){function e(t,n){kn(this,e),this.db=t,this.garbageCollector=function(e,t){return new pS(e,t)}(this,n)}return wn(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return mS(e,n)}},{key:"removeReference",value:function(e,t,n){return mS(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return mS(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return aS(e).X((function(r){return nS(e,r,t).next((function(e){return e&&(n=!0),Mk.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,yk.min()),lS(e).delete([0,Xk(o.path)])}))}));i.push(s)}})).next((function(){return Mk.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return mS(e,t)}},{key:"Un",value:function(e,t){var n,r=lS(e),i=Qk.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=Ft(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Qk.ct&&t(new xk(tb(n)),i),i=s,n=u):i=Qk.ct})).next((function(){i!==Qk.ct&&t(new xk(tb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function mS(e,t){return lS(e).put(function(e,t){return{targetId:0,path:Xk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var yS=function(){function e(){kn(this,e),this.changes=new px((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return wn(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,yw.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Mk.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),gS=function(){function e(t){kn(this,e),this.serializer=t}return wn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return xS(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return xS(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uE(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=yw.newInvalidDocument(t);return xS(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(_S(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:yw.newInvalidDocument(t)};return xS(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(_S(t))},(function(e,i){r={document:n.Qn(t,i),size:eS(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=mx();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=mx(),i=new Nb(xk.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,eS(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return Mk.resolve();var r=new Pb(SS);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(_S(r.first()),_S(r.last())),a=r.getIterator(),o=a.getNext();return xS(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=xk.fromSegments([].concat(Pr(t.prefixPath),[t.collectionGroup,t.documentId]));o&&SS(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(_S(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),uE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xS(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=mx(),o=qr(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Qn(xk.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(lx(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=mx(),o=ES(t,n),u=ES(t,Nk.max());return xS(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(xk.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new bS(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wS(e).get("remoteDocumentGlobalKey").next((function(e){return Xg(!!e),e}))}},{key:"Gn",value:function(e,t){return wS(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=z_(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=xk.fromSegments(t.noDocument.path),i=cE(t.noDocument.readTime);n=yw.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Jg();var a=xk.fromSegments(t.unknownDocument.path),o=cE(t.unknownDocument.version);n=yw.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new mk(e[0],e[1]);return yk.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(yk.min()))return n}return yw.newInvalidDocument(e)}}]),e}();function kS(e){return new gS(e)}var bS=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new px((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return wn(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Pb((function(e,t){return dk(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=oE(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=eS(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=oE(t.Jn.serializer,o.convertToNoDocument(yk.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),Mk.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(yS);function wS(e){return Ib(e,"remoteDocumentGlobal")}function xS(e){return Ib(e,"remoteDocumentsV14")}function _S(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ES(e,t){var n=t.documentKey.path.toArray();return[e,uE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SS(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=dk(n[a],r[a]))return i;return(i=dk(n.length,r.length))||((i=dk(n[n.length-2],r[r.length-2]))||dk(n[n.length-1],r[r.length-1]))}var IS=wn((function e(t,n){kn(this,e),this.overlayedDocument=t,this.mutatedFields=n})),TS=function(){function e(t,n,r,i){kn(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return wn(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Yx(r.mutation,e,Mb.empty(),mk.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Sx()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sx(),i=bx();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=gx();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=bx();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Sx())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=mx(),a=xx(),o=xx();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof e_)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Yx(o.mutation,t,o.mutation.getFieldMask(),mk.now())):a.set(t.key,Mb.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new IS(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=xx(),i=new Nb((function(e,t){return e-t})),a=Sx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=qr(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Mb.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Sx()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=wx();c.forEach((function(e){if(!a.has(e)){var n=Qx(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Mk.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return xk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Mk.resolve(bx()),u=-1,s=a;return o.next((function(t){return Mk.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Mk.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Sx())})).next((function(e){return{batchId:u,changes:kx(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new xk(t)).next((function(e){var t=gx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gx();return this.indexManager.getCollectionParents(e,i).next((function(o){return Mk.forEach(o,(function(o){var u=function(e,t){return new Yw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,yw.newInvalidDocument(r)))}));var n=gx();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Yx(a.mutation,i,Mb.empty(),mk.now()),lx(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),CS=function(){function e(t){kn(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return wn(e,[{key:"getBundleMetadata",value:function(e,t){return Mk.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:R_(n.createTime)}),Mk.resolve()}},{key:"getNamedQuery",value:function(e,t){return Mk.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:dE(e.bundledQuery),readTime:R_(e.readTime)}}(t)),Mk.resolve()}}]),e}(),AS=function(){function e(){kn(this,e),this.overlays=new Nb(xk.comparator),this.ts=new Map}return wn(e,[{key:"getOverlay",value:function(e,t){return Mk.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=bx();return Mk.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Mk.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Mk.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=bx(),i=t.length+1,a=new xk(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Mk.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Nb((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=bx(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=bx(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Mk.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new l_(t,n));var a=this.ts.get(t);void 0===a&&(a=Sx(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),NS=function(){function e(){kn(this,e),this.es=new Pb(OS.ns),this.ss=new Pb(OS.rs)}return wn(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new OS(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new OS(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new xk(new kk([])),r=new OS(n,e),i=new OS(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new xk(new kk([])),n=new OS(t,e),r=new OS(t,e+1),i=Sx();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new OS(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),OS=function(){function e(t,n){kn(this,e),this.key=t,this.ds=n}return wn(e,null,[{key:"ns",value:function(e,t){return xk.comparator(e.key,t.key)||dk(e.ds,t.ds)}},{key:"rs",value:function(e,t){return dk(e.ds,t.ds)||xk.comparator(e.key,t.key)}}]),e}(),RS=function(){function e(t,n){kn(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new Pb(OS.ns)}return wn(e,[{key:"checkEmpty",value:function(e){return Mk.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new s_(i,t,n,r);this.mutationQueue.push(a);var o,u=qr(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new OS(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Mk.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Mk.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Mk.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Mk.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Mk.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new OS(t,0),i=new OS(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Mk.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pb(dk);return t.forEach((function(e){var t=new OS(e,0),i=new OS(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Mk.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;xk.isDocumentKey(i)||(i=i.child(""));var a=new OS(new xk(i),0),o=new Pb(dk);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Mk.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Xg(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Mk.forEach(t.mutations,(function(i){var a=new OS(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new OS(t,0),r=this._s.firstAfterOrEqual(n);return Mk.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Mk.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),PS=function(){function e(t){kn(this,e),this.Ts=t,this.docs=new Nb(xk.comparator),this.size=0}return wn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Mk.resolve(n?n.document.mutableCopy():yw.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=mx();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():yw.newInvalidDocument(e))})),Mk.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=mx(),a=t.path,o=new xk(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ok(Ak(l),n)<=0||(r.has(l.key)||lx(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Mk.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Jg()}},{key:"Es",value:function(e,t){return Mk.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new DS(this)}},{key:"getSize",value:function(e){return Mk.resolve(this.size)}}]),e}(),DS=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).Jn=e,r}return wn(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Mk.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(yS),LS=function(){function e(t){kn(this,e),this.persistence=t,this.As=new px((function(e){return Kw(e)}),Ww),this.lastRemoteSnapshotVersion=yk.min(),this.highestTargetId=0,this.Rs=0,this.vs=new NS,this.targetCount=0,this.bs=oS.vn()}return wn(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Mk.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Mk.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Mk.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Mk.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Mk.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new oS(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Mk.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Mk.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Mk.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Mk.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Mk.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Mk.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Mk.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Mk.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Mk.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Mk.resolve(n)}},{key:"containsKey",value:function(e,t){return Mk.resolve(this.vs.containsKey(t))}}]),e}(),MS=function(){function e(t,n){var r=this;kn(this,e),this.Ps={},this.overlays={},this.Vs=new Qk(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new LS(this),this.indexManager=new zE,this.remoteDocumentCache=new PS((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new aE(n),this.xs=new CS(this.serializer)}return wn(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new AS,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new RS(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Hg("MemoryPersistence","Starting transaction:",e);var i=new FS(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Mk.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),FS=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return wn(n)}(Pk),US=function(){function e(t){kn(this,e),this.persistence=t,this.$s=new NS,this.Ms=null}return wn(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Jg()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Mk.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Mk.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Mk.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mk.forEach(this.Bs,(function(r){var i=xk.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,yk.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Mk.or([function(){return Mk.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),jS=function(){function e(t){kn(this,e),this.serializer=t}return wn(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Fk("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nb,{unique:!0}),e.createObjectStore("documentMutations")}(e),VS(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Mk.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),VS(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yk.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nb,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Mk.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:yb});t.createIndex("collectionPathOverlayIndex",gb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",kb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ob});t.createIndex("documentKeyIndex",ub),t.createIndex("collectionGroupIndex",sb)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:db}).createIndex("sequenceNumberIndex",pb,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:vb}).createIndex("documentKeyIndex",mb,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=eS(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Mk.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Mk.forEach(r,(function(r){Xg(r.userId===n.userId);var i=lE(t.serializer,r);return ZE(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new kk(n),o=function(e){return[0,Xk(e)]}(a);r.push(t.get(o).next((function(n){return n?Mk.resolve():function(n){return t.put({targetId:0,path:Xk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Mk.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:hb});var n=t.store("collectionParents"),r=new qE,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Xk(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new kk(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=Ft(e,3),r=(n[0],n[1]),a=(n[2],tb(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=fE(r),a=hE(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new xk(kk.fromString(i.document.name).popFirst(5)):i.noDocument?xk.fromSegments(i.noDocument.path):i.unknownDocument?xk.fromSegments(i.unknownDocument.path):Jg()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Mk.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=kS(this.serializer),a=new MS(US.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Sx();lE(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Mk.forEach(r,(function(e,r){var o=new qg(r),u=bE.ie(n.serializer,o),s=a.getIndexManager(o),c=tS.ie(o,n.serializer,s,a.referenceDelegate);return new TS(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Sb(t,Qk.ct),e).next()}))}))}}]),e}();function VS(e){e.createObjectStore("targetDocuments",{keyPath:lb}).createIndex("documentTargetsIndex",fb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cb,{unique:!0}),e.createObjectStore("targetGlobal")}var BS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zS=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(kn(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=a,this.window=o,this.document=u,this.Hs=c,this.Js=l,this.Ys=f,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new tk(ek.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vS(this,i),this.si=n+"main",this.serializer=new aE(s),this.ii=new Uk(this.si,this.Ys,new jS(this.serializer)),this.Ds=new uS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kS(this.serializer),this.xs=new yE,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&Qg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return wn(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new tk(ek.FAILED_PRECONDITION,BS);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Qk(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=xt(bt().mark((function n(r){return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=xt(bt().mark((function t(n){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return KS(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Bk(t))return Hg("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Hg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return qS(e).get("owner").next((function(e){return Mk.resolve(t._i(e))}))}},{key:"mi",value:function(e){return KS(e).delete(this.clientId)}},{key:"gi",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i,a=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ib(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Mk.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=qr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?Mk.resolve(!0):qS(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new tk(ek.FAILED_PRECONDITION,BS);return!1}}return!(!t.networkEnabled||!t.inForeground)||KS(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Hg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=xt(bt().mark((function e(){var t=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Sb(e,Qk.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return KS(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return tS.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new WE(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return bE.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Hg("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?Eb:14===i?_b:13===i?xb:12===i?wb:11===i?bb:void Jg();return this.ii.runTransaction(e,o,u,(function(i){return a=new Sb(i,r.Vs?r.Vs.next():Qk.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw Qg("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new tk(ek.FAILED_PRECONDITION,Rk);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return qS(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new tk(ek.FAILED_PRECONDITION,BS)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qS(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=qS(e);return n.get("owner").next((function(e){return t._i(e)?(Hg("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Mk.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Qg("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!ya()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Hg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Qg("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(C){Qg("Failed to set zombie client id.",C)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(C){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Uk.D()}}]),e}();function qS(e){return Ib(e,"owner")}function KS(e){return Ib(e,"clientMetadata")}function WS(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var GS=function(){function e(t,n,r,i){kn(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return wn(e,null,[{key:"Di",value:function(t,n){var r,i=Sx(),a=Sx(),o=qr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),HS=function(){function e(){kn(this,e),this.Ci=!1}return wn(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(Zw(t))return Mk.resolve(null);var r=ix(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ox(t,null,"F"),r=ix(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Sx.apply(void 0,Pr(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,ox(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return Zw(t)||r.isEqual(yk.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Gg()<=Va.DEBUG&&Hg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cx(t)),i.Fi(e,o,t,Ck(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Pb(hx(e));return t.forEach((function(t,r){lx(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Gg()<=Va.DEBUG&&Hg("QueryEngine","Using full collection scan to execute query:",cx(t)),this.xi.getDocumentsMatchingQuery(e,t,Nk.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),QS=function(){function e(t,n,r,i){kn(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new Nb(dk),this.qi=new px((function(e){return Kw(e)}),Ww),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return wn(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TS(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function $S(e,t,n,r){return new QS(e,t,n,r)}function YS(e,t){return JS.apply(this,arguments)}function JS(){return JS=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Sx(),s=qr(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=qr(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=qr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=qr(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),JS.apply(this,arguments)}function XS(e,t){var n=Zg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Mk.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Xg(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Sx(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function ZS(e){var t=Zg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function eI(e,t){var n=Zg(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ub.EMPTY_BYTE_STRING,yk.min()).withLastLimboFreeSnapshotVersion(yk.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=mx(),s=Sx();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(tI(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(yk.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Mk.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function tI(e,t,n){var r=Sx(),i=Sx();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=mx();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(yk.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Hg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function nI(e,t){var n=Zg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function rI(e,t){var n=Zg(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Mk.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new iE(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function iI(e,t,n){return aI.apply(this,arguments)}function aI(){return aI=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Zg(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Bk(e.t1)){e.next=12;break}throw e.t1;case 12:Hg("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),aI.apply(this,arguments)}function oI(e,t,n){var r=Zg(e),i=yk.min(),a=Sx();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Zg(e),i=r.qi.get(n);return void 0!==i?Mk.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,ix(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:yk.min(),n?a:Sx())})).next((function(e){return cI(r,fx(t),e),{documents:e,Wi:a}}))}))}function uI(e,t){var n=Zg(e),r=Zg(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function sI(e,t){var n=Zg(e),r=n.Ui.get(t)||yk.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,Ck(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return cI(n,t,e),e}))}function cI(e,t,n){var r=e.Ui.get(t)||yk.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function lI(e,t,n,r){return fI.apply(this,arguments)}function fI(){return fI=xt(bt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Zg(t),o=Sx(),u=mx(),s=qr(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Hi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,rI(a,function(e){return ix(Xw(kk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return tI(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e,t){return dI.apply(this,arguments)}function dI(){return dI=xt(bt().mark((function e(t,n){var r,i,a,o=arguments;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Sx(),e.next=3,rI(t,ix(dE(n.bundledQuery)));case 3:return i=e.sent,a=Zg(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=R_(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(Ub.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function mI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var yI=function(){function e(t,n,r,i){kn(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return wn(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new tk(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Qg("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gI=function(){function e(t,n,r){kn(this,e),this.targetId=t,this.state=n,this.error=r}return wn(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new tk(i.error.code,i.error.message))),a?new e(t,i.state,r):(Qg("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),kI=function(){function e(t,n){kn(this,e),this.clientId=t,this.activeTargetIds=n}return wn(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Tx(),o=0;i&&o<r.activeTargetIds.length;++o)i=Jk(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Qg("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),bI=function(){function e(t,n){kn(this,e),this.clientId=t,this.onlineState=n}return wn(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Qg("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wI=function(){function e(){kn(this,e),this.activeTargetIds=Tx()}return wn(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),xI=function(){function e(t,n,r,i,a){kn(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Nb(dk),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=pI(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new wI),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return wn(e,[{key:"start",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=qr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pI(this.persistenceKey,i)))&&(o=kI.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(u=this.storage.getItem(this.wr))&&(s=this.gr(u))&&this.yr(s),c=qr(this.ur);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ir(f)}catch(d){c.e(d)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(mI(this.persistenceKey,e));if(n){var r=gI.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(mI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Hg("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Hg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Hg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Hg("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Qg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(xt(bt().mark((function e(){var r,i,a,o,u,s,c;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Qk.ct;if(null!=e)try{var n=JSON.parse(e);Xg("number"==typeof n),t=n}catch(e){Qg("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Qk.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new yI(this.currentUser,e,t,n),i=vI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=vI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=mI(this.persistenceKey,e),i=new gI(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return kI.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yI.Zi(new qg(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return gI.Zi(r,t)}},{key:"gr",value:function(e){return bI.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:Hg("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=Tx();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_I=function(){function e(){kn(this,e),this.Br=new wI,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return wn(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new wI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),EI=function(){function e(){kn(this,e)}return wn(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),SI=function(){function e(){var t=this;kn(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return wn(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Hg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=qr(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){Hg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=qr(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),II=null;function TI(){return null===II?II=268435456+Math.round(2147483648*Math.random()):II++,"0x"+II.toString(16)}var CI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},AI=function(){function e(t){kn(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return wn(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),NI="WebChannelConnection",OI=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return wn(n,[{key:"lo",value:function(e,t,n,r){var i=TI();return new Promise((function(a,o){var u=new Bg;u.setWithCredentials(!0),u.listenOnce(Mg.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Lg.NO_ERROR:var t=u.getResponseJson();Hg(NI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Lg.TIMEOUT:Hg(NI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new tk(ek.DEADLINE_EXCEEDED,"Request time out"));break;case Lg.HTTP_ERROR:var n=u.getStatus();if(Hg(NI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ek).indexOf(t)>=0?t:ek.UNKNOWN}(s.status);o(new tk(c,s.message))}else o(new tk(ek.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new tk(ek.UNAVAILABLE,"Connection failed."));break;default:Jg()}}finally{Hg(NI,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Hg(NI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=TI(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Pg(),o=Dg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new jg({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Hg(NI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new AI({Wr:function(t){f?Hg(NI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Hg(NI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Hg(NI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Vg.EventType.OPEN,(function(){f||Hg(NI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Vg.EventType.CLOSE,(function(){f||(f=!0,Hg(NI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Vg.EventType.ERROR,(function(t){f||(f=!0,$g(NI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new tk(ek.UNAVAILABLE,"The operation could not be completed")))})),d(c,Vg.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Xg(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Hg(NI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=i_[e];if(void 0!==t)return d_(t)}(u),l=o.message;void 0===s&&(s=ek.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new tk(s,l)),c.close()}else Hg(NI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Fg.STAT_EVENT,(function(t){t.stat===Ug.PROXY?Hg(NI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ug.NOPROXY&&Hg(NI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){kn(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return wn(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=TI(),o=this.ao(e,t);Hg("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return Hg("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw $g("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=CI[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function RI(){return"undefined"!=typeof window?window:null}function PI(){return"undefined"!=typeof document?document:null}function DI(e){return new C_(e,!0)}var LI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;kn(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return wn(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Hg("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),MI=function(){function e(t,n,r,i,a,o,u,s){kn(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new LI(t,n)}return wn(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===ek.RESOURCE_EXHAUSTED?(Qg(n.toString()),Qg("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===ek.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Ft(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new tk(ek.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return Hg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(Hg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),FI=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a,o,u){var s;return kn(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return wn(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Jg()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Xg(void 0===t||"string"==typeof t),Ub.fromBase64String(t||"")):(Xg(void 0===t||t instanceof Uint8Array),Ub.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ek.UNKNOWN:d_(e.code);return new tk(t,e.message||"")}(o);n=new b_(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=M_(e,s.document.name),l=R_(s.document.updateTime),f=s.document.createTime?R_(s.document.createTime):yk.min(),h=new vw({mapValue:{fields:s.document.fields}}),d=yw.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new g_(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=M_(e,m.document),g=m.readTime?R_(m.readTime):yk.min(),k=yw.newNoDocument(y,g),b=m.removedTargetIds||[];n=new g_([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=M_(e,w.document),_=w.removedTargetIds||[];n=new g_([],_,x,null)}else{if(!("filter"in t))return Jg();t.filter;var E=t.filter;E.targetId;var S=E.count||0,I=new f_(S),T=E.targetId;n=new k_(T,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return yk.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?yk.min():t.readTime?R_(t.readTime):yk.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=j_(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Gw(r)?{documents:G_(e,r)}:{query:H_(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=N_(e,t.resumeToken):t.snapshotVersion.compareTo(yk.min())>0&&(n.readTime=A_(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jg()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=j_(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(MI),UI=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a,o,u){var s;return kn(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return wn(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,lu(Mr(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Xg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Xg(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?R_(e.updateTime):R_(t);return n.isEqual(yk.min())&&(n=R_(t)),new Kx(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=R_(e.commitTime);return this.listener.Zo(n,t)}return Xg(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=j_(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return K_(t.serializer,e)}))};this.Fo(n)}}]),n}(MI),jI=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a){var o;return kn(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return wn(n,[{key:"nu",value:function(){if(this.eu)throw new tk(ek.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Ft(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ek.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new tk(ek.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Ft(a,2),u=o[0],s=o[1];return i.connection.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ek.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new tk(ek.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return wn((function e(){kn(this,e)}))}());var VI=function(){function e(t,n){kn(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return wn(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Qg(t),this.ru=!1):Hg("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),BI=wn((function e(t,n,r,i,a){var o=this;kn(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=XI(o),!e.t0){e.next=5;break}return Hg("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Zg(t)).du.add(4),e.next=4,KI(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,zI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new VI(r,i)}));function zI(e){return qI.apply(this,arguments)}function qI(){return qI=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!XI(t)){e.next=18;break}n=qr(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),qI.apply(this,arguments)}function KI(e){return WI.apply(this,arguments)}function WI(){return WI=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=qr(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),WI.apply(this,arguments)}function GI(e,t){var n=Zg(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),JI(n)?YI(n):TT(n).No()&&QI(n,t))}function HI(e,t){var n=Zg(e),r=TT(n);n.fu.delete(t),r.No()&&$I(n,t),0===n.fu.size&&(r.No()?r.$o():XI(n)&&n.mu.set("Unknown"))}function QI(e,t){e.gu.Ot(t.targetId),TT(e).jo(t)}function $I(e,t){e.gu.Ot(t),TT(e).Wo(t)}function YI(e){e.gu=new x_({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),TT(e).start(),e.mu.ou()}function JI(e){return XI(e)&&!TT(e).xo()&&e.fu.size>0}function XI(e){return 0===Zg(e).du.size}function ZI(e){e.gu=void 0}function eT(e){return tT.apply(this,arguments)}function tT(){return tT=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){QI(t,e)}));case 1:case"end":return e.stop()}}),e)}))),tT.apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return rT=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ZI(t),JI(t)?(t.mu.au(n),YI(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),rT.apply(this,arguments)}function iT(e,t,n){return aT.apply(this,arguments)}function aT(){return aT=xt(bt().mark((function e(t,n,r){var i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof b_&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=qr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Hg("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,oT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof g_?t.gu.Kt(n):n instanceof k_?t.gu.Jt(n):t.gu.zt(n),r.isEqual(yk.min())){e.next=29;break}return e.prev=14,e.next=17,ZS(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Ub.EMPTY_BYTE_STRING,n.snapshotVersion)),$I(e,t);var r=new iE(n.target,t,1,n.sequenceNumber);QI(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Hg("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,oT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),aT.apply(this,arguments)}function oT(e,t,n){return uT.apply(this,arguments)}function uT(){return uT=xt(bt().mark((function e(t,n,r){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bk(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,KI(t);case 5:t.mu.set("Offline"),r||(r=function(){return ZS(t.localStore)}),t.asyncQueue.enqueueRetryable(xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hg("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,zI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),uT.apply(this,arguments)}function sT(e,t){return t().catch((function(n){return oT(e,n,t)}))}function cT(e){return lT.apply(this,arguments)}function lT(){return lT=xt(bt().mark((function e(t){var n,r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Zg(t),r=CT(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!fT(n)){e.next=19;break}return e.prev=3,e.next=6,nI(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,hT(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,oT(n,e.t0);case 17:e.next=2;break;case 19:dT(n)&&pT(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),lT.apply(this,arguments)}function fT(e){return XI(e)&&e.lu.length<10}function hT(e,t){e.lu.push(t);var n=CT(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function dT(e){return XI(e)&&!CT(e).xo()&&e.lu.length>0}function pT(e){CT(e).start()}function vT(e){return mT.apply(this,arguments)}function mT(){return mT=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:CT(t).tu();case 1:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function yT(e){return gT.apply(this,arguments)}function gT(){return gT=xt(bt().mark((function e(t){var n,r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=CT(t),r=qr(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}function kT(e,t,n){return bT.apply(this,arguments)}function bT(){return bT=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=c_.from(i,n,r),e.next=3,sT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,cT(t);case 5:case"end":return e.stop()}}),e)}))),bT.apply(this,arguments)}function wT(e,t){return xT.apply(this,arguments)}function xT(){return xT=xt(bt().mark((function e(t,n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&CT(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h_(i=n.code)||i===ek.ABORTED){e.next=7;break}return r=t.lu.shift(),CT(t).Oo(),e.next=5,sT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,cT(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:dT(t)&&pT(t);case 5:case"end":return e.stop()}}),e)}))),xT.apply(this,arguments)}function _T(e,t){return ET.apply(this,arguments)}function ET(){return ET=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Zg(t)).asyncQueue.verifyOperationInProgress(),Hg("RemoteStore","RemoteStore received new credentials"),i=XI(r),r.du.add(3),e.next=6,KI(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,zI(r);case 12:case"end":return e.stop()}}),e)}))),ET.apply(this,arguments)}function ST(e,t){return IT.apply(this,arguments)}function IT(){return IT=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zg(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,zI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,KI(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}function TT(e){return e.yu||(e.yu=function(e,t,n){var r=Zg(e);return r.nu(),new FI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:eT.bind(null,e),Zr:nT.bind(null,e),zo:iT.bind(null,e)}),e.wu.push(function(){var t=xt(bt().mark((function t(n){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),JI(e)?YI(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:ZI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function CT(e){return e.pu||(e.pu=function(e,t,n){var r=Zg(e);return r.nu(),new UI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:vT.bind(null,e),Zr:wT.bind(null,e),Xo:yT.bind(null,e),Zo:kT.bind(null,e)}),e.wu.push(function(){var t=xt(bt().mark((function t(n){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,cT(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(Hg("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var AT=function(){function e(t,n,r,i,a){kn(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new nk,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return wn(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tk(ek.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function NT(e,t){if(Qg("AsyncQueue","".concat(t,": ").concat(e)),Bk(e))return new tk(ek.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var OT=function(){function e(t){kn(this,e),this.comparator=t?function(e,n){return t(e,n)||xk.comparator(e.key,n.key)}:function(e,t){return xk.comparator(e.key,t.key)},this.keyedMap=gx(),this.sortedSet=new Nb(this.comparator)}return wn(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),RT=function(){function e(){kn(this,e),this.Iu=new Nb(xk.comparator)}return wn(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Jg():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),PT=function(){function e(t,n,r,i,a,o,u,s,c){kn(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return wn(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ux(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,OT.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),DT=wn((function e(){kn(this,e),this.Eu=void 0,this.listeners=[]})),LT=wn((function e(){kn(this,e),this.queries=new px((function(e){return sx(e)}),ux),this.onlineState="Unknown",this.Au=new Set}));function MT(e,t){return FT.apply(this,arguments)}function FT(){return FT=xt(bt().mark((function e(t,n){var r,i,a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zg(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new DT),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=NT(e.t0,"Initialization of query '".concat(cx(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&zT(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),FT.apply(this,arguments)}function UT(e,t){return jT.apply(this,arguments)}function jT(){return jT=xt(bt().mark((function e(t,n){var r,i,a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zg(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),jT.apply(this,arguments)}function VT(e,t){var n,r=Zg(e),i=!1,a=qr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=qr(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&zT(r)}function BT(e,t,n){var r=Zg(e),i=r.queries.get(t);if(i){var a,o=qr(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function zT(e){e.Au.forEach((function(e){e.next()}))}var qT=function(){function e(t,n,r){kn(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return wn(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=qr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new PT(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=PT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),KT=function(){function e(t,n){kn(this,e),this.Nu=t,this.byteLength=n}return wn(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),WT=function(){function e(t){kn(this,e),this.serializer=t}return wn(e,[{key:"Hi",value:function(e){return M_(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?z_(this.serializer,e.document,!1):yw.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return R_(e)}}]),e}(),GT=function(){function e(t,n,r){kn(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HT(t)}return wn(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=kk.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new WT(this.serializer),i=qr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hi(a.metadata.name),s=qr(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Sx()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lI(this.localStore,new WT(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=qr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,hI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function HT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var QT=wn((function e(t){kn(this,e),this.key=t})),$T=wn((function e(t){kn(this,e),this.key=t})),YT=function(){function e(t,n){kn(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Sx(),this.mutatedKeys=Sx(),this.Ku=hx(t),this.Gu=new OT(this.Ku)}return wn(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new RT,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=lx(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jg()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new PT(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new RT,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Sx(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new $T(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new QT(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Sx();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return PT.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),JT=wn((function e(t,n,r){kn(this,e),this.query=t,this.targetId=n,this.view=r})),XT=wn((function e(t){kn(this,e),this.key=t,this.ec=!1})),ZT=function(){function e(t,n,r,i,a,o){kn(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new px((function(e){return sx(e)}),ux),this.ic=new Map,this.rc=new Set,this.oc=new Nb(xk.comparator),this.uc=new Map,this.cc=new NS,this.ac={},this.hc=new Map,this.lc=oS.bn(),this.onlineState="Unknown",this.fc=void 0}return wn(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function eC(e,t){return tC.apply(this,arguments)}function tC(){return tC=xt(bt().mark((function e(t,n){var r,i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=HC(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,rI(r.localStore,ix(n));case 8:return u=e.sent,r.isPrimaryClient&&GI(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,nC(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),tC.apply(this,arguments)}function nC(e,t,n,r,i){return rC.apply(this,arguments)}function rC(){return rC=xt(bt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=xt(bt().mark((function e(t,n,r,i){var a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,oI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(_C(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,oI(t.localStore,n,!0);case 3:return o=e.sent,u=new YT(n,o.Wi),s=u.zu(o.documents),c=y_.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),_C(t,r,l.Yu),f=new JT(n,r,u),e.abrupt("return",(t.sc.set(n,f),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),rC.apply(this,arguments)}function iC(e,t){return aC.apply(this,arguments)}function aC(){return aC=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zg(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!ux(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,iI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),HI(r.remoteStore,i.targetId),wC(r,i.targetId)})).catch(Dk);case 9:e.next=14;break;case 11:return wC(r,i.targetId),e.next=14,iI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),aC.apply(this,arguments)}function oC(e,t,n){return uC.apply(this,arguments)}function uC(){return uC=xt(bt().mark((function e(t,n,r){var i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=QC(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Zg(e),a=mk.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Sx());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=mx(),s=Sx();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=qr(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Jx(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new e_(c.key,l,mw(l.value.mapValue),Wx.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:kx(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Nb(dk)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,IC(i,a.changes);case 9:return e.next=11,cT(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=NT(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),uC.apply(this,arguments)}function sC(e,t){return cC.apply(this,arguments)}function cC(){return cC=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),e.prev=1,e.next=4,eI(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Xg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Xg(n.ec):e.removedDocuments.size>0&&(Xg(n.ec),n.ec=!1))})),e.next=8,IC(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Dk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),cC.apply(this,arguments)}function lC(e,t,n){var r=Zg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Zg(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=qr(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&zT(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function fC(e,t,n){return hC.apply(this,arguments)}function hC(){return hC=xt(bt().mark((function e(t,n,r){var i,a,o,u,s,c;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Zg(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Nb(xk.comparator)).insert(o,yw.newNoDocument(o,yk.min())),s=Sx().add(o),c=new m_(yk.min(),new Map,new Pb(dk),u,s),e.next=9,sC(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),SC(i),e.next=16;break;case 14:return e.next=16,iI(i.localStore,n,!1).then((function(){return wC(i,n,r)})).catch(Dk);case 16:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function dC(e,t){return pC.apply(this,arguments)}function pC(){return pC=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),i=n.batch.batchId,e.prev=1,e.next=4,XS(r.localStore,n);case 4:return a=e.sent,bC(r,i,null),kC(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,IC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Dk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),pC.apply(this,arguments)}function vC(e,t,n){return mC.apply(this,arguments)}function mC(){return mC=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zg(t),e.prev=1,e.next=4,function(e,t){var n=Zg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Xg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,bC(i,n,r),kC(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,IC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Dk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),mC.apply(this,arguments)}function yC(e,t){return gC.apply(this,arguments)}function gC(){return gC=xt(bt().mark((function e(t,n){var r,i,a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return XI((r=Zg(t)).remoteStore)||Hg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Zg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=NT(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),gC.apply(this,arguments)}function kC(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function bC(e,t,n){var r=Zg(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function wC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=qr(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||xC(e,t)}))}function xC(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(HI(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),SC(e))}function _C(e,t,n){var r,i=qr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof QT?(e.cc.addReference(a.key,t),EC(e,a)):a instanceof $T?(Hg("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||xC(e,a.key)):Jg()}}catch(o){i.e(o)}finally{i.f()}}function EC(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Hg("SyncEngine","New document in limbo: "+n),e.rc.add(r),SC(e))}function SC(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new xk(kk.fromString(t)),r=e.lc.next();e.uc.set(r,new XT(n)),e.oc=e.oc.insert(n,r),GI(e.remoteStore,new iE(ix(Xw(n.path)),r,2,Qk.ct))}}function IC(e,t,n){return TC.apply(this,arguments)}function TC(){return TC=xt(bt().mark((function e(t,n,r){var i,a,o,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Zg(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=GS.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.zo(a),e.next=9,function(){var e=xt(bt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Mk.forEach(n,(function(t){return Mk.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Mk.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Bk(e.t0)){e.next=10;break}throw e.t0;case 10:Hg("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=qr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Li.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),TC.apply(this,arguments)}function CC(e,t){return AC.apply(this,arguments)}function AC(){return AC=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Zg(t)).currentUser.isEqual(n)){e.next=11;break}return Hg("SyncEngine","User change. New user:",n.toKey()),e.next=5,YS(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new tk(ek.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,IC(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),AC.apply(this,arguments)}function NC(e,t){var n=Zg(e),r=n.uc.get(t);if(r&&r.ec)return Sx().add(r.key);var i=Sx(),a=n.ic.get(t);if(!a)return i;var o,u=qr(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function OC(e,t){return RC.apply(this,arguments)}function RC(){return RC=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),e.next=3,oI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&_C(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),RC.apply(this,arguments)}function PC(e,t){return DC.apply(this,arguments)}function DC(){return DC=xt(bt().mark((function e(t,n){var r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),e.abrupt("return",sI(r.localStore,n).then((function(e){return IC(r,e)})));case 2:case"end":return e.stop()}}),e)}))),DC.apply(this,arguments)}function LC(e,t,n,r){return MC.apply(this,arguments)}function MC(){return MC=xt(bt().mark((function e(t,n,r,i){var a,o;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zg(t),e.next=3,function(e,t){var n=Zg(e),r=Zg(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Mk.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,cT(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(bC(a,n,i||null),kC(a,n),function(e,t){Zg(Zg(e).mutationQueue).En(t)}(a.localStore,n)):Jg();case 11:return e.next=13,IC(a,o);case 13:e.next=16;break;case 15:Hg("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),MC.apply(this,arguments)}function FC(e,t){return UC.apply(this,arguments)}function UC(){return UC=xt(bt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(HC(r=Zg(t)),QC(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,jC(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,ST(r.remoteStore,!0);case 9:o=qr(a);try{for(o.s();!(u=o.n()).done;)s=u.value,GI(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return wC(r,t),iI(r.localStore,t,!0)})),HI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,jC(r,c);case 21:return function(e){var t=Zg(e);t.uc.forEach((function(e,n){HI(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new Nb(xk.comparator)}(r),r.fc=!1,e.next=25,ST(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),UC.apply(this,arguments)}function jC(e,t,n){return VC.apply(this,arguments)}function VC(){return VC=xt(bt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Zg(t),a=[],o=[],u=qr(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ic.get(c))||0===f.length){e.next=34;break}return e.next=11,rI(i.localStore,ix(f[0]));case 11:l=e.sent,h=qr(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.sc.get(p),e.next=20,OC(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,uI(i.localStore,c);case 36:return y=e.sent,e.next=39,rI(i.localStore,y);case 39:return l=e.sent,e.next=42,nC(i,BC(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),VC.apply(this,arguments)}function BC(e){return Jw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function zC(e){var t=Zg(e);return Zg(Zg(t.localStore).persistence).bi()}function qC(e,t,n,r){return KC.apply(this,arguments)}function KC(){return KC=xt(bt().mark((function e(t,n,r,i){var a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Zg(t)).fc){e.next=3;break}return e.abrupt("return",void Hg("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,sI(a.localStore,fx(o[0]));case 10:return u=e.sent,s=m_.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ub.EMPTY_BYTE_STRING),e.next=14,IC(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,iI(a.localStore,n,!0);case 17:return wC(a,n,i),e.abrupt("break",20);case 19:Jg();case 20:case"end":return e.stop()}}),e)}))),KC.apply(this,arguments)}function WC(e,t,n){return GC.apply(this,arguments)}function GC(){return GC=xt(bt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=HC(t)).fc){e.next=45;break}a=qr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return Hg("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,uI(i.localStore,u);case 12:return s=e.sent,e.next=15,rI(i.localStore,s);case 15:return c=e.sent,e.next=18,nC(i,BC(s),c.targetId,!1,c.resumeToken);case 18:GI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=qr(r),e.prev=30,h=bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,iI(i.localStore,t,!1).then((function(){HI(i.remoteStore,t),wC(i,t)})).catch(Dk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),GC.apply(this,arguments)}function HC(e){var t=Zg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fC.bind(null,t),t.nc.zo=VT.bind(null,t.eventManager),t.nc.wc=BT.bind(null,t.eventManager),t}function QC(e){var t=Zg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vC.bind(null,t),t}function $C(e,t,n){var r=Zg(e);(function(){var e=xt(bt().mark((function e(t,n,r){var i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Zg(e),r=R_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(HT(i)),a=new GT(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,IC(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Zg(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",($g("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var YC=function(){function e(){kn(this,e),this.synchronizeTabs=!1}return wn(e,[{key:"initialize",value:function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=DI(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return $S(this.persistence,new HS,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new MS(US.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new _I}},{key:"terminate",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),JC=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this)).mc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return wn(n,[{key:"initialize",value:function(){var e=xt(bt().mark((function e(t){var r=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(Mr(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,QC(this.mc.syncEngine);case 6:return e.next=8,cT(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return $S(this.persistence,new HS,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new dS(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Hk(t,this.persistence);return new Gk(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=WS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?XE.withCacheSize(this.cacheSizeBytes):XE.DEFAULT;return new zS(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,RI(),PI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new _I}}]),n}(YC),XC=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return wn(n,[{key:"initialize",value:function(){var e=xt(bt().mark((function e(t){var r,i=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu(Mr(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof xI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:LC.bind(null,r),Mr:qC.bind(null,r),Fr:WC.bind(null,r),bi:zC.bind(null,r),Or:PC.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FC(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=RI();if(!xI.D(t))throw new tk(ek.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=WS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(JC),ZC=function(){function e(){kn(this,e)}return wn(e,[{key:"initialize",value:function(){var e=xt(bt().mark((function e(t,n){var r=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return lC(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),e.next=12,ST(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new LT}},{key:"createDatastore",value:function(e){var t,n=DI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new OI(t));return function(e,t,n,r){return new jI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return lC(o.syncEngine,e,0)},a=SI.D()?new SI:new EI,new BI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ZT(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zg(t),Hg("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,KI(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function eA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return xt(bt().mark((function r(){var i;return bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var tA=function(){function e(t){kn(this,e),this.observer=t,this.muted=!1}return wn(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Qg("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),nA=function(){function e(t,n){var r=this;kn(this,e),this.Ic=t,this.serializer=n,this.metadata=new nk,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return wn(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=xt(bt().mark((function e(){var t,n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new KT(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=xt(bt().mark((function e(){var t,n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=xt(bt().mark((function e(){var t,n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),rA=function(){function e(t){kn(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return wn(e,[{key:"lookup",value:function(){var e=xt(bt().mark((function e(t){var n,r=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new tk(ek.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=xt(bt().mark((function e(t,n){var r,i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),i=j_(r.serializer)+"/documents",a={documents:n.map((function(e){return L_(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=q_(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Xg(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new o_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=xt(bt().mark((function e(){var t,n=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=xk.fromPath(t);n.mutations.push(new u_(r,n.precondition(r)))})),e.next=7,function(){var e=xt(bt().mark((function e(t,n){var r,i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg(t),i=j_(r.serializer)+"/documents",a={writes:n.map((function(e){return K_(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jg();t=yk.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new tk(ek.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yk.min())?Wx.exists(!1):Wx.updateTime(t):Wx.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yk.min()))throw new tk(ek.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wx.updateTime(t)}return Wx.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),iA=function(){function e(t,n,r,i,a){kn(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new LI(this.asyncQueue,"transaction_retry")}return wn(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(xt(bt().mark((function t(){var n,r;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new rA(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!$k(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!h_(t)}return!1}}]),e}(),aA=function(){function e(t,n,r,i){var a=this;kn(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qg.UNAUTHENTICATED,this.clientId=hk.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hg("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Hg("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return wn(e,[{key:"getConfiguration",value:function(){var e=xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new tk(ek.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new nk;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(xt(bt().mark((function n(){var r;return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=NT(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function oA(e,t){return uA.apply(this,arguments)}function uA(){return uA=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Hg("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,YS(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),uA.apply(this,arguments)}function sA(e,t){return cA.apply(this,arguments)}function cA(){return cA=xt(bt().mark((function e(t,n){var r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,fA(t);case 3:return r=e.sent,Hg("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return _T(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return _T(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cA.apply(this,arguments)}function lA(e){return"FirebaseError"===e.name?e.code===ek.FAILED_PRECONDITION||e.code===ek.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function fA(e){return hA.apply(this,arguments)}function hA(){return hA=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Hg("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,oA(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),lA(n=e.t0)){e.next=13;break}throw n;case 13:return $g("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,oA(t,new YC);case 16:e.next=21;break;case 18:return Hg("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,oA(t,new YC);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),hA.apply(this,arguments)}function dA(e){return pA.apply(this,arguments)}function pA(){return pA=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Hg("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,sA(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Hg("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,sA(t,new ZC);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),pA.apply(this,arguments)}function vA(e){return fA(e).then((function(e){return e.persistence}))}function mA(e){return fA(e).then((function(e){return e.localStore}))}function yA(e){return dA(e).then((function(e){return e.remoteStore}))}function gA(e){return dA(e).then((function(e){return e.syncEngine}))}function kA(e){return dA(e).then((function(e){return e.datastore}))}function bA(e){return wA.apply(this,arguments)}function wA(){return wA=xt(bt().mark((function e(t){var n,r;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dA(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=eC.bind(null,n.syncEngine),r.onUnlisten=iC.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),wA.apply(this,arguments)}function xA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function i(){return bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tA({next:function(a){t.enqueueAndForget((function(){return UT(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new tk(ek.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new tk(ek.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new qT(Xw(n.path),a,{includeMetadataChanges:!0,xu:!0});return MT(e,o)},i.next=3,bA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function _A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function i(){return bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tA({next:function(n){t.enqueueAndForget((function(){return UT(e,o)})),n.fromCache&&"server"===r.source?i.reject(new tk(ek.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new qT(n,a,{includeMetadataChanges:!0,xu:!0});return MT(e,o)},i.next=3,bA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var EA=new Map;function SA(e,t,n){if(!n)throw new tk(ek.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function IA(e,t,n,r){if(!0===t&&!0===r)throw new tk(ek.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function TA(e){if(!xk.isDocumentKey(e))throw new tk(ek.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function CA(e){if(xk.isDocumentKey(e))throw new tk(ek.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function AA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Jg()}function NA(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tk(ek.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=AA(e);throw new tk(ek.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function OA(e,t){if(t<=0)throw new tk(ek.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var RA=function(){function e(t){var n;if(kn(this,e),void 0===t.host){if(void 0!==t.ssl)throw new tk(ek.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new tk(ek.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,IA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return wn(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),PA=function(){function e(t,n,r,i){kn(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RA({}),this._settingsFrozen=!1}return wn(e,[{key:"app",get:function(){if(!this._app)throw new tk(ek.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new tk(ek.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RA(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ik;switch(e.type){case"firstParty":return new sk(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tk(ek.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=EA.get(e);t&&(Hg("ComponentProvider","Removing Datastore"),EA.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function DA(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=NA(e,PA))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&$g("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=qg.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ca(JSON.stringify({alg:"none",type:"JWT"})),ca(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new tk(ek.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qg(s)}e._authCredentials=new ak(new rk(o,u))}}var LA=function(){function e(t,n,r){kn(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return wn(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new FA(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),MA=function(){function e(t,n,r){kn(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return wn(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),FA=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this,e,r,Xw(i)))._path=i,a.type="collection",a}return wn(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new LA(this.firestore,null,new xk(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(MA);function UA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=La(e),SA("collection","path",t),e instanceof PA){var a=kk.fromString.apply(kk,[t].concat(r));return CA(a),new FA(e,null,a)}if(!(e instanceof LA||e instanceof FA))throw new tk(ek.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(kk.fromString.apply(kk,[t].concat(r)));return CA(o),new FA(e.firestore,null,o)}function jA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=La(e),1===arguments.length&&(t=hk.A()),SA("doc","path",t),e instanceof PA){var a=kk.fromString.apply(kk,[t].concat(r));return TA(a),new LA(e,null,new xk(a))}if(!(e instanceof LA||e instanceof FA))throw new tk(ek.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(kk.fromString.apply(kk,[t].concat(r)));return TA(o),new LA(e.firestore,e instanceof FA?e.converter:null,new xk(o))}function VA(e,t){return e=La(e),t=La(t),(e instanceof LA||e instanceof FA)&&(t instanceof LA||t instanceof FA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function BA(e,t){return e=La(e),t=La(t),e instanceof MA&&t instanceof MA&&e.firestore===t.firestore&&ux(e._query,t._query)&&e.converter===t.converter}var zA=function(){function e(){var t=this;kn(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new LI(this,"async_queue_retry"),this.qc=function(){var e=PI();e&&Hg("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=PI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return wn(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=PI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new nk;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=xt(bt().mark((function e(){var t=this;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Bk(e.t0)){e.next=12;break}throw e.t0;case 12:Hg("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Qg("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=AT.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Jg()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=xt(bt().mark((function e(){var t;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=qr(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=qr(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function qA(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=qr(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var KA=function(){function e(){kn(this,e),this._progressObserver={},this._taskCompletionResolver=new nk,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return wn(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),WA=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a){var o;return kn(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new zA,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return wn(n,[{key:"_terminate",value:function(){return this._firestoreClient||HA(this),this._firestoreClient.terminate()}}]),n}(PA);function GA(e){return e._firestoreClient||HA(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function HA(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Gb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new aA(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function QA(e,t,n){var r=new nk;return e.asyncQueue.enqueue(xt(bt().mark((function i(){var a;return bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,oA(e,n);case 3:return i.next=5,sA(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),lA(a=i.t0)){i.next=13;break}throw a;case 13:$g("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function $A(e){return function(e){return e.asyncQueue.enqueue(xt(bt().mark((function t(){var n,r;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vA(e);case 2:return n=t.sent,t.next=5,yA(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Zg(e);return t.du.delete(0),zI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(GA(e=NA(e,WA)))}function YA(e){return function(e){return e.asyncQueue.enqueue(xt(bt().mark((function t(){var n,r;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vA(e);case 2:return n=t.sent,t.next=5,yA(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Zg(t)).du.add(0),e.next=4,KI(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(GA(e=NA(e,WA)))}function JA(e,t){var n=GA(e=NA(e,WA)),r=new KA;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new nA(e,t)}(function(e,t){if(e instanceof Uint8Array)return eA(e,t);if(e instanceof ArrayBuffer)return eA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,DI(t));e.asyncQueue.enqueueAndForget(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$C,t.next=3,gA(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function XA(e,t){return function(e,t){return e.asyncQueue.enqueue(xt(bt().mark((function n(){return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Zg(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,mA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(GA(e=NA(e,WA)),t).then((function(t){return t?new MA(e,null,t.query):null}))}function ZA(e){if(e._initialized||e._terminated)throw new tk(ek.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var eN=function(){function e(t){kn(this,e),this._byteString=t}return wn(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ub.fromBase64String(t))}catch(t){throw new tk(ek.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ub.fromUint8Array(t))}}]),e}(),tN=function(){function e(){kn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new tk(ek.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wk(n)}return wn(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var nN=wn((function e(t){kn(this,e),this._methodName=t})),rN=function(){function e(t,n){if(kn(this,e),!isFinite(t)||t<-90||t>90)throw new tk(ek.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new tk(ek.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return wn(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return dk(this._lat,e._lat)||dk(this._long,e._long)}}]),e}(),iN=/^__.*__$/,aN=function(){function e(t,n,r){kn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return wn(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new e_(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zx(e,this.data,t,this.fieldTransforms)}}]),e}(),oN=function(){function e(t,n,r){kn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return wn(e,[{key:"toMutation",value:function(e,t){return new e_(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function uN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jg()}}var sN=function(){function e(t,n,r,i,a,o){kn(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return wn(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return CN(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(uN(this.Yc)&&iN.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),cN=function(){function e(t,n,r){kn(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||DI(t)}return wn(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sN({Yc:e,methodName:t,oa:n,path:wk.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function lN(e){var t=e._freezeSettings(),n=DI(e._databaseId);return new cN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fN(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);EN("Data must be an object, but it was:",o,r);var u,s,c=xN(r,o);if(a.merge)u=new Mb(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=qr(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=SN(t,l.value,n);if(!o.contains(d))throw new tk(ek.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));AN(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Mb(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new aN(new vw(c),u,s)}var hN=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nN);function dN(e,t,n){return new sN({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var pN=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"_toFieldTransform",value:function(e){return new qx(e.path,new Lx)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nN),vN=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e)).ca=r,i}return wn(n,[{key:"_toFieldTransform",value:function(e){var t=dN(this,e,!0),n=this.ca.map((function(e){return wN(e,t)})),r=new Mx(n);return new qx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nN),mN=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e)).ca=r,i}return wn(n,[{key:"_toFieldTransform",value:function(e){var t=dN(this,e,!0),n=this.ca.map((function(e){return wN(e,t)})),r=new Ux(n);return new qx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nN),yN=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e)).aa=r,i}return wn(n,[{key:"_toFieldTransform",value:function(e){var t=new Vx(e.serializer,Nx(e.serializer,this.aa));return new qx(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nN);function gN(e,t,n,r){var i=e.ua(1,t,n);EN("Data must be an object, but it was:",i,r);var a=[],o=vw.empty();Cb(r,(function(e,r){var u=TN(t,e,n);r=La(r);var s=i.na(u);if(r instanceof hN)a.push(u);else{var c=wN(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Mb(a);return new oN(o,u,i.fieldTransforms)}function kN(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[SN(t,r,n)],s=[i];if(a.length%2!=0)throw new tk(ek.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(SN(t,a[c])),s.push(a[c+1]);for(var l=[],f=vw.empty(),h=u.length-1;h>=0;--h)if(!AN(l,u[h])){var d=u[h],p=s[h];p=La(p);var v=o.na(d);if(p instanceof hN)l.push(d);else{var m=wN(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Mb(l);return new oN(f,y,o.fieldTransforms)}function bN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wN(n,e.ua(r?4:3,t))}function wN(e,t){if(_N(e=La(e)))return EN("Unsupported field value:",t,e),xN(e,t);if(e instanceof nN)return function(e,t){if(!uN(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=qr(e);try{for(a.s();!(n=a.n()).done;){var o=wN(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=La(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nx(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=mk.fromDate(e);return{timestampValue:A_(t.serializer,n)}}if(e instanceof mk){var r=new mk(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:A_(t.serializer,r)}}if(e instanceof rN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eN)return{bytesValue:N_(t.serializer,e._byteString)};if(e instanceof LA){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:P_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(AA(e)))}(e,t)}function xN(e,t){var n={};return Ab(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cb(e,(function(e,r){var i=wN(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _N(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mk||e instanceof rN||e instanceof eN||e instanceof LA||e instanceof nN)}function EN(e,t,n){if(!_N(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=AA(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function SN(e,t,n){if((t=La(t))instanceof tN)return t._internalPath;if("string"==typeof t)return TN(e,t);throw CN("Field path arguments must be of type string or ",e,!1,void 0,n)}var IN=new RegExp("[~\\*/\\[\\]]");function TN(e,t,n){if(t.search(IN)>=0)throw CN("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Vr(tN,Pr(t.split(".")))._internalPath}catch(L){throw CN("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function CN(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new tk(ek.INVALID_ARGUMENT,u+e+s)}function AN(e,t){return e.some((function(e){return e.isEqual(t)}))}var NN=function(){function e(t,n,r,i,a){kn(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return wn(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new LA(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ON(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(RN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ON=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"data",value:function(){return lu(Mr(n.prototype),"data",this).call(this)}}]),n}(NN);function RN(e,t){return"string"==typeof t?TN(e,t):t instanceof tN?t._internalPath:t._delegate._internalPath}function PN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tk(ek.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var DN=wn((function e(){kn(this,e)})),LN=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n)}(DN);function MN(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof DN&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof UN})).length,n=e.filter((function(e){return e instanceof FN})).length;if(t>1||t>0&&n>0)throw new tk(ek.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=qr(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var FN=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return wn(n,[{key:"_apply",value:function(e){var t=this._parse(e);return YN(e._query,t),new MA(e.firestore,e.converter,ax(e._query,t))}},{key:"_parse",value:function(e){var t=lN(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new tk(ek.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){$N(o,a);var s,c=[],l=qr(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(QN(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=QN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||$N(o,a),u=bN(n,"where",o,"in"===a||"not-in"===a);return Ew.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LN);var UN=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return wn(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Sw.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=qr(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;YN(r,a),r=ax(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new MA(e.firestore,e.converter,ax(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(DN);var jN=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return wn(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new tk(ek.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new tk(ek.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ww(t,n);return function(e,t){if(null===ex(e)){var n=tx(e);null!==n&&JN(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new MA(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Yw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(LN);var VN=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return wn(n,[{key:"_apply",value:function(e){return new MA(e.firestore,e.converter,ox(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LN);var BN=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return wn(n,[{key:"_apply",value:function(e){var t=HN(e,this.type,this._docOrFields,this._inclusive);return new MA(e.firestore,e.converter,function(e,t){return new Yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LN);function zN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return BN._create("startAt",t,!0)}function qN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return BN._create("startAfter",t,!1)}var KN=function(e){Lr(n,e);var t=jr(n);function n(e,r,i){var a;return kn(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return wn(n,[{key:"_apply",value:function(e){var t=HN(e,this.type,this._docOrFields,this._inclusive);return new MA(e.firestore,e.converter,function(e,t){return new Yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LN);function WN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KN._create("endBefore",t,!1)}function GN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KN._create("endAt",t,!0)}function HN(e,t,n,r){if(n[0]=La(n[0]),n[0]instanceof NN)return function(e,t,n,r,i){if(!r)throw new tk(ek.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=qr(rx(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(rw(t,r.key));else{var c=r.data.field(s.field);if(qb(c))throw new tk(ek.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new tk(ek.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new gw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=lN(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new tk(ek.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new tk(ek.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!nx(e)&&-1!==c.indexOf("/"))throw new tk(ek.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(kk.fromString(c));if(!xk.isDocumentKey(l))throw new tk(ek.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new xk(l);u.push(rw(t,f))}else{var h=bN(n,r,c);u.push(h)}}return new gw(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function QN(e,t,n){if("string"==typeof(n=La(n))){if(""===n)throw new tk(ek.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nx(t)&&-1!==n.indexOf("/"))throw new tk(ek.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(kk.fromString(n));if(!xk.isDocumentKey(r))throw new tk(ek.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return rw(e,new xk(r))}if(n instanceof LA)return rw(e,n._key);throw new tk(ek.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(AA(n),"."))}function $N(e,t){if(!Array.isArray(e)||0===e.length)throw new tk(ek.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function YN(e,t){if(t.isInequality()){var n=tx(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new tk(ek.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=ex(e);null!==i&&JN(e,r,i)}var a=function(e,t){var n,r=qr(e);try{for(r.s();!(n=r.n()).done;){var i,a=qr(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new tk(ek.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new tk(ek.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function JN(e,t,n){if(!n.isEqual(t))throw new tk(ek.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var XN=function(){function e(){kn(this,e)}return wn(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Yb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jg()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Cb(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new rN(Bb(e.latitude),Bb(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Kb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wb(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Vb(e);return new mk(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=kk.fromString(e);Xg(rE(n));var r=new Hb(n.get(1),n.get(3)),i=new xk(n.popFirst(5));return r.isEqual(t)||Qg("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ZN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var eO=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).firestore=e,r}return wn(n,[{key:"convertBytes",value:function(e){return new eN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new LA(this.firestore,null,t)}}]),n}(XN);var tO=function(){function e(t,n){kn(this,e),this.hasPendingWrites=t,this.fromCache=n}return wn(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nO=function(e){Lr(n,e);var t=jr(n);function n(e,r,i,a,o,u){var s;return kn(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return wn(n,[{key:"exists",value:function(){return lu(Mr(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(RN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(NN),rO=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return lu(Mr(n.prototype),"data",this).call(this,e)}}]),n}(nO),iO=function(){function e(t,n,r,i){kn(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tO(i.hasPendingWrites,i.fromCache),this.query=r}return wn(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rO(n._firestore,n._userDataWriter,r.key,r,new tO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new tk(ek.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new rO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:aO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function aO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jg()}}function oO(e,t){return e instanceof nO&&t instanceof nO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof iO&&t instanceof iO&&e._firestore===t._firestore&&BA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var uO=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).firestore=e,r}return wn(n,[{key:"convertBytes",value:function(e){return new eN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new LA(this.firestore,null,t)}}]),n}(XN);function sO(e){e=NA(e,LA);var t=NA(e.firestore,WA),n=GA(t),r=new uO(t);return function(e,t){var n=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function r(){return bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=xt(bt().mark((function e(t,n,r){var i,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Zg(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new tk(ek.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=NT(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,mA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new nO(t,r,e._key,n,new tO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function cO(e){e=NA(e,MA);var t=NA(e.firestore,WA),n=GA(t),r=new uO(t);return function(e,t){var n=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function r(){return bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=xt(bt().mark((function e(t,n,r){var i,a,o,u,s;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oI(t,n,!0);case 3:i=e.sent,a=new YT(n,i.Wi),o=a.zu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=NT(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,mA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new iO(t,r,e,n)}))}function lO(e,t,n){e=NA(e,LA);var r=NA(e.firestore,WA),i=ZN(e.converter,t,n);return pO(r,[fN(lN(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Wx.none())])}function fO(e,t,n){e=NA(e,LA);for(var r=NA(e.firestore,WA),i=lN(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return pO(r,[("string"==typeof(t=La(t))||t instanceof tN?kN(i,"updateDoc",e._key,t,n,o):gN(i,"updateDoc",e._key,t)).toMutation(e._key,Wx.exists(!0))])}function hO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=La(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||qA(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(qA(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof LA)l=NA(e.firestore,WA),f=Xw(e._key.path),c={next:function(t){n[s]&&n[s](vO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=NA(e,MA);l=NA(p.firestore,WA),f=p._query;var v=new uO(l);c={next:function(e){n[s]&&n[s](new iO(l,v,p,e))},error:n[s+1],complete:n[s+2]},PN(e._query)}return function(e,t,n,r){var i=new tA(r),a=new qT(t,i,n);return e.asyncQueue.enqueueAndForget(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=MT,t.next=3,bA(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=UT,t.next=3,bA(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(GA(l),f,h,c)}function dO(e,t){return function(e,t){var n=new tA(t);return e.asyncQueue.enqueueAndForget(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Zg(e).Au.add(t),t.next()},t.next=3,bA(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(xt(bt().mark((function t(){return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Zg(e).Au.delete(t)},t.next=3,bA(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(GA(e=NA(e,WA)),qA(t)?t:{next:t})}function pO(e,t){return function(e,t){var n=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function r(){return bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=oC,r.next=3,gA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(GA(e),t)}function vO(e,t,n){var r=n.docs.get(t._key),i=new uO(e);return new nO(e,i,t._key,r,new tO(n.hasPendingWrites,n.fromCache),t.converter)}var mO={maxAttempts:5},yO=function(){function e(t,n){kn(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lN(t)}return wn(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=gO(e,this._firestore),i=ZN(r.converter,t,n),a=fN(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Wx.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=gO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=La(t))||t instanceof tN?kN(this._dataReader,"WriteBatch.update",i._key,t,n,o):gN(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Wx.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=gO(e,this._firestore);return this._mutations=this._mutations.concat(new o_(t._key,Wx.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new tk(ek.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function gO(e,t){if((e=La(e)).firestore!==t)throw new tk(ek.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var kO=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,r))._firestore=e,i}return wn(n,[{key:"get",value:function(e){var t=this,r=gO(e,this._firestore),i=new uO(this._firestore);return lu(Mr(n.prototype),"get",this).call(this,e).then((function(e){return new nO(t._firestore,i,r._key,e._document,new tO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){kn(this,e),this._firestore=t,this._transaction=n,this._dataReader=lN(t)}return wn(e,[{key:"get",value:function(e){var t=this,n=gO(e,this._firestore),r=new eO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Jg();var i=e[0];if(i.isFoundDocument())return new NN(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new NN(t._firestore,r,n._key,null,n.converter);throw Jg()}))}},{key:"set",value:function(e,t,n){var r=gO(e,this._firestore),i=ZN(r.converter,t,n),a=fN(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=gO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=La(t))||t instanceof tN?kN(this._dataReader,"Transaction.update",i._key,t,n,o):gN(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=gO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function bO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vN("arrayUnion",t)}function wO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mN("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Kg=e}(Oo),Eo(new Ma("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new WA(new ok(e.getProvider("auth-internal")),new lk(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tk(ek.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hb(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Fo(zg,"3.10.1",e),Fo(zg,"3.10.1","esm2017")}();function xO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new tk("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function _O(){if("undefined"===typeof Uint8Array)throw new tk("unimplemented","Uint8Arrays are not available in this environment.")}function EO(){if("undefined"==typeof atob)throw new tk("unimplemented","Blobs are unavailable in Firestore in this environment.")}var SO=function(){function e(t){kn(this,e),this._delegate=t}return wn(e,[{key:"toBase64",value:function(){return EO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return _O(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return EO(),new e(eN.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return _O(),new e(eN.fromUint8Array(t))}}]),e}();function IO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=qr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var TO=function(){function e(){kn(this,e)}return wn(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){ZA(e=NA(e,WA));var n=GA(e);if(n._uninitializedComponentsProvider)throw new tk(ek.FAILED_PRECONDITION,"SDK cache is already specified.");$g("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new ZC;return QA(n,i,new JC(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){ZA(e=NA(e,WA));var t=GA(e);if(t._uninitializedComponentsProvider)throw new tk(ek.FAILED_PRECONDITION,"SDK cache is already specified.");$g("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new ZC;return QA(t,r,new XC(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new tk(ek.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new nk;return e._queue.enqueueAndForgetEvenWhileRestricted(xt(bt().mark((function n(){return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=xt(bt().mark((function e(t){var n;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Uk.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Uk.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(WS(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),CO=function(){function e(t,n,r){var i=this;kn(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hb||(this._appCompat=t)}return wn(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||$g("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};DA(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return $A(this._delegate)}},{key:"disableNetwork",value:function(){return YA(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&IA("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function n(){return bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=yC,n.next=3,gA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(GA(e=NA(e,WA)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return dO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new tk("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new zO(this,UA(this._delegate,e))}catch(t){throw DO(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new PO(this,jA(this._delegate,e))}catch(t){throw DO(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new jO(this,function(e,t){if(e=NA(e,PA),SA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new tk(ek.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new MA(e,null,function(e){return new Yw(kk.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw DO(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=NA(e,WA);var r=Object.assign(Object.assign({},mO),n);return function(e){if(e.maxAttempts<1)throw new tk(ek.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new nk;return e.asyncQueue.enqueueAndForget(xt(bt().mark((function i(){var a;return bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,kA(e);case 2:a=i.sent,new iA(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(GA(e),(function(n){return t(new kO(e,n))}),r)}(this._delegate,(function(n){return e(new NO(t,n))}))}},{key:"batch",value:function(){var e=this;return GA(this._delegate),new OO(new yO(this._delegate,(function(t){return pO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return JA(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return XA(this._delegate,e).then((function(e){return e?new jO(t,e):null}))}}]),e}(),AO=function(e){Lr(n,e);var t=jr(n);function n(e){var r;return kn(this,n),(r=t.call(this)).firestore=e,r}return wn(n,[{key:"convertBytes",value:function(e){return new SO(new eN(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return PO.forKey(t,this.firestore,null)}}]),n}(XN);var NO=function(){function e(t,n){kn(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new AO(t)}return wn(e,[{key:"get",value:function(e){var t=this,n=qO(e);return this._delegate.get(n).then((function(e){return new FO(t._firestore,new nO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=qO(e);return n?(xO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=qO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=qO(e);return this._delegate.delete(t),this}}]),e}(),OO=function(){function e(t){kn(this,e),this._delegate=t}return wn(e,[{key:"set",value:function(e,t,n){var r=qO(e);return n?(xO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=qO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=qO(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),RO=function(){function e(t,n,r){kn(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return wn(e,[{key:"fromFirestore",value:function(e,t){var n=new rO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new UO(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new AO(t),n),i.set(n,a)),a}}]),e}();RO.INSTANCES=new WeakMap;var PO=function(){function e(t,n){kn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new AO(t)}return wn(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new zO(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new zO(this.firestore,UA(this._delegate,e))}catch(t){throw DO(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=La(e))instanceof LA&&VA(this._delegate,e)}},{key:"set",value:function(e,t){t=xO("DocumentReference.set",t);try{return t?lO(this._delegate,e,t):lO(this._delegate,e)}catch(n){throw DO(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?fO(this._delegate,e):fO.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw DO(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return pO(NA(e.firestore,WA),[new o_(e._key,Wx.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=LO(n),a=MO(n,(function(t){return new FO(e.firestore,new nO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return hO(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?sO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=NA(e,LA);var t=NA(e.firestore,WA);return xA(GA(t),e._key,{source:"server"}).then((function(n){return vO(t,e,n)}))}(this._delegate):function(e){e=NA(e,LA);var t=NA(e.firestore,WA);return xA(GA(t),e._key).then((function(n){return vO(t,e,n)}))}(this._delegate),t.then((function(e){return new FO(n.firestore,new nO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(RO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new tk("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new LA(n._delegate,r,new xk(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new LA(n._delegate,r,t))}}]),e}();function DO(e,t,n){return e.message=e.message.replace(t,n),e}function LO(e){var t,n=qr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!IO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function MO(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=IO(e[0])?e[0]:IO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var FO=function(){function e(t,n){kn(this,e),this._firestore=t,this._delegate=n}return wn(e,[{key:"ref",get:function(){return new PO(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return oO(this._delegate,e._delegate)}}]),e}(),UO=function(e){Lr(n,e);var t=jr(n);function n(){return kn(this,n),t.apply(this,arguments)}return wn(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Jg()}(void 0!==t),t}}]),n}(FO),jO=function(){function e(t,n){kn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new AO(t)}return wn(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,MN(this._delegate,function(e,t,n){var r=t,i=RN("where",e);return FN._create(i,r,n)}(t,n,r)))}catch(i){throw DO(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,MN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=RN("orderBy",e);return jN._create(n,t)}(t,n)))}catch(r){throw DO(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,MN(this._delegate,function(e){return OA("limit",e),VN._create("limit",e,"F")}(t)))}catch(n){throw DO(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,MN(this._delegate,function(e){return OA("limitToLast",e),VN._create("limitToLast",e,"L")}(t)))}catch(n){throw DO(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,MN(this._delegate,zN.apply(void 0,arguments)))}catch(t){throw DO(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,MN(this._delegate,qN.apply(void 0,arguments)))}catch(t){throw DO(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,MN(this._delegate,WN.apply(void 0,arguments)))}catch(t){throw DO(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,MN(this._delegate,GN.apply(void 0,arguments)))}catch(t){throw DO(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return BA(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?cO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=NA(e,MA);var t=NA(e.firestore,WA),n=GA(t),r=new uO(t);return _A(n,e._query,{source:"server"}).then((function(n){return new iO(t,r,e,n)}))}(this._delegate):function(e){e=NA(e,MA);var t=NA(e.firestore,WA),n=GA(t),r=new uO(t);return PN(e._query),_A(n,e._query).then((function(n){return new iO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new BO(n.firestore,new iO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=LO(n),a=MO(n,(function(t){return new BO(e.firestore,new iO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return hO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(RO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),VO=function(){function e(t,n){kn(this,e),this._firestore=t,this._delegate=n}return wn(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new UO(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),BO=function(){function e(t,n){kn(this,e),this._firestore=t,this._delegate=n}return wn(e,[{key:"query",get:function(){return new jO(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new UO(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new VO(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new UO(n._firestore,r))}))}},{key:"isEqual",value:function(e){return oO(this._delegate,e._delegate)}}]),e}(),zO=function(e){Lr(n,e);var t=jr(n);function n(e,r){var i;return kn(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return wn(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new PO(this.firestore,e):null}},{key:"doc",value:function(e){try{return new PO(this.firestore,void 0===e?jA(this._delegate):jA(this._delegate,e))}catch(t){throw DO(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=NA(e.firestore,WA),r=jA(e),i=ZN(e.converter,t);return pO(n,[fN(lN(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Wx.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new PO(t.firestore,e)}))}},{key:"isEqual",value:function(e){return VA(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(RO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(jO);function qO(e){return NA(e,LA)}var KO=function(){function e(){kn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Vr(tN,n)}return wn(e,[{key:"isEqual",value:function(e){return(e=La(e))instanceof tN&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(wk.keyField().canonicalString())}}]),e}(),WO=function(){function e(t){kn(this,e),this._delegate=t}return wn(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new pN("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new hN("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=bO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=wO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new yN("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),GO={Firestore:CO,GeoPoint:rN,Timestamp:mk,Blob:SO,Transaction:NO,WriteBatch:OO,DocumentReference:PO,DocumentSnapshot:FO,Query:jO,QueryDocumentSnapshot:UO,QuerySnapshot:BO,CollectionReference:zO,FieldPath:KO,FieldValue:WO,setLogLevel:function(e){!function(e){Wg.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ma("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},GO)))}(e,(function(e,t){return new CO(e,t,new TO)})),e.registerVersion("@firebase/firestore-compat","0.3.7")}(cu);var HO=cu.initializeApp({apiKey:"AIzaSyC24KRpKB1hfXzE1-sHMadESvsl-9IdP8k",authDomain:"netflix-clone-182b9.firebaseapp.com",projectId:"netflix-clone-182b9",storageBucket:"netflix-clone-182b9.appspot.com",messagingSenderId:"1097433457832",appId:"1:1097433457832:web:aeaaecb35a3f2b57f94e9d",measurementId:"G-J05GXDZXNM"}).firestore(),QO=cu.auth(),$O=HO;var YO=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,Rt.jsx)("div",{className:"signupScreen",children:(0,Rt.jsxs)("form",{children:[(0,Rt.jsx)("h1",{children:"Sign In"}),(0,Rt.jsx)("input",{ref:e,placeholder:"Email",type:"email"}),(0,Rt.jsx)("input",{ref:n,placeholder:"Password",type:"password"}),(0,Rt.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),QO.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign In"}),(0,Rt.jsxs)("h4",{children:[(0,Rt.jsx)("span",{className:"signupScreen__gray",children:"New to Netflix? "}),(0,Rt.jsx)("span",{className:"signupScreen__link",onClick:function(t){t.preventDefault(),QO.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign Up now."})]})]})})};var JO=function(){var e=Ft((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,Rt.jsxs)("div",{className:"loginScreen",children:[(0,Rt.jsxs)("div",{className:"loginScreen__background",children:[(0,Rt.jsx)("img",{className:"loginScreen__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Netflix_2015_logo.svg/1200px-Netflix_2015_logo.svg.png",alt:"logo"}),(0,Rt.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__button",children:"Sign In"}),(0,Rt.jsx)("div",{className:"loginScreen__gradient"})]}),(0,Rt.jsx)("div",{className:"loginScreen__body",children:n?(0,Rt.jsx)(YO,{}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("h1",{children:"Unlimited films,Tv programmes and more."}),(0,Rt.jsx)("h2",{children:"Watch anywhere.Cancel at any time."}),(0,Rt.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership"}),(0,Rt.jsx)("div",{className:"loginScreen__input",children:(0,Rt.jsxs)("form",{children:[(0,Rt.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,Rt.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__getStarted",children:"GET STARTED"})]})})]})})]})},XO="https://js.stripe.com/v3",ZO=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,eR="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",tR=null,nR=function(e){return null!==tR||(tR=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(eR),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(XO,'"]')),t=0;t<e.length;t++){var n=e[t];if(ZO.test(n.src))return n}return null}();r&&e?console.warn(eR):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(XO).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),tR},rR=Promise.resolve().then((function(){return nR(null)})),iR=!1;rR.catch((function(e){iR||console.warn(e)}));var aR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];iR=!0;var r=Date.now();return rR.then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.53.0",startTime:t})}(r,n),r}(e,t,r)}))};var oR=function(){var e=Ft((0,t.useState)([]),2),n=e[0],r=e[1],i=m(Nt),a=Ft((0,t.useState)(null),2),o=a[0],u=a[1];(0,t.useEffect)((function(){$O.collection("customers").doc(i.uid).collection("subscriptions").get().then((function(e){e.forEach(function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u({role:t.data().role,current_period_end:t.data().current_period_end.seconds,current_period_start:t.data().current_period_start.seconds});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[i.uid]),(0,t.useEffect)((function(){$O.collection("products").where("active","==",!0).get().then((function(e){var t={};e.forEach(function(){var e=xt(bt().mark((function e(n){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t[n.id]=n.data(),e.next=3,n.ref.collection("prices").get();case 3:e.sent.docs.forEach((function(e){t[n.id].prices={priceId:e.id,priceData:e.data()}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(t)}))}),[]),console.log(n),console.log(o);var s=function(){var e=xt(bt().mark((function e(t){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$O.collection("customers").doc(i.uid).collection("checkout_sessions").add({price:t,success_url:window.location.origin,cancel_url:window.location.origin});case 2:e.sent.onSnapshot(function(){var e=xt(bt().mark((function e(t){var n,r,i;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),r=n.error,i=n.sessionId,r&&alert("An error occured:".concat(r.message)),!i){e.next=7;break}return e.next=5,aR("pk_test_51NCchLSE391aAb3fXmlxnCb3m0DS2imSvFSsgVOvdyd7DZqAaMpYnwqITSoCQGHK5utWzsnUZOtSKgDfIF4q9JOZ006e4b4oM4");case 5:e.sent.redirectToCheckout({sessionId:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Rt.jsxs)("div",{className:"plansScreen",children:[(0,Rt.jsx)("br",{}),o&&(0,Rt.jsxs)("p",{children:["Renewal date:",new Date(1e3*(null===o||void 0===o?void 0:o.current_period_end)).toLocaleDateString()]}),Object.entries(n).map((function(e){var t,n=Ft(e,2),r=n[0],i=n[1],a=null===(t=i.name)||void 0===t?void 0:t.toLowerCase().includes(null===o||void 0===o?void 0:o.role);return(0,Rt.jsxs)("div",{className:"".concat(a&&"plansScreen__plan--disabled"," plansScreen__plan"),children:[(0,Rt.jsxs)("div",{className:"plansScreen__info",children:[(0,Rt.jsx)("h5",{children:i.name}),(0,Rt.jsx)("h6",{children:i.description})]}),(0,Rt.jsx)("button",{onClick:function(){return!a&&s(i.prices.priceId)},children:a?"Current Package":"Subscribe"})]},r)}))]})};var uR=function(){var e=m(Nt);return(0,Rt.jsxs)("div",{className:"profileScreen",children:[(0,Rt.jsx)(ra,{}),(0,Rt.jsxs)("div",{className:"profileScreen__body",children:[(0,Rt.jsx)("h1",{children:"Edit Profile"}),(0,Rt.jsxs)("div",{className:"profileScreen__info",children:[(0,Rt.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:""}),(0,Rt.jsxs)("div",{className:"profileScreen__details",children:[(0,Rt.jsx)("h2",{children:e.email}),(0,Rt.jsxs)("div",{className:"profileScreen__plans",children:[(0,Rt.jsx)("h3",{children:"Plans"}),(0,Rt.jsx)(oR,{}),(0,Rt.jsx)("button",{onClick:function(){return QO.signOut()},className:"profileScreen__signOut",children:"Sign Out"})]})]})]})]})]})};function sR(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),Zr((function(e,t){var n=e.location;return Yr("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Jr(t)}),null,n)));var u=o.current,s=Ft(t.useState({action:u.action,location:u.location}),2),c=s[0],l=s[1];return t.useLayoutEffect((function(){return u.listen(l)}),[u]),t.createElement(Zi,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var cR,lR;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(cR||(cR={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(lR||(lR={}));var fR=function(){var e=m(Nt),n=S();return(0,t.useEffect)((function(){return QO.onAuthStateChanged((function(e){n(e?Tt({uid:e.uid,email:e.email}):Ct())}))}),[n]),(0,Rt.jsx)("div",{className:"App",children:(0,Rt.jsx)(sR,{children:e?(0,Rt.jsxs)(ea,{children:[(0,Rt.jsx)(Xi,{path:"/profile",element:(0,Rt.jsx)(uR,{})}),(0,Rt.jsx)(Xi,{exact:!0,path:"/",element:(0,Rt.jsx)(aa,{})})]}):(0,Rt.jsx)(JO,{})})})},hR=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},dR=document.getElementById("root");(0,i.s)(dR).render((0,Rt.jsx)(t.StrictMode,{children:(0,Rt.jsx)(b,{store:Ot,children:(0,Rt.jsx)(fR,{})})})),hR()}()}();
//# sourceMappingURL=main.4598a008.js.map